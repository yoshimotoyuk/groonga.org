
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>News &#8212; Groonga v12.0.4 documentation</title>
    
    <link href="_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
  
    
    <link rel="stylesheet"
      href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
    <link rel="preload" as="font" type="font/woff2" crossorigin
      href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
    <link rel="preload" as="font" type="font/woff2" crossorigin
      href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">
  
    
      
  
    
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/pydata-sphinx-theme.css" />
    
    <link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">
  
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en">
    

    <!-- Google Analytics -->
    
<script async="" src="https://www.google-analytics.com/analytics.js"></script>
<script>
                        window.ga = window.ga || function () {
                            (ga.q = ga.q || []).push(arguments) };
                        ga.l = +new Date;
                        ga('create', 'UA-7532323-1', 'auto');
                        ga('set', 'anonymizeIp', true);
                        ga('send', 'pageview');
                    </script>

  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    

<a class="navbar-brand" href="https://groonga.org/">
  <img src="_static/groonga.png" class="logo" alt="logo">
</a>


    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/groonga/groonga" rel="noopener" target="_blank" title="GitHub"><span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://twitter.com/groonga" rel="noopener" target="_blank" title="Twitter"><span><i class="fab fa-twitter-square"></i></span>
            <label class="sr-only">Twitter</label></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/blog" rel="noopener" target="_blank" title="Blog"><span><i class="fas fa-blog"></i></span>
            <label class="sr-only">Blog</label></a>
        </li>
      </ul>
      </div>
      
      <div class="navbar-end-item">
        <div class="dropdown" id="version_switcher">
    <button type="button" class="btn btn-primary btn-sm navbar-btn dropdown-toggle" id="version_switcher_button" data-toggle="dropdown">
        English  <!-- this text may get changed later by javascript -->
        <span class="caret"></span>
    </button>
    <div id="version_switcher_menu" class="dropdown-menu list-group-flush py-0" aria-labelledby="version_switcher_button">
    <!-- dropdown will be populated by javascript on page load -->
    </div>
</div>

<!-- NOTE: this JS must live here (not in our global JS file) because it relies
     on being processed by Jinja before it is run (specifically for replacing
     variables news and {'json_url': 'https://groonga.org/docs/_static/switcher.json', 'url_template': 'https://groonga.org/{version}docs/', 'version_match': 'English'}.
-->

<script type="text/javascript">
// Construct the target URL from the JSON components
function buildURL(entry) {
    var template = "https://groonga.org/{version}docs/";  // supplied by jinja
    template = template.replace("{version}", entry.version);
    return template;
}

// Check if corresponding page path exists in other version of docs
// and, if so, go there instead of the homepage of the other docs version
function checkPageExistsAndRedirect(event) {
    const currentFilePath = "news.html",
          tryUrl = event.target.getAttribute("href");
    let otherDocsHomepage = tryUrl.replace(currentFilePath, "");
    $.ajax({
        type: 'HEAD',
        url: tryUrl,
        // if the page exists, go there
        success: function() {
            location.href = tryUrl;
        }
    }).fail(function() {
        location.href = otherDocsHomepage;
    });
    // this prevents the browser from following the href of the clicked node
    // (which is fine because this function takes care of redirecting)
    return false;
}

// Populate the version switcher from the JSON config file
(function () {
    $.getJSON("https://groonga.org/docs/_static/switcher.json", function(data, textStatus, jqXHR) {
        const currentFilePath = "news.html";
        // create links to the corresponding page in the other docs versions
        $.each(data, function(index, entry) {
            // if no custom name specified (e.g., "latest"), use version string
            if (!("name" in entry)) {
                entry.name = entry.version;
            }
            // create the node
            const node = document.createElement("a");
            node.setAttribute("class", "list-group-item list-group-item-action py-1");
            node.textContent = `${entry.name}`;
            // get the base URL for that doc version, add the current page's
            // path to it, and set as `href`
            entry.url = buildURL(entry);
            node.setAttribute("href", `${entry.url}${currentFilePath}`);
            // on click, AJAX calls will check if the linked page exists before
            // trying to redirect, and if not, will redirect to the homepage
            // for that version of the docs.
            node.onclick = checkPageExistsAndRedirect;
            $("#version_switcher_menu").append(node);
            // replace dropdown button text with the preferred display name of
            // this version, rather than using sphinx's 12.0.4 variable.
            // also highlight the dropdown entry for the currently-viewed
            // version's entry
            if (entry.version == "English") {
                node.classList.add("active");
                $("#version_switcher_button").text(entry.name);
            }
        });
    });
})();
</script>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar">
              <div class="sidebar-start-items"><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    
  </div>
</nav>
              </div>
              <div class="sidebar-end-items">
              </div>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   News
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#release-12-0-4-2022-06-06">
     Release 12.0.4 - 2022-06-06
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#improvements">
     Improvements
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#fixes">
     Fixes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#release-12-0-3-2022-04-29">
     Release 12.0.3 - 2022-04-29
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id1">
     Improvements
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id2">
     Fixes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#known-issues">
     Known Issues
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#thanks">
     Thanks
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#release-12-0-2-2022-03-29">
     Release 12.0.2 - 2022-03-29
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id3">
     Improvements
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id4">
     Known Issues
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id5">
     Thanks
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#release-12-0-1-2022-02-28">
     Release 12.0.1 - 2022-02-28
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id6">
     Improvements
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id7">
       Fixes
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id8">
     Known Issues
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#release-12-0-0-2022-02-09">
     Release 12.0.0 - 2022-02-09
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#summary-of-changes-from-groonga-11-0-0-to-11-1-3">
     Summary of changes from Groonga 11.0.0 to 11.1.3
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#new-features-and-improvements">
       New Features and Improvements
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id9">
       Fixes
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#newly-supported-oses">
       Newly supported OSes
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#dropped-support-oses">
       Dropped support OSes
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id10">
     Thanks
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id11">
     Improvements
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#release-11-1-3-2022-01-29">
     Release 11.1.3 - 2022-01-29
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id12">
     Improvements
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id13">
     Fixes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id14">
     Known Issues
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id15">
     Thanks
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#release-11-1-1-2021-12-29">
     Release 11.1.1 - 2021-12-29
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id16">
     Improvements
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id17">
     Fixes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id18">
     Known Issues
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id19">
     Thanks
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#release-11-1-0-2021-11-29">
     Release 11.1.0 - 2021-11-29
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id20">
     Improvements
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id21">
     Fixes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id22">
     Known Issues
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id23">
     Thanks
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#release-11-0-9-2021-11-04">
     Release 11.0.9 - 2021-11-04
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id24">
     Improvements
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id25">
     Fixes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id26">
     Known Issues
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#release-11-0-7-2021-09-29">
     Release 11.0.7 - 2021-09-29
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id27">
     Improvements
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id28">
     Fixes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id29">
     Known Issues
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id30">
     Thanks
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#release-11-0-6-2021-08-29">
     Release 11.0.6 - 2021-08-29
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id31">
     Improvements
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id32">
     Fixes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id33">
     Known Issues
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id34">
     Thanks
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#release-11-0-5-2021-07-29">
     Release 11.0.5 - 2021-07-29
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id35">
     Improvements
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id36">
     Fixes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id37">
     Known Issues
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id38">
     Thanks
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#release-11-0-4-2021-06-29">
     Release 11.0.4 - 2021-06-29
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id39">
       Improvements
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id40">
     Known Issues
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id41">
     Thanks
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#release-11-0-3-2021-05-29">
   Release 11.0.3 - 2021-05-29
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id42">
     Improvements
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id43">
     Fixes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id44">
     Known Issues
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id45">
     Thanks
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#release-11-0-2-2021-05-10">
   Release 11.0.2 - 2021-05-10
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id46">
     Improvements
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id47">
     Known Issues
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id48">
     Thanks
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#release-11-0-1-2021-03-31">
   Release 11.0.1 - 2021-03-31
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id49">
     Improvements
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id50">
     Fixes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id51">
     Known Issues
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id52">
     Thanks
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#release-11-0-0-2021-02-09">
   Release 11.0.0 - 2021-02-09
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id53">
     Improvements
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id54">
     Fixes
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#release-10-1-1-2021-01-25">
   Release 10.1.1 - 2021-01-25
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id55">
     Improvements
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id56">
     Fixes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id57">
     Thanks
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#release-10-1-0-2020-12-29">
   Release 10.1.0 - 2020-12-29
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id58">
     Improvements
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id59">
     Fixes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id60">
     Thanks
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#release-10-0-9-2020-12-01">
   Release 10.0.9 - 2020-12-01
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id61">
     Improvements
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id62">
     Fixes
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#release-10-0-8-2020-10-29">
   Release 10.0.8 - 2020-10-29
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id63">
     Improvements
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id65">
     Fixes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id66">
     Thanks
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#release-10-0-7-2020-09-29">
   Release 10.0.7 - 2020-09-29
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id67">
     Improvements
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id68">
     Fixes
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#release-10-0-6-2020-08-29">
   Release 10.0.6 - 2020-08-29
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id69">
     Improvements
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id70">
     Fixes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id71">
     Thanks
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#release-10-0-5-2020-07-30">
   Release 10.0.5 - 2020-07-30
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id72">
     Improvements
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id73">
     Fixes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id74">
     Thanks
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#release-10-0-4-2020-06-29">
   Release 10.0.4 - 2020-06-29
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id75">
     Improvements
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id76">
     Fixes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id77">
     Thanks
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#release-10-0-3-2020-05-29">
   Release 10.0.3 - 2020-05-29
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id78">
     Improvements
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id79">
     Fixes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id80">
     Thanks
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#release-10-0-2-2020-04-29">
   Release 10.0.2 - 2020-04-29
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id81">
     Improvements
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id82">
     Fixes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id83">
     Thanks
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#release-10-0-1-2020-03-30">
   Release 10.0.1 - 2020-03-30
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id84">
     Fixes
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#release-10-0-0-2020-03-29">
   Release 10.0.0 - 2020-03-29
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id85">
     Improvements
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#release-9-1-2-2020-01-29">
   Release 9.1.2 - 2020-01-29
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id86">
     Improvements
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#release-9-1-1-2020-01-07">
   Release 9.1.1 - 2020-01-07
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id87">
     Improvements
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#release-9-1-0-2019-11-29">
   Release 9.1.0 - 2019-11-29
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id88">
     Improvements
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id89">
     Fixes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id90">
     Thanks
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#release-9-0-9-2019-10-30">
   Release 9.0.9 - 2019-10-30
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id91">
     Improvements
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id92">
     Fixes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id93">
     Thanks
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#release-9-0-8-2019-09-27">
   Release 9.0.8 - 2019-09-27
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id94">
     Improvements
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id95">
     Fixes
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#release-9-0-7-2019-08-29">
   Release 9.0.7 - 2019-08-29
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id96">
     Improvements
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id97">
     Fixes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id98">
     Thanks
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#release-9-0-6-2019-08-05">
   Release 9.0.6 - 2019-08-05
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id99">
     Improvements
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id100">
     Fixes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id101">
     Thanks
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#release-9-0-5-2019-07-30">
   Release 9.0.5 - 2019-07-30
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id102">
     Improvements
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id103">
     Fixes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id104">
     Thanks
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#release-9-0-4-2019-06-29">
   Release 9.0.4 - 2019-06-29
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id105">
     Improvements
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id106">
     Fixes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id107">
     Thanks
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#release-9-0-3-2019-05-29">
   Release 9.0.3 - 2019-05-29
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id108">
     Improvements
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id109">
     Fixes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id110">
     Thanks
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#release-9-0-2-2019-04-29">
   Release 9.0.2 - 2019-04-29
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id111">
     Improvements
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id112">
     Fixes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id113">
     Thanks
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#release-9-0-1-2019-03-29">
   Release 9.0.1 - 2019-03-29
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id114">
     Improvements
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id115">
     Fixes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id116">
     Thanks
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#release-9-0-0-2019-02-09">
   Release 9.0.0 - 2019-02-09
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id117">
     Improvements
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#release-8-1-1-2019-01-29">
   Release 8.1.1 - 2019-01-29
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id118">
     Improvements
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id119">
     Fixes
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#release-8-1-0-2018-12-29">
   Release 8.1.0 - 2018-12-29
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id120">
     Improvements
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id121">
     Fixes
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#release-8-0-9-2018-11-29">
   Release 8.0.9 - 2018-11-29
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id122">
     Improvements
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id123">
     Fixes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id124">
     Thanks
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#release-8-0-8-2018-10-29">
   Release 8.0.8 - 2018-10-29
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id125">
     Improvements
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id126">
     Fixes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id127">
     Thanks
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#release-8-0-7-2018-09-29">
   Release 8.0.7 - 2018-09-29
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id128">
     Improvements
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id129">
     Fixes
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#release-8-0-6-2018-08-29">
   Release 8.0.6 - 2018-08-29
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id130">
     Improvements
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id131">
     Fixes
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#release-8-0-5-2018-07-29">
   Release 8.0.5 - 2018-07-29
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id132">
     Improvements
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id133">
     Fixes
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#release-8-0-4-2018-06-29">
   Release 8.0.4 - 2018-06-29
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id134">
     Improvements
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id135">
     Fixes
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#release-8-0-3-2018-05-29">
   Release 8.0.3 - 2018-05-29
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id136">
     Improvements
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id137">
     Fixes
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#release-8-0-2-2018-04-29">
   Release 8.0.2 - 2018-04-29
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id138">
     Improvements
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id139">
     Fixes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id140">
     Thanks
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#release-8-0-1-2018-03-29">
   Release 8.0.1 - 2018-03-29
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id141">
     Improvements
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id142">
     Fixes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id143">
     Thanks
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#release-8-0-0-2018-02-09">
   Release 8.0.0 - 2018-02-09
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id144">
     Improvements
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id145">
     Fixes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id146">
     Thanks
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#release-7-1-1-2018-01-29">
   Release 7.1.1 - 2018-01-29
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id147">
     Improvements
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id148">
     Fixes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id149">
     Thanks
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#release-7-1-0-2017-12-29">
   Release 7.1.0 - 2017-12-29
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id150">
     Improvements
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id151">
     Fixes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id152">
     Thanks
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#release-7-0-9-2017-11-29">
   Release 7.0.9 - 2017-11-29
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id153">
     Improvements
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id154">
     Fixes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id155">
     Thanks
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#release-7-0-8-2017-10-29">
   Release 7.0.8 - 2017-10-29
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id156">
     Improvements
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id157">
     Fixes
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#release-7-0-7-2017-09-29">
   Release 7.0.7 - 2017-09-29
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id158">
     Improvements
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id159">
     Fixes
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#release-7-0-6-2017-08-29">
   Release 7.0.6 - 2017-08-29
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id160">
     Improvements
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id161">
     Fixes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id162">
     Thanks
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#release-7-0-5-2017-07-29">
   Release 7.0.5 - 2017-07-29
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id163">
     Improvements
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id164">
     Fixes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id165">
     Thanks
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#release-7-0-4-2017-06-29">
   Release 7.0.4 - 2017-06-29
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id166">
     Improvements
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id167">
     Fixes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id168">
     Thanks
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#release-7-0-3-2017-05-29">
   Release 7.0.3 - 2017-05-29
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id169">
     Improvements
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id170">
     Fixes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id171">
     Thanks
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#release-7-0-2-2017-04-29">
   Release 7.0.2 - 2017-04-29
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id172">
     Improvements
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id173">
     Fixes
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#release-7-0-1-2017-03-29">
   Release 7.0.1 - 2017-03-29
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id174">
     Improvements
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id175">
     Fixes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id176">
     Thanks
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#release-7-0-0-2017-02-09">
   Release 7.0.0 - 2017-02-09
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id177">
     Improvements
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id178">
     Fixes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id179">
     Thanks
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#the-old-releases">
   The old releases
  </a>
 </li>
</ul>

</nav>
              </div>
              
              <div class="toc-item">
                

<div class="tocsection editthispage">
    <a href="https://github.com/groonga/groonga/edit/master/doc/source/news.rst">
        <i class="fas fa-pencil-alt"></i> Edit this page
    </a>
</div>

              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="section" id="news">
<h1>News<a class="headerlink" href="#news" title="Permalink to this headline">¶</a></h1>
<div class="section" id="release-12-0-4-2022-06-06">
<span id="release-12-0-4"></span><h2>Release 12.0.4 - 2022-06-06<a class="headerlink" href="#release-12-0-4-2022-06-06" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="improvements">
<h2>Improvements<a class="headerlink" href="#improvements" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>[<a class="reference internal" href="install/ubuntu.html"><span class="doc">Ubuntu</span></a>] Added support for Ubuntu 22.04 (Jammy Jellyfish).</p></li>
<li><p>We don’t provide <cite>groonga-benchmark</cite>.</p>
<p>Because nobody will not use it and we can’t maintain it.</p>
</li>
<li><p>[<a class="reference internal" href="reference/commands/status.html"><span class="doc">status</span></a>] Added a new item <code class="docutils literal notranslate"><span class="pre">memory_map_size</span></code>.</p>
<p>We can get the total memory map size in bytes of Groonga with <code class="docutils literal notranslate"><span class="pre">status</span></code> command.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">status</span>
<span class="p">[</span>
  <span class="p">[</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mf">1654237168.304533</span><span class="p">,</span>
    <span class="mf">0.0001480579376220703</span>
  <span class="p">],</span>
  <span class="p">{</span>
    <span class="p">(</span><span class="n">omitted</span><span class="p">)</span>
    <span class="s2">&quot;memory_map_size&quot;</span><span class="p">:</span> <span class="mi">70098944</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p>For example, in Windows, if Groonga uses up physical memory and swap area, Groonga can’t more mapping memory than that.
Therefore, we can control properly memory map size by monitoring this value even if the environment does have not enough memory.</p>
</li>
</ul>
</div>
<div class="section" id="fixes">
<h2>Fixes<a class="headerlink" href="#fixes" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>Fixed a bug Groonga’s response may be slow when we execute <code class="docutils literal notranslate"><span class="pre">request_cancel</span></code> while executing a search.</p>
<p>Especially, when the number of records of the search target is many, Groonga’s response may be very slow.</p>
</li>
<li><p>Fixed a bug that string list can’t be casted to int32 vector.</p>
<p>For example, the following cast had failed.</p>
<ul class="simple">
<li><p>[“10”, “100”] -&gt; [10, 100]</p></li>
</ul>
<p>This bug only occurs when we specify <code class="docutils literal notranslate"><span class="pre">apache-arrow</span></code> into <code class="docutils literal notranslate"><span class="pre">input_type</span></code> as the argument of <code class="docutils literal notranslate"><span class="pre">load</span></code>.
This bug occurs in Groonga 12.0.2 or later.</p>
</li>
<li><p>Fixed a bug that Groonga Munin Plugins do not work on AlmaLinux 8 and CentOS 7.</p></li>
</ul>
</div>
<div class="section" id="release-12-0-3-2022-04-29">
<span id="release-12-0-3"></span><h2>Release 12.0.3 - 2022-04-29<a class="headerlink" href="#release-12-0-3-2022-04-29" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="id1">
<h2>Improvements<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>[<a class="reference internal" href="reference/commands/logical_count.html"><span class="doc">logical_count</span></a>] Improved memory usage while <code class="docutils literal notranslate"><span class="pre">logical_count</span></code> executed.</p>
<p>Up to now, Groonga had been keeping objects(objects are tables and columns and indexes, and so on) and temporary tables that were allocated while <code class="docutils literal notranslate"><span class="pre">logical_count</span></code> executed until the execution of <code class="docutils literal notranslate"><span class="pre">logical_count</span></code> finished.</p>
<p>Groonga reduces reference immediately after processing a shard by this feature.
Therefore, Groonga can release memory while <code class="docutils literal notranslate"><span class="pre">logical_count</span></code> executed.
The usage of memory of Groonga may reduce because of these reasons.</p>
<p>This improvement is only valid for the reference count mode.
We can valid the reference count mode by setting <code class="docutils literal notranslate"><span class="pre">GRN_ENABLE_REFERENCE_COUNT=yes</span></code>.</p>
<p>In addition, Groonga releases temporary tables dynamically while <code class="docutils literal notranslate"><span class="pre">logical_count</span></code> is executed by this feature.
Therefore, the usage of memory of Groonga reduces.
This improvement is valid even if we don’t set the reference count mode.</p>
</li>
<li><p>[<a class="reference internal" href="reference/commands/dump.html"><span class="doc">dump</span></a>] Added support for <code class="docutils literal notranslate"><span class="pre">MISSING_IGNORE/MISSING_NIL</span></code>.</p>
<p>If columns had <code class="docutils literal notranslate"><span class="pre">MISSING_IGNORE/MISSING_NIL</span></code>, the dump of these columns had failed until now.
<code class="docutils literal notranslate"><span class="pre">dump</span></code> command supports these columns since this release.</p>
</li>
<li><p>[<a class="reference internal" href="reference/functions/snippet.html"><span class="doc">snippet</span></a>],[<a class="reference internal" href="reference/functions/snippet_html.html"><span class="doc">snippet_html</span></a>] Added support for text vector as input. [groonga-dev,04956][Reported by shinonon]</p>
<p>For example, we can extract snippets of target text around search keywords against vector in JSON data as below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Entries</span> <span class="n">TABLE_NO_KEY</span>
<span class="n">column_create</span> <span class="n">Entries</span> <span class="n">title</span> <span class="n">COLUMN_SCALAR</span> <span class="n">ShortText</span>
<span class="n">column_create</span> <span class="n">Entries</span> <span class="n">contents</span> <span class="n">COLUMN_VECTOR</span> <span class="n">ShortText</span>

<span class="n">table_create</span> <span class="n">Tokens</span> <span class="n">TABLE_PAT_KEY</span> <span class="n">ShortText</span>   <span class="o">--</span><span class="n">default_tokenizer</span> <span class="n">TokenNgram</span>   <span class="o">--</span><span class="n">normalizer</span> <span class="n">NormalizerNFKC130</span>
<span class="n">column_create</span> <span class="n">Tokens</span> <span class="n">entries_title</span> <span class="n">COLUMN_INDEX</span><span class="o">|</span><span class="n">WITH_POSITION</span> <span class="n">Entries</span> <span class="n">title</span>
<span class="n">column_create</span> <span class="n">Tokens</span> <span class="n">entries_contents</span> <span class="n">COLUMN_INDEX</span><span class="o">|</span><span class="n">WITH_SECTION</span><span class="o">|</span><span class="n">WITH_POSITION</span>   <span class="n">Entries</span> <span class="n">contents</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Entries</span>
<span class="p">[</span>
<span class="p">{</span>
  <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;Groonga and MySQL&quot;</span><span class="p">,</span>
  <span class="s2">&quot;contents&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="s2">&quot;Groonga is a full text search engine&quot;</span><span class="p">,</span>
    <span class="s2">&quot;MySQL is a RDBMS&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Mroonga is a MySQL storage engine based on Groonga&quot;</span>
  <span class="p">]</span>
<span class="p">}</span>
<span class="p">]</span>

<span class="n">select</span> <span class="n">Entries</span>\
  <span class="o">--</span><span class="n">output_columns</span> <span class="s1">&#39;snippet_html(contents), contents&#39;</span>\
  <span class="o">--</span><span class="n">match_columns</span> <span class="s1">&#39;title&#39;</span>\
  <span class="o">--</span><span class="n">query</span> <span class="n">Groonga</span>
<span class="p">[</span>
  <span class="p">[</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mf">0.0</span><span class="p">,</span>
    <span class="mf">0.0</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="p">[</span>
      <span class="p">[</span>
        <span class="mi">1</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="p">[</span>
          <span class="s2">&quot;snippet_html&quot;</span><span class="p">,</span>
          <span class="n">null</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;contents&quot;</span><span class="p">,</span>
          <span class="s2">&quot;ShortText&quot;</span>
        <span class="p">]</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="p">[</span>
          <span class="s2">&quot;&lt;span class=</span><span class="se">\&quot;</span><span class="s2">keyword</span><span class="se">\&quot;</span><span class="s2">&gt;Groonga&lt;/span&gt; is a full text search engine&quot;</span><span class="p">,</span>
          <span class="s2">&quot;Mroonga is a MySQL storage engine based on &lt;span class=</span><span class="se">\&quot;</span><span class="s2">keyword</span><span class="se">\&quot;</span><span class="s2">&gt;Groonga&lt;/span&gt;&quot;</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;Groonga is a full text search engine&quot;</span><span class="p">,</span>
          <span class="s2">&quot;MySQL is a RDBMS&quot;</span><span class="p">,</span>
          <span class="s2">&quot;Mroonga is a MySQL storage engine based on Groonga&quot;</span>
        <span class="p">]</span>
      <span class="p">]</span>
    <span class="p">]</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
<p>Until now, if we specified <code class="docutils literal notranslate"><span class="pre">snippet*</span></code> like <code class="docutils literal notranslate"><span class="pre">--output_columns</span> <span class="pre">'snippet_html(contents[1])</span></code>,
we could extract snippets of target text around search keywords against the vector as below.
However, we didn’t know which we should output elements. Because we didn’t know which element was hit on search.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">Entries</span>\
  <span class="o">--</span><span class="n">output_columns</span> <span class="s1">&#39;snippet_html(contents[0]), contents&#39;</span>\
  <span class="o">--</span><span class="n">match_columns</span> <span class="s1">&#39;title&#39;</span>\
  <span class="o">--</span><span class="n">query</span> <span class="n">Groonga</span>
<span class="p">[</span>
  <span class="p">[</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mf">0.0</span><span class="p">,</span>
    <span class="mf">0.0</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="p">[</span>
      <span class="p">[</span>
        <span class="mi">1</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="p">[</span>
          <span class="s2">&quot;snippet_html&quot;</span><span class="p">,</span>
          <span class="n">null</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;contents&quot;</span><span class="p">,</span>
          <span class="s2">&quot;ShortText&quot;</span>
        <span class="p">]</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="p">[</span>
          <span class="s2">&quot;&lt;span class=</span><span class="se">\&quot;</span><span class="s2">keyword</span><span class="se">\&quot;</span><span class="s2">&gt;Groonga&lt;/span&gt; is a full text search engine&quot;</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;Groonga is a full text search engine&quot;</span><span class="p">,</span>
          <span class="s2">&quot;MySQL is a RDBMS&quot;</span><span class="p">,</span>
          <span class="s2">&quot;Mroonga is a MySQL storage engine based on Groonga&quot;</span>
        <span class="p">]</span>
      <span class="p">]</span>
    <span class="p">]</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
</li>
<li><p>[<code class="docutils literal notranslate"><span class="pre">vector_join</span></code>] Added a new function <code class="docutils literal notranslate"><span class="pre">vector_join()</span></code>.[groonga-dev,04956][Reported by shinonon]</p>
<p>This function can concatenate each elements.
We can specify delimiter in the second argument in this function.</p>
<p>For example, we could execute <code class="docutils literal notranslate"><span class="pre">snippet()</span></code> and <code class="docutils literal notranslate"><span class="pre">snippet_html()</span></code> against vector that concatenate each elements as below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">plugin_register</span> <span class="n">functions</span><span class="o">/</span><span class="n">vector</span>

<span class="n">table_create</span> <span class="n">Entries</span> <span class="n">TABLE_NO_KEY</span>
<span class="n">column_create</span> <span class="n">Entries</span> <span class="n">title</span> <span class="n">COLUMN_SCALAR</span> <span class="n">ShortText</span>
<span class="n">column_create</span> <span class="n">Entries</span> <span class="n">contents</span> <span class="n">COLUMN_VECTOR</span> <span class="n">ShortText</span>

<span class="n">table_create</span> <span class="n">Tokens</span> <span class="n">TABLE_PAT_KEY</span> <span class="n">ShortText</span>   <span class="o">--</span><span class="n">default_tokenizer</span> <span class="n">TokenNgram</span>   <span class="o">--</span><span class="n">normalizer</span> <span class="n">NormalizerNFKC130</span>
<span class="n">column_create</span> <span class="n">Tokens</span> <span class="n">entries_title</span> <span class="n">COLUMN_INDEX</span><span class="o">|</span><span class="n">WITH_POSITION</span> <span class="n">Entries</span> <span class="n">title</span>
<span class="n">column_create</span> <span class="n">Tokens</span> <span class="n">entries_contents</span> <span class="n">COLUMN_INDEX</span><span class="o">|</span><span class="n">WITH_SECTION</span><span class="o">|</span><span class="n">WITH_POSITION</span>   <span class="n">Entries</span> <span class="n">contents</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Entries</span>
<span class="p">[</span>
<span class="p">{</span>
  <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;Groonga and MySQL&quot;</span><span class="p">,</span>
  <span class="s2">&quot;contents&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="s2">&quot;Groonga is a full text search engine&quot;</span><span class="p">,</span>
    <span class="s2">&quot;MySQL is a RDBMS&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Mroonga is a MySQL storage engine based on Groonga&quot;</span>
  <span class="p">]</span>
<span class="p">}</span>
<span class="p">]</span>

<span class="n">select</span> <span class="n">Entries</span>\
  <span class="o">--</span><span class="n">output_columns</span> <span class="s1">&#39;snippet_html(vector_join(contents, &quot;</span><span class="se">\n</span><span class="s1">&quot;)), contents&#39;</span>\
  <span class="o">--</span><span class="n">match_columns</span> <span class="s1">&#39;title&#39;</span>\
  <span class="o">--</span><span class="n">query</span> <span class="n">Groonga</span> <span class="o">--</span><span class="n">output_pretty</span> <span class="n">yes</span>
<span class="p">[</span>
  <span class="p">[</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mf">1650849001.524027</span><span class="p">,</span>
    <span class="mf">0.0003361701965332031</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="p">[</span>
      <span class="p">[</span>
        <span class="mi">1</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="p">[</span>
          <span class="s2">&quot;snippet_html&quot;</span><span class="p">,</span>
          <span class="n">null</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;contents&quot;</span><span class="p">,</span>
          <span class="s2">&quot;ShortText&quot;</span>
        <span class="p">]</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="p">[</span>
          <span class="s2">&quot;&lt;span class=</span><span class="se">\&quot;</span><span class="s2">keyword</span><span class="se">\&quot;</span><span class="s2">&gt;Groonga&lt;/span&gt; is a full text search engine</span><span class="se">\n</span><span class="s2">MySQL is a RDBMS</span><span class="se">\n</span><span class="s2">Mroonga is a MySQL storage engine based on &lt;span class=</span><span class="se">\&quot;</span><span class="s2">keyword</span><span class="se">\&quot;</span><span class="s2">&gt;Groonga&lt;/span&gt;&quot;</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;Groonga is a full text search engine&quot;</span><span class="p">,</span><span class="s2">&quot;MySQL is a RDBMS&quot;</span><span class="p">,</span><span class="s2">&quot;Mroonga is a MySQL storage engine based on Groonga&quot;</span>
        <span class="p">]</span>
      <span class="p">]</span>
    <span class="p">]</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
</li>
<li><p>[<a class="reference internal" href="reference/indexing.html"><span class="doc">Indexing</span></a>] Ignore too large a token like online index construction. [GitHub:pgroonga/pgroonga#209][Reported by Zhanzhao (Deo) Liang]</p>
<p>Groonga doesn’t occur error, but Groonga ignores too large a token when we execute static index construction.
However, Groonga output warning in this case.</p>
</li>
</ul>
</div>
<div class="section" id="id2">
<h2>Fixes<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>Fixed a bug that we may be not able to add a key to a table of patricia trie.</p>
<p>This bug occurs in the following conditon.</p>
<ul class="simple">
<li><p>If a table of patricia trie already has a key.</p></li>
<li><p>If the additional key is 4096 bytes.</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="known-issues">
<h2>Known Issues<a class="headerlink" href="#known-issues" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>Currently, Groonga has a bug that there is possible that data is corrupt when we execute many additions, delete, and update data to vector column.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">*&lt;</span></code> and <code class="docutils literal notranslate"><span class="pre">*&gt;</span></code> only valid when we use <code class="docutils literal notranslate"><span class="pre">query()</span></code> the right side of filter condition.
If we specify as below, <code class="docutils literal notranslate"><span class="pre">*&lt;</span></code> and <code class="docutils literal notranslate"><span class="pre">*&gt;</span></code> work as <code class="docutils literal notranslate"><span class="pre">&amp;&amp;</span></code>.</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'content</span> <span class="pre">&#64;</span> <span class="pre">&quot;Groonga&quot;</span> <span class="pre">*&lt;</span> <span class="pre">content</span> <span class="pre">&#64;</span> <span class="pre">&quot;Mroonga&quot;'</span></code></p></li>
</ul>
</div></blockquote>
</li>
<li><p>Groonga may not return records that should match caused by <code class="docutils literal notranslate"><span class="pre">GRN_II_CURSOR_SET_MIN_ENABLE</span></code>.</p></li>
</ul>
</div>
<div class="section" id="thanks">
<h2>Thanks<a class="headerlink" href="#thanks" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>shinonon</p></li>
<li><p>Zhanzhao (Deo) Liang</p></li>
</ul>
</div>
<div class="section" id="release-12-0-2-2022-03-29">
<span id="release-12-0-2"></span><h2>Release 12.0.2 - 2022-03-29<a class="headerlink" href="#release-12-0-2-2022-03-29" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="id3">
<h2>Improvements<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>[<a class="reference internal" href="reference/commands/logical_range_filter.html"><span class="doc">logical_range_filter</span></a>] Added support for reducing reference immediately after processing a shard.</p>
<p>Groonga had reduced reference all shards when the finish of <code class="docutils literal notranslate"><span class="pre">logical_range_filter</span></code> until now.
Groonga reduces reference immediately after processing a shard by this feature.
The usage of memory may reduce while <code class="docutils literal notranslate"><span class="pre">logical_range_filter</span></code> executes by this feature.</p>
<p>This feature is only valid for the reference count mode.
We can valid the reference count mode by setting <code class="docutils literal notranslate"><span class="pre">GRN_ENABLE_REFERENCE_COUNT=yes</span></code>.</p>
<p>Normally, Groonga keep objects(tables and column and index, and so on) that Groonga opened even once on memory.
However, if we open many objects, Groonga uses much memory.
In the reference count mode release objects that are not referenced anywhere from memory.
The usage of memory of Groonga may reduce by this.</p>
</li>
<li><p>We increased the stability of the feature of recovering on crashes.</p>
<p>This feature is experimental and it is disabled by default.
Therefore, the following improvements are no influence on ordinary users.</p>
<ul class="simple">
<li><p>We fixed a bug that the index was broken when Groonga crashed.</p></li>
<li><p>We fixed a bug that might remain a lock.</p></li>
<li><p>We fixed a bug that Groonga crashed while it was recovering the crash.</p></li>
</ul>
</li>
<li><p>Improved performance for mmap if anonymous mmap available.[GitHub:MariaDB/server#1999][Suggested by David CARLIER]</p>
<p>The performance of Groonga is improved a bit by this improvement.</p>
</li>
<li><p>[<a class="reference internal" href="reference/indexing.html"><span class="doc">Indexing</span></a>] Added support for the static index construction against the following types of columns.</p>
<ul class="simple">
<li><p>The non-reference vector column with weight</p></li>
<li><p>The reference vector column with weight</p></li>
<li><p>The reference scalar column</p></li>
</ul>
<p>These columns have not supported the static index construction until now.
Therefore, the time of making the index has longed even if we set the index against these columns after we loaded data into them.
By this improvement, the time of making the index is short in this case.</p>
</li>
<li><p>[<a class="reference internal" href="reference/commands/column_create.html"><span class="doc">column_create</span></a>] Added new flags <code class="docutils literal notranslate"><span class="pre">MISSING_*</span></code> and <code class="docutils literal notranslate"><span class="pre">INVALID_*</span></code>.</p>
<p>We added the following new flags for <code class="docutils literal notranslate"><span class="pre">column_create</span></code>.</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">MISSING_ADD</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MISSING_IGNORE</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MISSING_NIL</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">INVALID_ERROR</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">INVALID_WARN</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">INVALID_IGNORE</span></code></p></li>
</ul>
</div></blockquote>
<p>Normally, if the data column is a reference data column and the nonexistent key is specified, a new record for the nonexistent key is newly created automatically.</p>
<p>The behavior that Groonga adds the key automatically into the column of reference destination is useful in the search like tag search.
Because Groonga adds data automatically when we load data.</p>
<p>However, this behavior is inconvenient if we need the other data except for the key.
Because a record that only has the key exists.</p>
<p>We can change this behavior by using flags that are added in this release.</p>
<blockquote>
<div><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">MISSING_ADD</span></code>: This is the default value. This is the same behavior as the current.</p>
<p>If the data column is a reference data column and the nonexistent key is specified, a new record for the nonexistent key is newly created automatically.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">MISSING_IGNORE</span></code>:</p>
<p>If the data column is a reference data column and the nonexistent key is specified, the nonexistent key is ignored.
If the reference data column is a scalar column, the value is <code class="docutils literal notranslate"><span class="pre">GRN_ID_NIL</span></code>.
If the reference data column is a vector column, the element is just ignored as below</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="s2">&quot;existent1&quot;</span><span class="p">,</span> <span class="s2">&quot;nonexistent&quot;</span><span class="p">,</span> <span class="s2">&quot;existent2&quot;</span><span class="p">]</span> <span class="o">-&gt;</span>
<span class="p">[</span><span class="s2">&quot;existent1&quot;</span> <span class="s2">&quot;existent2&quot;</span><span class="p">]</span>
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">MISSING_NIL</span></code>:</p>
<p>If the data column is a reference data column and the nonexistent key is specified, the nonexistent key in a scalar column and a vector column is treated as <code class="docutils literal notranslate"><span class="pre">GRN_ID_NIL</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="s2">&quot;existent1&quot;</span><span class="p">,</span> <span class="s2">&quot;nonexistent&quot;</span><span class="p">,</span> <span class="s2">&quot;existent2&quot;</span><span class="p">]</span> <span class="o">-&gt;</span>
<span class="p">[</span><span class="s2">&quot;existent1&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span> <span class="p">(</span><span class="n">GRN_ID_NIL</span><span class="p">),</span> <span class="s2">&quot;existent2&quot;</span><span class="p">]</span>
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">INVALID_ERROR</span></code>: This is the default value. This is the same behavior as the current except an error response of a vector column case.</p>
<p>If we set the invalid value (e.g.: <code class="docutils literal notranslate"><span class="pre">XXX</span></code> for <code class="docutils literal notranslate"><span class="pre">UInt8</span></code> scalar column), the set operation is treated as an error.
If the data column is a scalar column, <code class="docutils literal notranslate"><span class="pre">load</span></code> reports an error in log and response.
If the data column is a vector column, <code class="docutils literal notranslate"><span class="pre">load</span></code> reports an error in log but doesn’t report an error in response.
This is an incompatible change.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">INVALID_WARN</span></code>:</p>
<p>If we set the invalid value (e.g.: <code class="docutils literal notranslate"><span class="pre">XXX</span></code> for <code class="docutils literal notranslate"><span class="pre">UInt8</span></code> scalar column), a warning message is logged and the set operation is ignored.
If the target data column is a reference vector data column, <code class="docutils literal notranslate"><span class="pre">MISSING_IGNORE</span></code> and <code class="docutils literal notranslate"><span class="pre">MISSING_NIL</span></code> are used to determine the behavior.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">INVALID_IGNORE</span></code>:</p>
<p>If we set the invalid value (e.g.: <code class="docutils literal notranslate"><span class="pre">XXX</span></code> for <code class="docutils literal notranslate"><span class="pre">UInt8</span></code> scalar column), the set operation is ignored.
If the target data column is a reference vector data column, <code class="docutils literal notranslate"><span class="pre">MISSING_IGNORE</span></code> and <code class="docutils literal notranslate"><span class="pre">MISSING_NIL</span></code> are used to determine the behavior.</p>
</li>
</ul>
</div></blockquote>
</li>
<li><p>[<a class="reference internal" href="reference/commands/dump.html"><span class="doc">dump</span></a>][<a class="reference internal" href="reference/commands/column_list.html"><span class="doc">column_list</span></a>] Added support for <code class="docutils literal notranslate"><span class="pre">MISSING_*</span></code> and <code class="docutils literal notranslate"><span class="pre">INVALID_*</span></code> flags.</p>
<p>These commands doesn’t show <code class="docutils literal notranslate"><span class="pre">MISSING_ADD</span></code> and <code class="docutils literal notranslate"><span class="pre">INVALID_ERROR</span></code> flags to keep backward compatibility.
Because these flags show the default behavior.</p>
</li>
<li><p>[<a class="reference internal" href="reference/commands/schema.html"><span class="doc">schema</span></a>] Added support for <code class="docutils literal notranslate"><span class="pre">MISSING_*</span></code> and <code class="docutils literal notranslate"><span class="pre">INVALID_*</span></code> flags.</p>
<p><code class="docutils literal notranslate"><span class="pre">MISSING_AND</span></code> and <code class="docutils literal notranslate"><span class="pre">INVALID_ERROR</span></code> flags aren’t shown in <code class="docutils literal notranslate"><span class="pre">flags</span></code> to keep backward compatibility.
However, new <code class="docutils literal notranslate"><span class="pre">missing</span></code> and <code class="docutils literal notranslate"><span class="pre">invalid</span></code> keys are added to each column.</p>
</li>
<li><p>We provided the package of Amazon Linux 2.</p></li>
<li><p>[Windows] Dropped support for building with Visual Studio 2017.</p>
<p>Because we could not use windows-2016 image on GitHub Actions.</p>
</li>
</ul>
</div>
<div class="section" id="id4">
<h2>Known Issues<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>Currently, Groonga has a bug that there is possible that data is corrupt when we execute many additions, delete, and update data to vector column.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">*&lt;</span></code> and <code class="docutils literal notranslate"><span class="pre">*&gt;</span></code> only valid when we use <code class="docutils literal notranslate"><span class="pre">query()</span></code> the right side of filter condition.
If we specify as below, <code class="docutils literal notranslate"><span class="pre">*&lt;</span></code> and <code class="docutils literal notranslate"><span class="pre">*&gt;</span></code> work as <code class="docutils literal notranslate"><span class="pre">&amp;&amp;</span></code>.</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'content</span> <span class="pre">&#64;</span> <span class="pre">&quot;Groonga&quot;</span> <span class="pre">*&lt;</span> <span class="pre">content</span> <span class="pre">&#64;</span> <span class="pre">&quot;Mroonga&quot;'</span></code></p></li>
</ul>
</div></blockquote>
</li>
<li><p>Groonga may not return records that should match caused by <code class="docutils literal notranslate"><span class="pre">GRN_II_CURSOR_SET_MIN_ENABLE</span></code>.</p></li>
</ul>
</div>
<div class="section" id="id5">
<h2>Thanks<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>David CARLIER</p></li>
</ul>
</div>
<div class="section" id="release-12-0-1-2022-02-28">
<span id="release-12-0-1"></span><h2>Release 12.0.1 - 2022-02-28<a class="headerlink" href="#release-12-0-1-2022-02-28" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="id6">
<h2>Improvements<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>[<a class="reference internal" href="reference/commands/query_expand.html"><span class="doc">query_expand</span></a>] Added a support for synonym group.</p>
<p>Until now, We had to each defined a keyword and synonyms of the keyword as below when we use the synonym search.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Thesaurus</span> <span class="n">TABLE_PAT_KEY</span> <span class="n">ShortText</span> <span class="o">--</span><span class="n">normalizer</span> <span class="n">NormalizerAuto</span>
<span class="c1"># [[0, 1337566253.89858, 0.000355720520019531], true]</span>
<span class="n">column_create</span> <span class="n">Thesaurus</span> <span class="n">synonym</span> <span class="n">COLUMN_VECTOR</span> <span class="n">ShortText</span>
<span class="c1"># [[0, 1337566253.89858, 0.000355720520019531], true]</span>
<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Thesaurus</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;mroonga&quot;</span><span class="p">,</span> <span class="s2">&quot;synonym&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;mroonga&quot;</span><span class="p">,</span> <span class="s2">&quot;tritonn&quot;</span><span class="p">,</span> <span class="s2">&quot;groonga mysql&quot;</span><span class="p">]},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;groonga&quot;</span><span class="p">,</span> <span class="s2">&quot;synonym&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;groonga&quot;</span><span class="p">,</span> <span class="s2">&quot;senna&quot;</span><span class="p">]}</span>
<span class="p">]</span>
</pre></div>
</div>
<p>In the above case, if we search <code class="docutils literal notranslate"><span class="pre">mroonga</span></code>, Groonga search <code class="docutils literal notranslate"><span class="pre">mroonga</span> <span class="pre">OR</span> <span class="pre">tritonn</span> <span class="pre">OR</span> <span class="pre">&quot;groonga</span> <span class="pre">mysql&quot;</span></code> as we intended.
However, if we search <code class="docutils literal notranslate"><span class="pre">tritonn</span></code>, Groonga search only <code class="docutils literal notranslate"><span class="pre">tritonn</span></code>.
If we want to search <code class="docutils literal notranslate"><span class="pre">tritonn</span> <span class="pre">OR</span> <span class="pre">mroonga</span> <span class="pre">OR</span> <span class="pre">&quot;groonga</span> <span class="pre">mysql&quot;</span></code> even if we search <code class="docutils literal notranslate"><span class="pre">tritonn</span></code>, we need had added a definition as below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Thesaurus</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;tritonn&quot;</span><span class="p">,</span> <span class="s2">&quot;synonym&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;tritonn&quot;</span><span class="p">,</span> <span class="s2">&quot;mroonga&quot;</span><span class="p">,</span> <span class="s2">&quot;groonga mysql&quot;</span><span class="p">]},</span>
<span class="p">]</span>
</pre></div>
</div>
<p>In many cases, if we expand <code class="docutils literal notranslate"><span class="pre">mroonga</span></code> to <code class="docutils literal notranslate"><span class="pre">mroonga</span> <span class="pre">OR</span> <span class="pre">tritonn</span> <span class="pre">OR</span> <span class="pre">&quot;groonga</span> <span class="pre">mysql&quot;</span></code>, we feel we want to expand <code class="docutils literal notranslate"><span class="pre">tritonn</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;groonga</span> <span class="pre">mysql&quot;</span></code> to <code class="docutils literal notranslate"><span class="pre">mroonga</span> <span class="pre">OR</span> <span class="pre">tritonn</span> <span class="pre">OR</span> <span class="pre">&quot;groonga</span> <span class="pre">mysql&quot;</span></code>.
However, until now, we had needed additional definitions in such a case.
Therefore, if target keywords for synonyms are many, we are troublesome to define synonyms.
Because we need to define many similar definitions.</p>
<p>In addition, when we remove synonyms, we are troublesome because we need to execute remove against many records.</p>
<p>We can make a group by deciding on a representative synonym record since this release.
For example, the all following keywords are the “mroonga” group.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Synonyms</span>
<span class="p">[</span>
  <span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;mroonga&quot;</span><span class="p">:</span> <span class="s2">&quot;representative&quot;</span><span class="p">:</span> <span class="s2">&quot;mroonga&quot;</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Synonyms</span>
<span class="p">[</span>
  <span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;tritonn&quot;</span><span class="p">:</span> <span class="s2">&quot;representative&quot;</span><span class="p">:</span> <span class="s2">&quot;mroonga&quot;</span><span class="p">},</span>
  <span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;groonga mysql&quot;</span><span class="p">:</span> <span class="s2">&quot;representative&quot;</span><span class="p">:</span> <span class="s2">&quot;mroonga&quot;</span><span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p>In this case, <code class="docutils literal notranslate"><span class="pre">mroonga</span></code> is expanded to <code class="docutils literal notranslate"><span class="pre">mroonga</span> <span class="pre">OR</span> <span class="pre">tritonn</span> <span class="pre">OR</span> <span class="pre">&quot;groonga</span> <span class="pre">mysql&quot;</span></code>.
In addition, <code class="docutils literal notranslate"><span class="pre">tritonn</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;groonga</span> <span class="pre">mysql&quot;</span></code> are also expanded to <code class="docutils literal notranslate"><span class="pre">mroonga</span> <span class="pre">OR</span> <span class="pre">tritonn</span> <span class="pre">OR</span> <span class="pre">&quot;groonga</span> <span class="pre">mysql&quot;</span></code>.</p>
<p>When we want to remove synonyms, we execute just remove against a target record.
For example, if we want to remove <code class="docutils literal notranslate"><span class="pre">&quot;groonga</span> <span class="pre">mysql&quot;</span></code> from synonyms, we just remove <code class="docutils literal notranslate"><span class="pre">{&quot;_key&quot;:</span> <span class="pre">&quot;groonga</span> <span class="pre">mysql&quot;:</span> <span class="pre">&quot;representative&quot;:</span> <span class="pre">&quot;mroonga&quot;}</span></code>.</p>
</li>
<li><p>[<a class="reference internal" href="reference/commands/query_expand.html"><span class="doc">query_expand</span></a>] Added a support for text vector and index.</p>
<p>We can use text vector in a synonym group as below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">SynonymGroups</span> <span class="n">TABLE_NO_KEY</span>
<span class="p">[[</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">],</span><span class="n">true</span><span class="p">]</span>
<span class="n">column_create</span> <span class="n">SynonymGroups</span> <span class="n">synonyms</span> <span class="n">COLUMN_VECTOR</span> <span class="n">ShortText</span>
<span class="p">[[</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">],</span><span class="n">true</span><span class="p">]</span>
<span class="n">table_create</span> <span class="n">Synonyms</span> <span class="n">TABLE_PAT_KEY</span> <span class="n">ShortText</span>
<span class="p">[[</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">],</span><span class="n">true</span><span class="p">]</span>
<span class="n">column_create</span> <span class="n">Synonyms</span> <span class="n">group</span> <span class="n">COLUMN_INDEX</span> <span class="n">SynonymGroups</span> <span class="n">synonyms</span>
<span class="p">[[</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">],</span><span class="n">true</span><span class="p">]</span>
<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">SynonymGroups</span>
<span class="p">[</span>
<span class="p">[</span><span class="s2">&quot;synonyms&quot;</span><span class="p">],</span>
<span class="p">[[</span><span class="s2">&quot;rroonga&quot;</span><span class="p">,</span> <span class="s2">&quot;Ruby groonga&quot;</span><span class="p">]],</span>
<span class="p">[[</span><span class="s2">&quot;groonga&quot;</span><span class="p">,</span> <span class="s2">&quot;rroonga&quot;</span><span class="p">,</span> <span class="s2">&quot;mroonga&quot;</span><span class="p">]]</span>
<span class="p">]</span>
<span class="p">[[</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">],</span><span class="mi">2</span><span class="p">]</span>
<span class="n">query_expand</span> <span class="n">Synonyms</span><span class="o">.</span><span class="n">group</span> <span class="s2">&quot;rroonga&quot;</span>
<span class="p">[</span>
  <span class="p">[</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mf">0.0</span><span class="p">,</span>
    <span class="mf">0.0</span>
  <span class="p">],</span>
  <span class="s2">&quot;((rroonga) OR (Ruby groonga) OR (groonga) OR (rroonga) OR (mroonga))&quot;</span>
<span class="p">]</span>
</pre></div>
</div>
</li>
<li><p>Added support for disabling a backtrace by the environment variable.</p>
<p>We can disable output a backtrace by using <code class="docutils literal notranslate"><span class="pre">GRN_BACK_TRACE_ENABLE</span></code>.
If we set <code class="docutils literal notranslate"><span class="pre">GRN_BACK_TRACE_ENABLE=no</span></code>, Groonga doesn’t output a backtrace.</p>
<p>Groonga output backtrace to a stack area. Therefore, Groonga may crash because Groonga uses up stack area depending on the OS.
In such cases, we can avoid crashes by using <code class="docutils literal notranslate"><span class="pre">GRN_BACK_TRACE_ENABLE=no</span></code>.</p>
</li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] Improved performance for <code class="docutils literal notranslate"><span class="pre">--slices</span></code>.</p></li>
<li><p>[Windows] Added support for Visual Studio 2022.</p></li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] Added support for specifing max intervals for each elements in near search.</p>
<p>For example, we can specify max intervals for each phrase in a near phrase search.
We make documentation for this feature in the future. Therefore, we will make more details later.</p>
</li>
<li><p>[<a class="reference internal" href="reference/executables/groonga-server-http.html"><span class="doc">Groonga HTTP server</span></a>] We could use <code class="docutils literal notranslate"><span class="pre">groonga-server-http</span></code> even if Groonga of RPM packages.</p></li>
</ul>
<div class="section" id="id7">
<h3>Fixes<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>[Windows] Fixed a crash bug when Groonga output backtrace.</p></li>
</ul>
</div>
</div>
<div class="section" id="id8">
<h2>Known Issues<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>Currently, Groonga has a bug that there is possible that data is corrupt when we execute many additions, delete, and update data to vector column.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">*&lt;</span></code> and <code class="docutils literal notranslate"><span class="pre">*&gt;</span></code> only valid when we use <code class="docutils literal notranslate"><span class="pre">query()</span></code> the right side of filter condition.
If we specify as below, <code class="docutils literal notranslate"><span class="pre">*&lt;</span></code> and <code class="docutils literal notranslate"><span class="pre">*&gt;</span></code> work as <code class="docutils literal notranslate"><span class="pre">&amp;&amp;</span></code>.</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'content</span> <span class="pre">&#64;</span> <span class="pre">&quot;Groonga&quot;</span> <span class="pre">*&lt;</span> <span class="pre">content</span> <span class="pre">&#64;</span> <span class="pre">&quot;Mroonga&quot;'</span></code></p></li>
</ul>
</div></blockquote>
</li>
<li><p>Groonga may not return records that should match caused by <code class="docutils literal notranslate"><span class="pre">GRN_II_CURSOR_SET_MIN_ENABLE</span></code>.</p></li>
</ul>
</div>
<div class="section" id="release-12-0-0-2022-02-09">
<span id="release-12-0-0"></span><h2>Release 12.0.0 - 2022-02-09<a class="headerlink" href="#release-12-0-0-2022-02-09" title="Permalink to this headline">¶</a></h2>
<p>This is a major version up!
But It keeps backward compatibility. We can upgrade to 12.0.0 without rebuilding database.</p>
<p>First of all, we introduce the Summary of changes from Groonga 11.0.0 to 11.1.3.
Then, we introduce the main changes in 12.0.0.</p>
</div>
<div class="section" id="summary-of-changes-from-groonga-11-0-0-to-11-1-3">
<h2>Summary of changes from Groonga 11.0.0 to 11.1.3<a class="headerlink" href="#summary-of-changes-from-groonga-11-0-0-to-11-1-3" title="Permalink to this headline">¶</a></h2>
<div class="section" id="new-features-and-improvements">
<h3>New Features and Improvements<a class="headerlink" href="#new-features-and-improvements" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p>[<a class="reference internal" href="reference/functions/snippet.html"><span class="doc">snippet</span></a>] Added support for using the keyword of 32 or more.</p>
<p>We could not specify the keyword of 32 or more with snippet until now.
However, we can specify the keyword of 32 or more by this improvement.</p>
<p>We don’t specify the keyword of 32 or more with snippet in normal use.
However, if the keyword increments automatically by using such as <code class="docutils literal notranslate"><span class="pre">query_expand</span></code>, the number of target keywords may be 32 or more.</p>
<p>In this case, Groonga occurs an error until now. However, Groonga doesn’t occur an error by this improvement.</p>
<p>See <a class="reference internal" href="#release-11-1-3"><span class="std std-ref">release 11.1.3</span></a> for details.</p>
</li>
<li><p>[<a class="reference internal" href="reference/normalizers/normalizer_nfkc130.html"><span class="doc">NormalizerNFKC130</span></a>] Added a new option <code class="docutils literal notranslate"><span class="pre">remove_symbol</span></code>.</p>
<p>This option removes symbols (e.g. #, !, “, &amp;, %, …) from the string that the target of normalizing.
For example, this option useful when we prevent orthographical variants such as a title of song and name of artist, and a name of store.</p>
<p>See <a class="reference internal" href="#release-11-1-3"><span class="std std-ref">release 11.1.3</span></a> for details.</p>
</li>
<li><p>[<a class="reference internal" href="reference/commands/load.html"><span class="doc">load</span></a>] Added support for ISO 8601 time format.</p>
<p>ISO 8601 format is the format generally.
Therefore <code class="docutils literal notranslate"><span class="pre">load</span></code> becomes easy to use by Groonga support the more standard format.</p>
<p>See <a class="reference internal" href="#release-11-1-0"><span class="std std-ref">release 11.1.0</span></a> for details.</p>
</li>
<li><p>[<a class="reference internal" href="reference/functions/snippet.html"><span class="doc">snippet</span></a>] Added a new option <code class="docutils literal notranslate"><span class="pre">delimiter_regexp</span></code> for detecting snippet delimiter with regular expression.</p>
<p>This feature is useful in that we want to show by the sentence the result of the search.</p>
<p><a class="reference internal" href="reference/functions/snippet.html"><span class="doc">snippet</span></a> extracts text around search keywords.
We call the text that is extracted by <a class="reference internal" href="reference/functions/snippet.html"><span class="doc">snippet</span></a> snippet.</p>
<p>Normally, <a class="reference internal" href="reference/functions/snippet.html"><span class="doc">snippet</span></a> () returns the text of 200 bytes around search keywords.
However, <a class="reference internal" href="reference/functions/snippet.html"><span class="doc">snippet</span></a> () gives no thought to a delimiter of sentences.
The snippet may be composed of multi sentences.</p>
<p><code class="docutils literal notranslate"><span class="pre">delimiter_regexp</span></code> option is useful if we want to only extract the text of the same sentence as search keywords.
For example, we can use <code class="docutils literal notranslate"><span class="pre">\.\s*</span></code> to extract only text in the target sentence.
Note that you need to escape <code class="docutils literal notranslate"><span class="pre">\</span></code> in string.</p>
<p>See <a class="reference internal" href="#release-11-0-9"><span class="std std-ref">release 11.0.9</span></a> for details.</p>
</li>
<li><p>[<a class="reference internal" href="reference/commands/cache_limit.html"><span class="doc">cache_limit</span></a>] Groonga remove query cache when we execute <code class="docutils literal notranslate"><span class="pre">cache_limit</span> <span class="pre">0</span></code>.</p>
<p>Groonga stores query cache to internally table.
The maximum total size of keys of this table is 4GiB. Because this table is hash table.
Therefore, If we execute many huge queries, Groonga may be unable to store query cache, because the maximum total size of keys may be over 4GiB.
In such cases, We can clear the table for query cache by using <code class="docutils literal notranslate"><span class="pre">cache_limit</span> <span class="pre">0</span></code>, and Groonga can store query cache</p>
<p>We needed to restart Groonga to resolve this problem until now.
However, We can resolve this problem if we just execute <code class="docutils literal notranslate"><span class="pre">cache_limit</span> <span class="pre">0</span></code> by this improvement.</p>
<p>See <a class="reference internal" href="#release-11-0-6"><span class="std std-ref">release 11.0.6</span></a> for details.</p>
</li>
<li><p>[<a class="reference internal" href="reference/functions/between.html"><span class="doc">between</span></a>] Added support for optimizing the order of evaluation of a conditional expression.</p>
<p>We can use the optimization of  the order of evaluation of a conditional expression in <code class="docutils literal notranslate"><span class="pre">between()</span></code> by setting <code class="docutils literal notranslate"><span class="pre">GRN_EXPR_OPTIMIZE=yes</span></code>.
This optimization is effective with respect if <code class="docutils literal notranslate"><span class="pre">between()</span></code> narrow down records enough or <code class="docutils literal notranslate"><span class="pre">between()</span></code> can’t narrow down few records.</p>
</li>
<li><p>[<a class="reference internal" href="reference/log.html"><span class="doc">Log</span></a>] Added support for outputting to stdout and stderr.</p>
<p>This feature is useful when we execute Groonga on Docker.
Docker has the feature that records stdout and stderr in standard.
Therefore, we don’t need to login into the environment of Docker to get Groonga’s log.</p>
<p>See <a class="reference internal" href="#release-11-0-4"><span class="std std-ref">release 11.0.4</span></a> for details.</p>
</li>
<li><p>[<a class="reference internal" href="reference/functions/query.html"><span class="doc">query</span></a>] Added support for ignoring <code class="docutils literal notranslate"><span class="pre">TokenFilterStem</span></code> and <code class="docutils literal notranslate"><span class="pre">TokenFilterStopWord</span></code> by the query.</p>
<p>We are able to search without <code class="docutils literal notranslate"><span class="pre">TokenFilterStem</span></code> and <code class="docutils literal notranslate"><span class="pre">TokenFilterStopWord</span></code> in only a specific query.</p>
<p>This feature is useful when we want to search for the same words exactly as a search keyword.
Normally, Groonga gets better results with enable stemming and stopwords excepting.
However, if we want to search words the same as a keyword of search exactly, These features are needless.</p>
<p>Until now, If we want to search words the same as a keyword of search exactly,
We needed to make the index of the exclusive use.
By this improvement, we can search words the same as a keyword of search exactly
without making the index of the exclusive use.</p>
<p>See <a class="reference internal" href="#release-11-0-3"><span class="std std-ref">release 11.0.3</span></a> for details.</p>
</li>
<li><p>[<a class="reference internal" href="reference/functions/string_slice.html"><span class="doc">string_slice</span></a>] Added a new function <code class="docutils literal notranslate"><span class="pre">string_slice()</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">string_slice()</span></code> extracts a substring of a string of search results by position or regular expression.
This function is useful if we want to edit search results.</p>
<p>For example, this feature is useful in that we exclude tags from search results.</p>
</li>
<li><p>[<a class="reference internal" href="reference/functions/query_parallel_or.html"><span class="doc">query_parallel_or</span></a>] Added a new function for processing queries in parallel.</p>
<p><code class="docutils literal notranslate"><span class="pre">query_parallel_or</span></code> is similar to query but <code class="docutils literal notranslate"><span class="pre">query_parallel_or</span></code> processes query that has multiple OR conditions in parallel.
We can increase in speed of the execution of many OR conditions by using this function.</p>
<p>However, <code class="docutils literal notranslate"><span class="pre">query_parallel_or</span></code> alone uses multiple CPUs.
Therefore, queries that are executing at the same time as the query that executes <code class="docutils literal notranslate"><span class="pre">query_parallel_or</span></code> may be slow.</p>
</li>
<li><p>[<a class="reference internal" href="reference/token_filters.html"><span class="doc">Token filters</span></a>] Added support for multiple token filters with options.</p>
<p>We can use multiple token filters with options as the following example.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span><span class="n">token_filters</span> <span class="s1">&#39;TokenFilterStopWord(&quot;column&quot;, &quot;ignore&quot;), TokenFilterNFKC130(&quot;unify_kana&quot;, true)&#39;</span>
</pre></div>
</div>
</li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] Added support for <code class="docutils literal notranslate"><span class="pre">--post_filter</span></code> and <code class="docutils literal notranslate"><span class="pre">--slices[].post_filter</span></code>.</p>
<p>We can filter again after we execute <code class="docutils literal notranslate"><span class="pre">--filter</span></code> by using <code class="docutils literal notranslate"><span class="pre">--post_filter</span></code> and <code class="docutils literal notranslate"><span class="pre">--slices[].post_filter</span></code>.
The difference between <code class="docutils literal notranslate"><span class="pre">--post_filter</span></code> and <code class="docutils literal notranslate"><span class="pre">--slices[].post_filter</span></code> is response format.</p>
<p>The response format of <code class="docutils literal notranslate"><span class="pre">--post_filter</span></code> same as the response of <code class="docutils literal notranslate"><span class="pre">--filter</span></code>.
The response format of <code class="docutils literal notranslate"><span class="pre">--slices[].post_filter</span></code> show the result of before and after <code class="docutils literal notranslate"><span class="pre">--slices[].post_filter</span></code> executed.</p>
<p>Note that if we use <code class="docutils literal notranslate"><span class="pre">--slices[].post_filter</span></code>, the format of the response is different from the normal <code class="docutils literal notranslate"><span class="pre">select</span></code> ‘s response.</p>
</li>
</ul>
</div>
<div class="section" id="id9">
<h3>Fixes<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p>Fixed a bug that the version up of Groonga failed Because the version up of arrow-libs on which Groonga depends.</p>
<p>However, if arrow-libs update a major version, this problem reproduces.
In this case, we will handle that by rebuilding the Groonga package.</p>
<p>This bug only occurs AlmaLinux 8 and CentOS 7.</p>
</li>
<li><p>[Windows] Fixed a resource leak when Groonga fail open a new file caused by out of memory.</p></li>
<li><p>Fixed a bug that Groonga may not have returned a result of a search query if we sent many search queries when tokenizer, normalizer, or token_filters that support options were used.</p></li>
<li><p>Fixed a bug that there is possible that index is corrupt when Groonga executes many additions, delete, and update information in it.</p>
<p>This bug occurs when we only execute many delete information from index.
However, it doesn’t occur when we only execute many additions information into index.</p>
<p>See <a class="reference internal" href="#release-11-0-0"><span class="std std-ref">release 11.0.0</span></a> for details.</p>
</li>
</ul>
</div>
<div class="section" id="newly-supported-oses">
<h3>Newly supported OSes<a class="headerlink" href="#newly-supported-oses" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>[<a class="reference internal" href="install/almalinux.html"><span class="doc">AlmaLinux</span></a>] Added support for AlmaLinux 8.</p></li>
<li><p>[<a class="reference internal" href="install/almalinux.html"><span class="doc">AlmaLinux</span></a>] Added support for AlmaLinux 8 for ARM64.</p></li>
<li><p>[<a class="reference internal" href="install/debian.html"><span class="doc">Debian GNU/Linux</span></a>] Added support for Debian 11 (Bullseye).</p></li>
<li><p>[<a class="reference internal" href="install/debian.html"><span class="doc">Debian GNU/Linux</span></a>] Added support for Debian 11 (Bullseye) for ARM64 and Debian 10 (buster) for ARM64.</p></li>
<li><p>[<a class="reference internal" href="install/ubuntu.html"><span class="doc">Ubuntu</span></a>] Added support for Ubuntu 21.10 (Impish Indri).</p></li>
</ul>
</div>
<div class="section" id="dropped-support-oses">
<h3>Dropped support OSes<a class="headerlink" href="#dropped-support-oses" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>[<a class="reference internal" href="install/centos.html"><span class="doc">CentOS</span></a>] Dropped support for CentOS 8.</p></li>
<li><p>[<a class="reference internal" href="install/ubuntu.html"><span class="doc">Ubuntu</span></a>] Dropped support for Ubuntu 21.04 (Hirsute Hippo).</p></li>
<li><p>[<a class="reference internal" href="install/ubuntu.html"><span class="doc">Ubuntu</span></a>] Dropped support for Ubuntu 20.10 (Groovy Gorilla).</p></li>
<li><p>[<a class="reference internal" href="install/ubuntu.html"><span class="doc">Ubuntu</span></a>] Dropped support for Ubuntu 16.04 LTS (Xenial Xerus).</p></li>
<li><p>[<a class="reference internal" href="install/windows.html"><span class="doc">Windows</span></a>] Dropped support for the following packages of Windows version that we had cross-compiled by using MinGW on Linux.</p>
<ul>
<li><p>groonga-x.x.x-x86.exe</p></li>
<li><p>groonga-x.x.x-x86.zip</p></li>
<li><p>groonga-x.x.x-x64.exe</p></li>
<li><p>groonga-x.x.x-x86.zip</p></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="id10">
<h2>Thanks<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>naoa</p></li>
<li><p>Anthony M. Cook</p></li>
<li><p>MASUDA Kazuhiro</p></li>
<li><p>poti</p></li>
<li><p>Takashi Hashida</p></li>
<li><p>higchi</p></li>
<li><p>wi24rd</p></li>
<li><p>Josep Sanz</p></li>
<li><p>Keitaro YOSHIMURA</p></li>
<li><p>shibanao4870</p></li>
</ul>
<p>The main changes in 12.0.0 are as follows.</p>
</div>
<div class="section" id="id11">
<h2>Improvements<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>[<a class="reference internal" href="reference/functions/sub_filter.html"><span class="doc">sub_filter</span></a>] Added a new option <code class="docutils literal notranslate"><span class="pre">pre_filter_threshold</span></code>.</p>
<p>We can change the value of <code class="docutils literal notranslate"><span class="pre">GRN_SUB_FILTER_PRE_FILTER_THRESHOLD</span></code> by this option.
If the number of records is less than <code class="docutils literal notranslate"><span class="pre">GRN_SUB_FILTER_PRE_FILTER_THRESHOLD</span></code> when Groonga executes <code class="docutils literal notranslate"><span class="pre">sub_filter</span></code>, Groonga execute <code class="docutils literal notranslate"><span class="pre">sub_filter</span></code> against records that have been already narrowed down.</p>
<p>We can use -1 to always use this optimization.</p>
</li>
<li><p>[index_column_have_source_record] Added a new function <code class="docutils literal notranslate"><span class="pre">index_column_have_source_record()</span></code>.</p>
<p>We can confirm whether a token that is existing in the index is included in any of the records that are registered in Groonga or not.</p>
<p>Groonga does not remove a token even if the token become never used from records in Groonga by updating records.
Therefore, for example, when we use the feature of autocomplete, Groonga may return a token that is not included in any of the records as candidates for search words.
However, we can become that we don’t return the needless token by using this function.</p>
<p>Because this function can detect a token that is not included in any of the records.</p>
</li>
<li><p>[<a class="reference internal" href="reference/normalizers/normalizer_nfkc130.html"><span class="doc">NormalizerNFKC130</span></a>] Added a new option <code class="docutils literal notranslate"><span class="pre">strip</span></code></p>
<p>This option removes spaces from the start and the end as below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">normalize</span> \
<span class="s1">&#39;NormalizerNFKC121(&quot;strip&quot;, true, </span><span class="se">\</span>
<span class="s1">                   &quot;report_source_offset&quot;, true)&#39;</span> \
<span class="s2">&quot;  hello world</span><span class="se">\t</span><span class="s2">! </span><span class="se">\t</span><span class="s2"> &quot;</span> \
<span class="n">WITH_CHECKS</span><span class="o">|</span><span class="n">WITH_TYPES</span>
 <span class="p">[</span>
   <span class="p">[</span>
     <span class="mi">0</span><span class="p">,</span>
     <span class="mf">0.0</span><span class="p">,</span>
     <span class="mf">0.0</span>
   <span class="p">],</span>
   <span class="p">{</span>
     <span class="s2">&quot;normalized&quot;</span><span class="p">:</span> <span class="s2">&quot;hello world!&quot;</span><span class="p">,</span>
     <span class="s2">&quot;types&quot;</span><span class="p">:</span> <span class="p">[</span>
       <span class="s2">&quot;alpha&quot;</span><span class="p">,</span>
       <span class="s2">&quot;alpha&quot;</span><span class="p">,</span>
       <span class="s2">&quot;alpha&quot;</span><span class="p">,</span>
       <span class="s2">&quot;alpha&quot;</span><span class="p">,</span>
       <span class="s2">&quot;alpha&quot;</span><span class="p">,</span>
       <span class="s2">&quot;others&quot;</span><span class="p">,</span>
       <span class="s2">&quot;alpha&quot;</span><span class="p">,</span>
       <span class="s2">&quot;alpha&quot;</span><span class="p">,</span>
       <span class="s2">&quot;alpha&quot;</span><span class="p">,</span>
       <span class="s2">&quot;alpha&quot;</span><span class="p">,</span>
       <span class="s2">&quot;alpha|blank&quot;</span><span class="p">,</span>
       <span class="s2">&quot;symbol|blank&quot;</span>
     <span class="p">],</span>
     <span class="s2">&quot;checks&quot;</span><span class="p">:</span> <span class="p">[</span>
       <span class="mi">3</span><span class="p">,</span>
       <span class="mi">1</span><span class="p">,</span>
       <span class="mi">1</span><span class="p">,</span>
       <span class="mi">1</span><span class="p">,</span>
       <span class="mi">1</span><span class="p">,</span>
       <span class="mi">1</span><span class="p">,</span>
       <span class="mi">1</span><span class="p">,</span>
       <span class="mi">1</span><span class="p">,</span>
       <span class="mi">1</span><span class="p">,</span>
       <span class="mi">1</span><span class="p">,</span>
       <span class="mi">1</span><span class="p">,</span>
       <span class="mi">2</span>
     <span class="p">],</span>
     <span class="s2">&quot;offsets&quot;</span><span class="p">:</span> <span class="p">[</span>
       <span class="mi">0</span><span class="p">,</span>
       <span class="mi">3</span><span class="p">,</span>
       <span class="mi">4</span><span class="p">,</span>
       <span class="mi">5</span><span class="p">,</span>
       <span class="mi">6</span><span class="p">,</span>
       <span class="mi">7</span><span class="p">,</span>
       <span class="mi">8</span><span class="p">,</span>
       <span class="mi">9</span><span class="p">,</span>
       <span class="mi">10</span><span class="p">,</span>
       <span class="mi">11</span><span class="p">,</span>
       <span class="mi">12</span><span class="p">,</span>
       <span class="mi">14</span>
     <span class="p">]</span>
   <span class="p">}</span>
 <span class="p">]</span>
</pre></div>
</div>
</li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] Added new arguments <code class="docutils literal notranslate"><span class="pre">drilldown_max_n_target_records</span></code> and <code class="docutils literal notranslate"><span class="pre">drilldown[${LABEL}].max_n_target_records</span></code>.</p>
<p>We can specify the max number of records of the drilldown target table (filtered result) to use drilldown.
If the number of filtered result is larger than the specified value, some records in filtered result aren’t used for drilldown.
The default value of this arguments are <code class="docutils literal notranslate"><span class="pre">-1</span></code>.
If these arguments are set <code class="docutils literal notranslate"><span class="pre">-1</span></code>, Groonga uses all records for drilldown.</p>
<p>This argument is useful when filtered result may be very large.
Because a drilldown against large filtered result may be slow.
We can limit the max number of records to be used for drilldown by this feature.</p>
<p>Here is an example to limit the max number of records to be used for drilldown.
The last 2 records, <code class="docutils literal notranslate"><span class="pre">{\&quot;_id\&quot;:</span> <span class="pre">4,</span> <span class="pre">\&quot;tag\&quot;:</span> <span class="pre">\&quot;Senna\&quot;}</span></code> and <code class="docutils literal notranslate"><span class="pre">{\&quot;_id\&quot;:</span> <span class="pre">5,</span> <span class="pre">\&quot;tag\&quot;:</span> <span class="pre">\&quot;Senna\&quot;}</span></code>, aren’t used.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Entries</span> <span class="n">TABLE_HASH_KEY</span> <span class="n">ShortText</span>
<span class="n">column_create</span> <span class="n">Entries</span> <span class="n">content</span> <span class="n">COLUMN_SCALAR</span> <span class="n">Text</span>
<span class="n">column_create</span> <span class="n">Entries</span> <span class="n">n_likes</span> <span class="n">COLUMN_SCALAR</span> <span class="n">UInt32</span>
<span class="n">column_create</span> <span class="n">Entries</span> <span class="n">tag</span> <span class="n">COLUMN_SCALAR</span> <span class="n">ShortText</span>

<span class="n">table_create</span> <span class="n">Terms</span> <span class="n">TABLE_PAT_KEY</span> <span class="n">ShortText</span> <span class="o">--</span><span class="n">default_tokenizer</span> <span class="n">TokenBigram</span> <span class="o">--</span><span class="n">normalizer</span> <span class="n">NormalizerAuto</span>
<span class="n">column_create</span> <span class="n">Terms</span> <span class="n">entries_key_index</span> <span class="n">COLUMN_INDEX</span><span class="o">|</span><span class="n">WITH_POSITION</span> <span class="n">Entries</span> <span class="n">_key</span>
<span class="n">column_create</span> <span class="n">Terms</span> <span class="n">entries_content_index</span> <span class="n">COLUMN_INDEX</span><span class="o">|</span><span class="n">WITH_POSITION</span> <span class="n">Entries</span> <span class="n">content</span>
<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Entries</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span>    <span class="s2">&quot;The first post!&quot;</span><span class="p">,</span>
 <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;Welcome! This is my first post!&quot;</span><span class="p">,</span>
 <span class="s2">&quot;n_likes&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
 <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="s2">&quot;Hello&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span>    <span class="s2">&quot;Groonga&quot;</span><span class="p">,</span>
 <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;I started to use Groonga. It&#39;s very fast!&quot;</span><span class="p">,</span>
 <span class="s2">&quot;n_likes&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
 <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="s2">&quot;Groonga&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span>    <span class="s2">&quot;Mroonga&quot;</span><span class="p">,</span>
 <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;I also started to use Mroonga. It&#39;s also very fast! Really fast!&quot;</span><span class="p">,</span>
 <span class="s2">&quot;n_likes&quot;</span><span class="p">:</span> <span class="mi">15</span><span class="p">,</span>
 <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="s2">&quot;Groonga&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span>    <span class="s2">&quot;Good-bye Senna&quot;</span><span class="p">,</span>
 <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;I migrated all Senna system!&quot;</span><span class="p">,</span>
 <span class="s2">&quot;n_likes&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
 <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="s2">&quot;Senna&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span>    <span class="s2">&quot;Good-bye Tritonn&quot;</span><span class="p">,</span>
 <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;I also migrated all Tritonn system!&quot;</span><span class="p">,</span>
 <span class="s2">&quot;n_likes&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
 <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="s2">&quot;Senna&quot;</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">select</span> <span class="n">Entries</span> \
  <span class="o">--</span><span class="n">limit</span> <span class="o">-</span><span class="mi">1</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="n">_id</span><span class="p">,</span><span class="n">tag</span> \
  <span class="o">--</span><span class="n">drilldown</span> <span class="n">tag</span> \
  <span class="o">--</span><span class="n">drilldown_max_n_target_records</span> <span class="mi">3</span>
<span class="p">[</span>
  <span class="p">[</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mf">1337566253.89858</span><span class="p">,</span>
    <span class="mf">0.000355720520019531</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="p">[</span>
      <span class="p">[</span>
        <span class="mi">5</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="p">[</span>
          <span class="s2">&quot;_id&quot;</span><span class="p">,</span>
          <span class="s2">&quot;UInt32&quot;</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;tag&quot;</span><span class="p">,</span>
          <span class="s2">&quot;ShortText&quot;</span>
        <span class="p">]</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;Hello&quot;</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">2</span><span class="p">,</span>
        <span class="s2">&quot;Groonga&quot;</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">3</span><span class="p">,</span>
        <span class="s2">&quot;Groonga&quot;</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">4</span><span class="p">,</span>
        <span class="s2">&quot;Senna&quot;</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">5</span><span class="p">,</span>
        <span class="s2">&quot;Senna&quot;</span>
      <span class="p">]</span>
    <span class="p">],</span>
    <span class="p">[</span>
      <span class="p">[</span>
        <span class="mi">2</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="p">[</span>
          <span class="s2">&quot;_key&quot;</span><span class="p">,</span>
          <span class="s2">&quot;ShortText&quot;</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;_nsubrecs&quot;</span><span class="p">,</span>
          <span class="s2">&quot;Int32&quot;</span>
        <span class="p">]</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="s2">&quot;Hello&quot;</span><span class="p">,</span>
        <span class="mi">1</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="s2">&quot;Groonga&quot;</span><span class="p">,</span>
        <span class="mi">2</span>
      <span class="p">]</span>
    <span class="p">]</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
</li>
<li><p>[httpd] Updated bundled nginx to 1.21.6.</p></li>
</ul>
</div>
<div class="section" id="release-11-1-3-2022-01-29">
<span id="release-11-1-3"></span><h2>Release 11.1.3 - 2022-01-29<a class="headerlink" href="#release-11-1-3-2022-01-29" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="id12">
<h2>Improvements<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>[<a class="reference internal" href="reference/functions/snippet.html"><span class="doc">snippet</span></a>] Added support for using the keyword of 32 or more. [GitHub#1313][Pathched by Takashi Hashida]</p>
<p>We could not specify the keyword of 32 or more with <code class="docutils literal notranslate"><span class="pre">snippet</span></code> until now.
However, we can specify the keyword of 32 or more by this improvement as below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Entries</span> <span class="n">TABLE_NO_KEY</span>
<span class="n">column_create</span> <span class="n">Entries</span> <span class="n">content</span> <span class="n">COLUMN_SCALAR</span> <span class="n">ShortText</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Entries</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;Groonga is a fast and accurate full text search engine based on inverted index. One of the characteristics of Groonga is that a newly registered document instantly appears in search results. Also, Groonga allows updates without read locks. These characteristics result in superior performance on real-time applications.</span><span class="se">\n</span><span class="s2">Groonga is also a column-oriented database management system (DBMS). Compared with well-known row-oriented systems, such as MySQL and PostgreSQL, column-oriented systems are more suited for aggregate queries. Due to this advantage, Groonga can cover weakness of row-oriented systems.</span><span class="se">\n</span><span class="s2">The basic functions of Groonga are provided in a C library. Also, libraries for using Groonga in other languages, such as Ruby, are provided by related projects. In addition, groonga-based storage engines are provided for MySQL and PostgreSQL. These libraries and storage engines allow any application to use Groonga. See usage examples.&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;In widely used DBMSs, updates are immediately processed, for example, a newly registered record appears in the result of the next query. In contrast, some full text search engines do not support instant updates, because it is difficult to dynamically update inverted indexes, the underlying data structure.</span><span class="se">\n</span><span class="s2">Groonga also uses inverted indexes but supports instant updates. In addition, Groonga allows you to search documents even when updating the document collection. Due to these superior characteristics, Groonga is very flexible as a full text search engine. Also, Groonga always shows good performance because it divides a large task, inverted index merging, into smaller tasks.&quot;</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">select</span> <span class="n">Entries</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="s1">&#39; </span><span class="se">\</span>
<span class="s1">  snippet(content, </span><span class="se">\</span>
<span class="s1">  &quot;groonga&quot;, &quot;inverted&quot;, &quot;index&quot;, &quot;fast&quot;, &quot;full&quot;, &quot;text&quot;, &quot;search&quot;, &quot;engine&quot;, &quot;registered&quot;, &quot;document&quot;, </span><span class="se">\</span>
<span class="s1">  &quot;results&quot;, &quot;appears&quot;, &quot;also&quot;, &quot;system&quot;, &quot;libraries&quot;, &quot;for&quot;, &quot;mysql&quot;, &quot;postgresql&quot;, &quot;column-oriented&quot;, &quot;dbms&quot;, </span><span class="se">\</span>
<span class="s1">  &quot;basic&quot;, &quot;ruby&quot;, &quot;projects&quot;, &quot;storage&quot;, &quot;allow&quot;, &quot;application&quot;, &quot;usage&quot;, &quot;sql&quot;, &quot;well-known&quot;, &quot;real-time&quot;, </span><span class="se">\</span>
<span class="s1">  &quot;weakness&quot;, &quot;merging&quot;, &quot;performance&quot;, &quot;superior&quot;, &quot;large&quot;, &quot;dynamically&quot;, &quot;difficult&quot;, &quot;query&quot;, &quot;examples&quot;, &quot;divides&quot;, </span><span class="se">\</span>
<span class="s1">  { </span><span class="se">\</span>
<span class="s1">    &quot;default_open_tag&quot;: &quot;[&quot;, </span><span class="se">\</span>
<span class="s1">    &quot;default_close_tag&quot;: &quot;]&quot;, </span><span class="se">\</span>
<span class="s1">    &quot;width&quot; : 2048 </span><span class="se">\</span>
<span class="s1">  })&#39;</span>
<span class="p">[</span>
  <span class="p">[</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mf">1643165838.691991</span><span class="p">,</span>
    <span class="mf">0.0003311634063720703</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="p">[</span>
      <span class="p">[</span>
        <span class="mi">2</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="p">[</span>
          <span class="s2">&quot;snippet&quot;</span><span class="p">,</span>
          <span class="n">null</span>
        <span class="p">]</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="p">[</span>
          <span class="s2">&quot;[Groonga] is a [fast] and accurate [full] [text] [search] [engine] based on [inverted] [index]. One of the characteristics of [Groonga] is that a newly [registered] [document] instantly [appears] in [search] [results]. [Also], [Groonga] [allow]s updates without read locks. These characteristics result in [superior] [performance] on [real-time] [application]s.</span><span class="se">\n</span><span class="s2">[Groonga] is [also] a [column-oriented] database management [system] ([DBMS]). Compared with [well-known] row-oriented [system]s, such as [MySQL] and [PostgreSQL], [column-oriented] [system]s are more suited [for] aggregate queries. Due to this advantage, [Groonga] can cover [weakness] of row-oriented [system]s.</span><span class="se">\n</span><span class="s2">The [basic] functions of [Groonga] are provided in a C library. [Also], [libraries] [for] using [Groonga] in other languages, such as [Ruby], are provided by related [projects]. In addition, [groonga]-based [storage] [engine]s are provided [for] [MySQL] and [PostgreSQL]. These [libraries] and [storage] [engine]s [allow] any [application] to use [Groonga]. See [usage] [examples].&quot;</span>
        <span class="p">]</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="p">[</span>
          <span class="s2">&quot;In widely used [DBMS]s, updates are immediately processed, [for] example, a newly [registered] record [appears] in the result of the next [query]. In contrast, some [full] [text] [search] [engine]s do not support instant updates, because it is [difficult] to [dynamically] update [inverted] [index]es, the underlying data structure.</span><span class="se">\n</span><span class="s2">[Groonga] [also] uses [inverted] [index]es but supports instant updates. In addition, [Groonga] [allow]s you to [search] [document]s even when updating the [document] collection. Due to these [superior] characteristics, [Groonga] is very flexible as a [full] [text] [search] [engine]. [Also], [Groonga] always shows good [performance] because it [divides] a [large] task, [inverted] [index] [merging], into smaller tasks.&quot;</span>
        <span class="p">]</span>
      <span class="p">]</span>
    <span class="p">]</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
</li>
<li><p>[<a class="reference internal" href="reference/normalizers/normalizer_nfkc130.html"><span class="doc">NormalizerNFKC130</span></a>] Added a new option <code class="docutils literal notranslate"><span class="pre">remove_symbol</span></code>.</p>
<p>This option removes symbols (e.g. #, !, “, &amp;, %, …) from the string that the target of normalizing as below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">normalize</span>   <span class="s1">&#39;NormalizerNFKC130(&quot;remove_symbol&quot;, true)&#39;</span>   <span class="s2">&quot;#This &amp; is </span><span class="si">%%</span><span class="s2"> a pen.&quot;</span>   <span class="n">WITH_TYPES</span>
<span class="p">[</span>
  <span class="p">[</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mf">1643595008.729597</span><span class="p">,</span>
    <span class="mf">0.0005540847778320312</span>
  <span class="p">],</span>
  <span class="p">{</span>
    <span class="s2">&quot;normalized&quot;</span><span class="p">:</span> <span class="s2">&quot;this  is  a pen&quot;</span><span class="p">,</span>
    <span class="s2">&quot;types&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="s2">&quot;alpha&quot;</span><span class="p">,</span>
      <span class="s2">&quot;alpha&quot;</span><span class="p">,</span>
      <span class="s2">&quot;alpha&quot;</span><span class="p">,</span>
      <span class="s2">&quot;alpha&quot;</span><span class="p">,</span>
      <span class="s2">&quot;others&quot;</span><span class="p">,</span>
      <span class="s2">&quot;others&quot;</span><span class="p">,</span>
      <span class="s2">&quot;alpha&quot;</span><span class="p">,</span>
      <span class="s2">&quot;alpha&quot;</span><span class="p">,</span>
      <span class="s2">&quot;others&quot;</span><span class="p">,</span>
      <span class="s2">&quot;others&quot;</span><span class="p">,</span>
      <span class="s2">&quot;alpha&quot;</span><span class="p">,</span>
      <span class="s2">&quot;others&quot;</span><span class="p">,</span>
      <span class="s2">&quot;alpha&quot;</span><span class="p">,</span>
      <span class="s2">&quot;alpha&quot;</span><span class="p">,</span>
      <span class="s2">&quot;alpha&quot;</span>
    <span class="p">],</span>
    <span class="s2">&quot;checks&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</li>
<li><p>[<a class="reference internal" href="install/almalinux.html"><span class="doc">AlmaLinux</span></a>] Added support for AlmaLinux 8 on ARM64.</p></li>
<li><p>[httpd] Updated bundled nginx to 1.21.5.</p></li>
<li><p>[Documentation] Fixed a typo in <a class="reference internal" href="reference/commands/ruby_eval.html"><span class="doc">ruby_eval</span></a>. [GitHub#1317][Pathched by wi24rd]</p></li>
<li><p>[<a class="reference internal" href="install/ubuntu.html"><span class="doc">Ubuntu</span></a>] Dropped Ubuntu 21.04 (Hirsute Hippo) support.</p>
<ul class="simple">
<li><p>Because Ubuntu 21.04 reached EOL January 20, 2022.</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id13">
<h2>Fixes<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>[<a class="reference internal" href="reference/commands/load.html"><span class="doc">load</span></a>] Fixed a crash bug when we load data with specifying a nonexistent column.</p>
<p>This bug only occurs when we specify <code class="docutils literal notranslate"><span class="pre">apache-arrow</span></code> into <code class="docutils literal notranslate"><span class="pre">input_type</span></code> as the argument of <code class="docutils literal notranslate"><span class="pre">load</span></code>.</p>
</li>
<li><p>Fixed a bug that the version up of Groonga failed Because the version up of arrow-libs on which Groonga depends. [groonga-talk,540][Reported by Josep Sanz][Gitter,61eaaa306d9ba23328d23ce1][Reported by shibanao4870][GitHub#1316][Reported by Keitaro YOSHIMURA]</p>
<p>However, if arrow-libs update a major version, this problem reproduces.
In this case, we will handle that by rebuilding the Groonga package.</p>
</li>
</ul>
</div>
<div class="section" id="id14">
<h2>Known Issues<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>Currently, Groonga has a bug that there is possible that data is corrupt when we execute many additions, delete, and update data to vector column.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">*&lt;</span></code> and <code class="docutils literal notranslate"><span class="pre">*&gt;</span></code> only valid when we use <code class="docutils literal notranslate"><span class="pre">query()</span></code> the right side of filter condition.
If we specify as below, <code class="docutils literal notranslate"><span class="pre">*&lt;</span></code> and <code class="docutils literal notranslate"><span class="pre">*&gt;</span></code> work as <code class="docutils literal notranslate"><span class="pre">&amp;&amp;</span></code>.</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'content</span> <span class="pre">&#64;</span> <span class="pre">&quot;Groonga&quot;</span> <span class="pre">*&lt;</span> <span class="pre">content</span> <span class="pre">&#64;</span> <span class="pre">&quot;Mroonga&quot;'</span></code></p></li>
</ul>
</div></blockquote>
</li>
<li><p>Groonga may not return records that should match caused by <code class="docutils literal notranslate"><span class="pre">GRN_II_CURSOR_SET_MIN_ENABLE</span></code>.</p></li>
</ul>
</div>
<div class="section" id="id15">
<h2>Thanks<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Takashi Hashida</p></li>
<li><p>wi24rd</p></li>
<li><p>Josep Sanz</p></li>
<li><p>Keitaro YOSHIMURA</p></li>
<li><p>shibanao4870</p></li>
</ul>
</div>
<div class="section" id="release-11-1-1-2021-12-29">
<span id="release-11-1-1"></span><h2>Release 11.1.1 - 2021-12-29<a class="headerlink" href="#release-11-1-1-2021-12-29" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="id16">
<h2>Improvements<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] Added support for near phrase product search.</p>
<p>This feature is a shortcut of <code class="docutils literal notranslate"><span class="pre">'*NP&quot;...&quot;</span> <span class="pre">OR</span> <span class="pre">*NP&quot;...&quot;</span> <span class="pre">OR</span> <span class="pre">...'</span></code>.
For example, we can use <code class="docutils literal notranslate"><span class="pre">*NPP</span></code> instead of the expression that execute mulitiple
<code class="docutils literal notranslate"><span class="pre">*NP</span></code> with <code class="docutils literal notranslate"><span class="pre">query</span></code> as below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">query</span> <span class="p">(</span><span class="s2">&quot;title * 10 || content&quot;</span><span class="p">,</span>
       <span class="s2">&quot;*NP&quot;</span><span class="n">a</span> <span class="mi">1</span> <span class="n">x</span><span class="s2">&quot; OR</span>
        <span class="o">*</span><span class="n">NP</span><span class="s2">&quot;a 1 y&quot;</span> <span class="n">OR</span>
        <span class="o">*</span><span class="n">NP</span><span class="s2">&quot;a 1 z&quot;</span> <span class="n">OR</span>
        <span class="o">*</span><span class="n">NP</span><span class="s2">&quot;a 2 x&quot;</span> <span class="n">OR</span>
        <span class="o">*</span><span class="n">NP</span><span class="s2">&quot;a 2 y&quot;</span> <span class="n">OR</span>
        <span class="o">*</span><span class="n">NP</span><span class="s2">&quot;a 2 z&quot;</span> <span class="n">OR</span>
        <span class="o">*</span><span class="n">NP</span><span class="s2">&quot;a 3 x&quot;</span> <span class="n">OR</span>
        <span class="o">*</span><span class="n">NP</span><span class="s2">&quot;a 3 y&quot;</span> <span class="n">OR</span>
        <span class="o">*</span><span class="n">NP</span><span class="s2">&quot;a 3 z&quot;</span> <span class="n">OR</span>
        <span class="o">*</span><span class="n">NP</span><span class="s2">&quot;b 1 x&quot;</span> <span class="n">OR</span>
        <span class="o">*</span><span class="n">NP</span><span class="s2">&quot;b 1 y&quot;</span> <span class="n">OR</span>
        <span class="o">*</span><span class="n">NP</span><span class="s2">&quot;b 1 z&quot;</span> <span class="n">OR</span>
        <span class="o">*</span><span class="n">NP</span><span class="s2">&quot;b 2 x&quot;</span> <span class="n">OR</span>
        <span class="o">*</span><span class="n">NP</span><span class="s2">&quot;b 2 y&quot;</span> <span class="n">OR</span>
        <span class="o">*</span><span class="n">NP</span><span class="s2">&quot;b 2 z&quot;</span> <span class="n">OR</span>
        <span class="o">*</span><span class="n">NP</span><span class="s2">&quot;b 3 x&quot;</span> <span class="n">OR</span>
        <span class="o">*</span><span class="n">NP</span><span class="s2">&quot;b 3 y&quot;</span> <span class="n">OR</span>
        <span class="o">*</span><span class="n">NP</span><span class="s2">&quot;b 3 z&quot;&quot;)</span>
</pre></div>
</div>
<p>We can be written as <code class="docutils literal notranslate"><span class="pre">*NPP&quot;(a</span> <span class="pre">b)</span> <span class="pre">(1</span> <span class="pre">2</span> <span class="pre">3)</span> <span class="pre">(x</span> <span class="pre">y</span> <span class="pre">z)&quot;</span></code> the above expression by this feature.
In addition, <code class="docutils literal notranslate"><span class="pre">*NPP&quot;(a</span> <span class="pre">b)</span> <span class="pre">(1</span> <span class="pre">2</span> <span class="pre">3)</span> <span class="pre">(x</span> <span class="pre">y</span> <span class="pre">z)&quot;</span></code> is faster than <code class="docutils literal notranslate"><span class="pre">'*NP&quot;...&quot;</span> <span class="pre">OR</span> <span class="pre">*NP&quot;...&quot;</span> <span class="pre">OR</span> <span class="pre">...'</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">query</span> <span class="p">(</span><span class="s2">&quot;title * 10 || content&quot;</span><span class="p">,</span>
       <span class="s2">&quot;*NPP&quot;</span><span class="p">(</span><span class="n">a</span> <span class="n">b</span><span class="p">)</span> <span class="p">(</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)</span> <span class="p">(</span><span class="n">x</span> <span class="n">y</span> <span class="n">z</span><span class="p">)</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>We implements this feature for improving performance near phrase search
like <code class="docutils literal notranslate"><span class="pre">'*NP&quot;...&quot;</span> <span class="pre">OR</span> <span class="pre">*NP&quot;...&quot;</span> <span class="pre">OR</span> <span class="pre">...'</span></code>.</p>
</li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] Added support for order near phrase product search.</p>
<p>This feature is a shortcut of <code class="docutils literal notranslate"><span class="pre">'*ONP&quot;...&quot;</span> <span class="pre">OR</span> <span class="pre">*ONP&quot;...&quot;</span> <span class="pre">OR</span> <span class="pre">...'</span></code>.
For example, we can use <code class="docutils literal notranslate"><span class="pre">*ONPP</span></code> instead of the expression that execute multiple
<code class="docutils literal notranslate"><span class="pre">*ONP</span></code> with <code class="docutils literal notranslate"><span class="pre">query</span></code> as below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">query</span> <span class="p">(</span><span class="s2">&quot;title * 10 || content&quot;</span><span class="p">,</span>
       <span class="s2">&quot;*ONP&quot;</span><span class="n">a</span> <span class="mi">1</span> <span class="n">x</span><span class="s2">&quot; OR</span>
        <span class="o">*</span><span class="n">ONP</span><span class="s2">&quot;a 1 y&quot;</span> <span class="n">OR</span>
        <span class="o">*</span><span class="n">ONP</span><span class="s2">&quot;a 1 z&quot;</span> <span class="n">OR</span>
        <span class="o">*</span><span class="n">ONP</span><span class="s2">&quot;a 2 x&quot;</span> <span class="n">OR</span>
        <span class="o">*</span><span class="n">ONP</span><span class="s2">&quot;a 2 y&quot;</span> <span class="n">OR</span>
        <span class="o">*</span><span class="n">ONP</span><span class="s2">&quot;a 2 z&quot;</span> <span class="n">OR</span>
        <span class="o">*</span><span class="n">ONP</span><span class="s2">&quot;a 3 x&quot;</span> <span class="n">OR</span>
        <span class="o">*</span><span class="n">ONP</span><span class="s2">&quot;a 3 y&quot;</span> <span class="n">OR</span>
        <span class="o">*</span><span class="n">ONP</span><span class="s2">&quot;a 3 z&quot;</span> <span class="n">OR</span>
        <span class="o">*</span><span class="n">ONP</span><span class="s2">&quot;b 1 x&quot;</span> <span class="n">OR</span>
        <span class="o">*</span><span class="n">ONP</span><span class="s2">&quot;b 1 y&quot;</span> <span class="n">OR</span>
        <span class="o">*</span><span class="n">ONP</span><span class="s2">&quot;b 1 z&quot;</span> <span class="n">OR</span>
        <span class="o">*</span><span class="n">ONP</span><span class="s2">&quot;b 2 x&quot;</span> <span class="n">OR</span>
        <span class="o">*</span><span class="n">ONP</span><span class="s2">&quot;b 2 y&quot;</span> <span class="n">OR</span>
        <span class="o">*</span><span class="n">ONP</span><span class="s2">&quot;b 2 z&quot;</span> <span class="n">OR</span>
        <span class="o">*</span><span class="n">ONP</span><span class="s2">&quot;b 3 x&quot;</span> <span class="n">OR</span>
        <span class="o">*</span><span class="n">ONP</span><span class="s2">&quot;b 3 y&quot;</span> <span class="n">OR</span>
        <span class="o">*</span><span class="n">ONP</span><span class="s2">&quot;b 3 z&quot;&quot;)</span>
</pre></div>
</div>
<p>We can be written as <code class="docutils literal notranslate"><span class="pre">*ONPP&quot;(a</span> <span class="pre">b)</span> <span class="pre">(1</span> <span class="pre">2</span> <span class="pre">3)</span> <span class="pre">(x</span> <span class="pre">y</span> <span class="pre">z)&quot;</span></code> the above expression by this feature.
In addition, <code class="docutils literal notranslate"><span class="pre">*ONPP&quot;(a</span> <span class="pre">b)</span> <span class="pre">(1</span> <span class="pre">2</span> <span class="pre">3)</span> <span class="pre">(x</span> <span class="pre">y</span> <span class="pre">z)&quot;</span></code> is faster than <code class="docutils literal notranslate"><span class="pre">'*ONP&quot;...&quot;</span> <span class="pre">OR</span> <span class="pre">*ONP&quot;...&quot;</span> <span class="pre">OR</span> <span class="pre">...'</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">query</span> <span class="p">(</span><span class="s2">&quot;title * 10 || content&quot;</span><span class="p">,</span>
       <span class="s2">&quot;*ONPP&quot;</span><span class="p">(</span><span class="n">a</span> <span class="n">b</span><span class="p">)</span> <span class="p">(</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)</span> <span class="p">(</span><span class="n">x</span> <span class="n">y</span> <span class="n">z</span><span class="p">)</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>We implements this feature for improving performance near phrase search
like <code class="docutils literal notranslate"><span class="pre">'*ONP&quot;...&quot;</span> <span class="pre">OR</span> <span class="pre">*ONP&quot;...&quot;</span> <span class="pre">OR</span> <span class="pre">...'</span></code>.</p>
</li>
<li><p>[<a class="reference internal" href="reference/commands/request_cancel.html"><span class="doc">request_cancel</span></a>] Groonga became easily detects <code class="docutils literal notranslate"><span class="pre">request_cancel</span></code> while executing a search.</p>
<p>Because we added more checks of return code to detect <code class="docutils literal notranslate"><span class="pre">request_cancel</span></code>.</p>
</li>
<li><p>[<a class="reference internal" href="reference/commands/thread_dump.html"><span class="doc">thread_dump</span></a>] Added a new command <code class="docutils literal notranslate"><span class="pre">thread_dump</span></code></p>
<p>Currently, this command works only on Windows.</p>
<p>We can put a backtrace of all threads into a log as logs of NOTICE level
at the time of running this command.</p>
<p>This feature is useful when we solve a problem such as Groonga doesn’t return a response.</p>
</li>
<li><p>[<a class="reference internal" href="install/centos.html"><span class="doc">CentOS</span></a>] Dropped support for CentOS 8.</p>
<p>Because CentOS 8 will reach EOL at 2021-12-31.</p>
</li>
</ul>
</div>
<div class="section" id="id17">
<h2>Fixes<a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>Fixed a bug that we can’t remove a index column with invalid parameter. [GitHub#1301][Patched by Takashi Hashida]</p>
<ul>
<li><p>For example, we can’t remove a table when we create an invalid index column with <code class="docutils literal notranslate"><span class="pre">column_create</span></code> as below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Statuses</span> <span class="n">TABLE_NO_KEY</span>
<span class="n">column_create</span> <span class="n">Statuses</span> <span class="n">start_time</span> <span class="n">COLUMN_SCALAR</span> <span class="n">UInt16</span>
<span class="n">column_create</span> <span class="n">Statuses</span> <span class="n">end_time</span> <span class="n">COLUMN_SCALAR</span> <span class="n">UInt16</span>

<span class="n">table_create</span> <span class="n">Times</span> <span class="n">TABLE_PAT_KEY</span> <span class="n">UInt16</span>
<span class="n">column_create</span> <span class="n">Times</span> <span class="n">statuses</span> <span class="n">COLUMN_INDEX</span> <span class="n">Statuses</span> <span class="n">start_time</span><span class="p">,</span><span class="n">end_time</span>
<span class="p">[</span>
  <span class="p">[</span>
    <span class="o">-</span><span class="mi">22</span><span class="p">,</span>
    <span class="mf">1639037503.16114</span><span class="p">,</span>
    <span class="mf">0.003981828689575195</span><span class="p">,</span>
    <span class="s2">&quot;grn_obj_set_info(): GRN_INFO_SOURCE: multi column index must be created with WITH_SECTION flag: &lt;Times.statuses&gt;&quot;</span><span class="p">,</span>
    <span class="p">[</span>
      <span class="p">[</span>
        <span class="s2">&quot;grn_obj_set_info_source_validate&quot;</span><span class="p">,</span>
        <span class="s2">&quot;../../groonga/lib/db.c&quot;</span><span class="p">,</span>
        <span class="mi">9605</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="s2">&quot;/tmp/d.grn&quot;</span><span class="p">,</span>
        <span class="mi">6</span><span class="p">,</span>
        <span class="s2">&quot;column_create Times statuses COLUMN_INDEX Statuses start_time,end_time&quot;</span>
      <span class="p">]</span>
    <span class="p">]</span>
  <span class="p">],</span>
  <span class="n">false</span>
<span class="p">]</span>
<span class="n">table_remove</span> <span class="n">Times</span>
<span class="p">[</span>
  <span class="p">[</span>
    <span class="o">-</span><span class="mi">22</span><span class="p">,</span>
    <span class="mf">1639037503.16515</span><span class="p">,</span>
    <span class="mf">0.0005414485931396484</span><span class="p">,</span>
    <span class="s2">&quot;[object][remove] column is broken: &lt;Times.statuses&gt;&quot;</span><span class="p">,</span>
    <span class="p">[</span>
      <span class="p">[</span>
        <span class="s2">&quot;remove_columns&quot;</span><span class="p">,</span>
        <span class="s2">&quot;../../groonga/lib/db.c&quot;</span><span class="p">,</span>
        <span class="mi">10649</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="s2">&quot;/tmp/d.grn&quot;</span><span class="p">,</span>
        <span class="mi">8</span><span class="p">,</span>
        <span class="s2">&quot;table_remove Times&quot;</span>
      <span class="p">]</span>
    <span class="p">]</span>
  <span class="p">],</span>
  <span class="n">false</span>
<span class="p">]</span>
</pre></div>
</div>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id18">
<h2>Known Issues<a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>Currently, Groonga has a bug that there is possible that data is corrupt when we execute many additions, delete, and update data to vector column.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">*&lt;</span></code> and <code class="docutils literal notranslate"><span class="pre">*&gt;</span></code> only valid when we use <code class="docutils literal notranslate"><span class="pre">query()</span></code> the right side of filter condition.
If we specify as below, <code class="docutils literal notranslate"><span class="pre">*&lt;</span></code> and <code class="docutils literal notranslate"><span class="pre">*&gt;</span></code> work as <code class="docutils literal notranslate"><span class="pre">&amp;&amp;</span></code>.</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'content</span> <span class="pre">&#64;</span> <span class="pre">&quot;Groonga&quot;</span> <span class="pre">*&lt;</span> <span class="pre">content</span> <span class="pre">&#64;</span> <span class="pre">&quot;Mroonga&quot;'</span></code></p></li>
</ul>
</div></blockquote>
</li>
<li><p>Groonga may not return records that should match caused by <code class="docutils literal notranslate"><span class="pre">GRN_II_CURSOR_SET_MIN_ENABLE</span></code>.</p></li>
</ul>
</div>
<div class="section" id="id19">
<h2>Thanks<a class="headerlink" href="#id19" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Takashi Hashida</p></li>
</ul>
</div>
<div class="section" id="release-11-1-0-2021-11-29">
<span id="release-11-1-0"></span><h2>Release 11.1.0 - 2021-11-29<a class="headerlink" href="#release-11-1-0-2021-11-29" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="id20">
<h2>Improvements<a class="headerlink" href="#id20" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>[<a class="reference internal" href="reference/commands/load.html"><span class="doc">load</span></a>] Added support for ISO 8601 time format.[GitHub#1228][Patched by Takashi Hashida]</p>
<p><code class="docutils literal notranslate"><span class="pre">load</span></code> support the following format by this modification.</p>
<blockquote>
<div><ul class="simple">
<li><p>YYYY-MM-ddThh:mm:ss.sZ</p></li>
<li><p>YYYY-MM-ddThh:mm:ss.s+10:00</p></li>
<li><p>YYYY-MM-ddThh:mm:ss.s-10:00</p></li>
</ul>
</div></blockquote>
<p>We can also use <code class="docutils literal notranslate"><span class="pre">t</span></code> and <code class="docutils literal notranslate"><span class="pre">z</span></code> characters instead of <code class="docutils literal notranslate"><span class="pre">T</span></code> and <code class="docutils literal notranslate"><span class="pre">Z</span></code> in this syntax.
We can also use <code class="docutils literal notranslate"><span class="pre">/</span></code> character instead of <code class="docutils literal notranslate"><span class="pre">-</span></code> in this syntax. However, note that this is not an ISO 8601 format.
This format is present for compatibility.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">plugin_register</span> <span class="n">functions</span><span class="o">/</span><span class="n">time</span>

<span class="n">table_create</span> <span class="n">Logs</span> <span class="n">TABLE_NO_KEY</span>
<span class="n">column_create</span> <span class="n">Logs</span> <span class="n">case</span> <span class="n">COLUMN_SCALAR</span> <span class="n">ShortText</span>
<span class="n">column_create</span> <span class="n">Logs</span> <span class="n">created_at</span> <span class="n">COLUMN_SCALAR</span> <span class="n">Time</span>
<span class="n">column_create</span> <span class="n">Logs</span> <span class="n">created_at_text</span> <span class="n">COLUMN_SCALAR</span> <span class="n">ShortText</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Logs</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;case&quot;</span><span class="p">:</span> <span class="s2">&quot;timezone: Z&quot;</span><span class="p">,</span> <span class="s2">&quot;created_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2000-01-01T10:00:00Z&quot;</span><span class="p">,</span> <span class="s2">&quot;created_at_text&quot;</span><span class="p">:</span> <span class="s2">&quot;2000-01-01T10:00:00Z&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;case&quot;</span><span class="p">:</span> <span class="s2">&quot;timezone: z&quot;</span><span class="p">,</span> <span class="s2">&quot;created_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2000-01-01t10:00:00z&quot;</span><span class="p">,</span> <span class="s2">&quot;created_at_text&quot;</span><span class="p">:</span> <span class="s2">&quot;2000-01-01T10:00:00z&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;case&quot;</span><span class="p">:</span> <span class="s2">&quot;timezone: 00:00&quot;</span><span class="p">,</span> <span class="s2">&quot;created_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2000-01-01T10:00:00+00:00&quot;</span><span class="p">,</span> <span class="s2">&quot;created_at_text&quot;</span><span class="p">:</span> <span class="s2">&quot;2000-01-01T10:00:00+00:00&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;case&quot;</span><span class="p">:</span> <span class="s2">&quot;timezone: +01:01&quot;</span><span class="p">,</span> <span class="s2">&quot;created_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2000-01-01T11:01:00+01:01&quot;</span><span class="p">,</span> <span class="s2">&quot;created_at_text&quot;</span><span class="p">:</span> <span class="s2">&quot;2000-01-01T11:01:00+01:01&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;case&quot;</span><span class="p">:</span> <span class="s2">&quot;timezone: +11:11&quot;</span><span class="p">,</span> <span class="s2">&quot;created_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2000-01-01T21:11:00+11:11&quot;</span><span class="p">,</span> <span class="s2">&quot;created_at_text&quot;</span><span class="p">:</span> <span class="s2">&quot;2000-01-01T21:11:00+11:11&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;case&quot;</span><span class="p">:</span> <span class="s2">&quot;timezone: -01:01&quot;</span><span class="p">,</span> <span class="s2">&quot;created_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2000-01-01T08:59:00-01:01&quot;</span><span class="p">,</span> <span class="s2">&quot;created_at_text&quot;</span><span class="p">:</span> <span class="s2">&quot;2000-01-01T08:59:00-01:01&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;case&quot;</span><span class="p">:</span> <span class="s2">&quot;timezone: -11:11&quot;</span><span class="p">,</span> <span class="s2">&quot;created_at&quot;</span><span class="p">:</span> <span class="s2">&quot;1999-12-31T22:49:00-11:11&quot;</span><span class="p">,</span> <span class="s2">&quot;created_at_text&quot;</span><span class="p">:</span> <span class="s2">&quot;1999-12-31T22:49:00-11:11&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;case&quot;</span><span class="p">:</span> <span class="s2">&quot;timezone hour threshold: +23:00&quot;</span><span class="p">,</span> <span class="s2">&quot;created_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2000-01-02T09:00:00+23:00&quot;</span><span class="p">,</span> <span class="s2">&quot;created_at_text&quot;</span><span class="p">:</span> <span class="s2">&quot;2000-01-02T09:00:00+23:00&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;case&quot;</span><span class="p">:</span> <span class="s2">&quot;timezone minute threshold: +00:59&quot;</span><span class="p">,</span> <span class="s2">&quot;created_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2000-01-01T10:59:00+00:59&quot;</span><span class="p">,</span> <span class="s2">&quot;created_at_text&quot;</span><span class="p">:</span> <span class="s2">&quot;2000-01-01T10:59:00+00:59&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;case&quot;</span><span class="p">:</span> <span class="s2">&quot;timezone omitting minute: +01&quot;</span><span class="p">,</span> <span class="s2">&quot;created_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2000-01-01T11:00:00+01&quot;</span><span class="p">,</span> <span class="s2">&quot;created_at_text&quot;</span><span class="p">:</span> <span class="s2">&quot;2000-01-01T11:00:00+01&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;case&quot;</span><span class="p">:</span> <span class="s2">&quot;timezone omitting minute: -01&quot;</span><span class="p">,</span> <span class="s2">&quot;created_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2000-01-01T09:00:00-01&quot;</span><span class="p">,</span> <span class="s2">&quot;created_at_text&quot;</span><span class="p">:</span> <span class="s2">&quot;2000-01-01T09:00:00-01&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;case&quot;</span><span class="p">:</span> <span class="s2">&quot;timezone: localtime&quot;</span><span class="p">,</span> <span class="s2">&quot;created_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2000-01-01T19:00:00&quot;</span><span class="p">,</span> <span class="s2">&quot;created_at_text&quot;</span><span class="p">:</span> <span class="s2">&quot;2000-01-01T19:00:00&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;case&quot;</span><span class="p">:</span> <span class="s2">&quot;compatible: date delimiter: /&quot;</span><span class="p">,</span> <span class="s2">&quot;created_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2000/01/01T10:00:00Z&quot;</span><span class="p">,</span> <span class="s2">&quot;created_at_text&quot;</span><span class="p">:</span> <span class="s2">&quot;2000/01/01T10:00:00Z&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;case&quot;</span><span class="p">:</span> <span class="s2">&quot;decimal&quot;</span><span class="p">,</span> <span class="s2">&quot;created_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2000-01-01T11:01:00.123+01:01&quot;</span><span class="p">,</span> <span class="s2">&quot;created_at_text&quot;</span><span class="p">:</span> <span class="s2">&quot;2000-01-01T11:01:00.123+01:01&quot;</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">select</span> <span class="n">Logs</span> \
  <span class="o">--</span><span class="n">limit</span> <span class="o">-</span><span class="mi">1</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="s2">&quot;case, time_format_iso8601(created_at), created_at_text&quot;</span>
<span class="p">[</span>
  <span class="p">[</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mf">0.0</span><span class="p">,</span>
    <span class="mf">0.0</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="p">[</span>
      <span class="p">[</span>
        <span class="mi">14</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="p">[</span>
          <span class="s2">&quot;case&quot;</span><span class="p">,</span>
          <span class="s2">&quot;ShortText&quot;</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;time_format_iso8601&quot;</span><span class="p">,</span>
          <span class="n">null</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;created_at_text&quot;</span><span class="p">,</span>
          <span class="s2">&quot;ShortText&quot;</span>
        <span class="p">]</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="s2">&quot;timezone: Z&quot;</span><span class="p">,</span>
        <span class="s2">&quot;2000-01-01T19:00:00.000000+09:00&quot;</span><span class="p">,</span>
        <span class="s2">&quot;2000-01-01T10:00:00Z&quot;</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="s2">&quot;timezone: z&quot;</span><span class="p">,</span>
        <span class="s2">&quot;2000-01-01T19:00:00.000000+09:00&quot;</span><span class="p">,</span>
        <span class="s2">&quot;2000-01-01T10:00:00z&quot;</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="s2">&quot;timezone: 00:00&quot;</span><span class="p">,</span>
        <span class="s2">&quot;2000-01-01T19:00:00.000000+09:00&quot;</span><span class="p">,</span>
        <span class="s2">&quot;2000-01-01T10:00:00+00:00&quot;</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="s2">&quot;timezone: +01:01&quot;</span><span class="p">,</span>
        <span class="s2">&quot;2000-01-01T19:00:00.000000+09:00&quot;</span><span class="p">,</span>
        <span class="s2">&quot;2000-01-01T11:01:00+01:01&quot;</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="s2">&quot;timezone: +11:11&quot;</span><span class="p">,</span>
        <span class="s2">&quot;2000-01-01T19:00:00.000000+09:00&quot;</span><span class="p">,</span>
        <span class="s2">&quot;2000-01-01T21:11:00+11:11&quot;</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="s2">&quot;timezone: -01:01&quot;</span><span class="p">,</span>
        <span class="s2">&quot;2000-01-01T19:00:00.000000+09:00&quot;</span><span class="p">,</span>
        <span class="s2">&quot;2000-01-01T08:59:00-01:01&quot;</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="s2">&quot;timezone: -11:11&quot;</span><span class="p">,</span>
        <span class="s2">&quot;2000-01-01T19:00:00.000000+09:00&quot;</span><span class="p">,</span>
        <span class="s2">&quot;1999-12-31T22:49:00-11:11&quot;</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="s2">&quot;timezone hour threshold: +23:00&quot;</span><span class="p">,</span>
        <span class="s2">&quot;2000-01-01T19:00:00.000000+09:00&quot;</span><span class="p">,</span>
        <span class="s2">&quot;2000-01-02T09:00:00+23:00&quot;</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="s2">&quot;timezone minute threshold: +00:59&quot;</span><span class="p">,</span>
        <span class="s2">&quot;2000-01-01T19:00:00.000000+09:00&quot;</span><span class="p">,</span>
        <span class="s2">&quot;2000-01-01T10:59:00+00:59&quot;</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="s2">&quot;timezone omitting minute: +01&quot;</span><span class="p">,</span>
        <span class="s2">&quot;2000-01-01T19:00:00.000000+09:00&quot;</span><span class="p">,</span>
        <span class="s2">&quot;2000-01-01T11:00:00+01&quot;</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="s2">&quot;timezone omitting minute: -01&quot;</span><span class="p">,</span>
        <span class="s2">&quot;2000-01-01T19:00:00.000000+09:00&quot;</span><span class="p">,</span>
        <span class="s2">&quot;2000-01-01T09:00:00-01&quot;</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="s2">&quot;timezone: localtime&quot;</span><span class="p">,</span>
        <span class="s2">&quot;2000-01-01T19:00:00.000000+09:00&quot;</span><span class="p">,</span>
        <span class="s2">&quot;2000-01-01T19:00:00&quot;</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="s2">&quot;compatible: date delimiter: /&quot;</span><span class="p">,</span>
        <span class="s2">&quot;2000-01-01T19:00:00.000000+09:00&quot;</span><span class="p">,</span>
        <span class="s2">&quot;2000/01/01T10:00:00Z&quot;</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="s2">&quot;decimal&quot;</span><span class="p">,</span>
        <span class="s2">&quot;2000-01-01T19:00:00.123000+09:00&quot;</span><span class="p">,</span>
        <span class="s2">&quot;2000-01-01T11:01:00.123+01:01&quot;</span>
      <span class="p">]</span>
    <span class="p">]</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
</li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] Added a new <code class="docutils literal notranslate"><span class="pre">query_flags</span></code> <code class="docutils literal notranslate"><span class="pre">DISABLE_PREFIX_SEARCH</span></code>.</p>
<p>We can use the prefix search operators <code class="docutils literal notranslate"><span class="pre">^</span></code> and <code class="docutils literal notranslate"><span class="pre">*</span></code> as search keywords
by <code class="docutils literal notranslate"><span class="pre">DISABLE_PREFIX_SEARCH</span></code> as below.</p>
<p>This feature is useful if we want to search documents including <code class="docutils literal notranslate"><span class="pre">^</span></code> and <code class="docutils literal notranslate"><span class="pre">*</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Users</span> <span class="n">TABLE_PAT_KEY</span> <span class="n">ShortText</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Users</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;alice&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;alan&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;ba*&quot;</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">select</span> <span class="n">Users</span> \
  <span class="o">--</span><span class="n">match_columns</span> <span class="s2">&quot;_key&quot;</span> \
  <span class="o">--</span><span class="n">query</span> <span class="s2">&quot;a*&quot;</span> \
  <span class="o">--</span><span class="n">query_flags</span> <span class="s2">&quot;DISABLE_PREFIX_SEARCH&quot;</span>
<span class="p">[[</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">],[[[</span><span class="mi">1</span><span class="p">],[[</span><span class="s2">&quot;_id&quot;</span><span class="p">,</span><span class="s2">&quot;UInt32&quot;</span><span class="p">],[</span><span class="s2">&quot;_key&quot;</span><span class="p">,</span><span class="s2">&quot;ShortText&quot;</span><span class="p">]],[</span><span class="mi">3</span><span class="p">,</span><span class="s2">&quot;ba*&quot;</span><span class="p">]]]]</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Users</span> <span class="n">TABLE_PAT_KEY</span> <span class="n">ShortText</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Users</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;alice&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;alan&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;^a&quot;</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">select</span> <span class="n">Users</span> \
  <span class="o">--</span><span class="n">query</span> <span class="s2">&quot;_key:^a&quot;</span> \
  <span class="o">--</span><span class="n">query_flags</span> <span class="s2">&quot;ALLOW_COLUMN|DISABLE_PREFIX_SEARCH&quot;</span>
<span class="p">[[</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">],[[[</span><span class="mi">1</span><span class="p">],[[</span><span class="s2">&quot;_id&quot;</span><span class="p">,</span><span class="s2">&quot;UInt32&quot;</span><span class="p">],[</span><span class="s2">&quot;_key&quot;</span><span class="p">,</span><span class="s2">&quot;ShortText&quot;</span><span class="p">]],[</span><span class="mi">3</span><span class="p">,</span><span class="s2">&quot;^a&quot;</span><span class="p">]]]]</span>
</pre></div>
</div>
</li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] Added a new <code class="docutils literal notranslate"><span class="pre">query_flags</span></code> <code class="docutils literal notranslate"><span class="pre">DISABLE_AND_NOT</span></code>.</p>
<p>We can use <code class="docutils literal notranslate"><span class="pre">AND</span> <span class="pre">NOT</span></code> operators <code class="docutils literal notranslate"><span class="pre">-</span></code> as search keywords
by <code class="docutils literal notranslate"><span class="pre">DISABLE_AND_NOT</span></code> as below.</p>
<p>This feature is useful if we want to search documents including <code class="docutils literal notranslate"><span class="pre">-</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Users</span> <span class="n">TABLE_PAT_KEY</span> <span class="n">ShortText</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Users</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;alice&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;bob&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;cab-&quot;</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">select</span> <span class="n">Users</span>   <span class="o">--</span><span class="n">match_columns</span> <span class="s2">&quot;_key&quot;</span>   <span class="o">--</span><span class="n">query</span> <span class="s2">&quot;b - a&quot;</span>   <span class="o">--</span><span class="n">query_flags</span> <span class="s2">&quot;DISABLE_AND_NOT&quot;</span>
<span class="p">[[</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">],[[[</span><span class="mi">1</span><span class="p">],[[</span><span class="s2">&quot;_id&quot;</span><span class="p">,</span><span class="s2">&quot;UInt32&quot;</span><span class="p">],[</span><span class="s2">&quot;_key&quot;</span><span class="p">,</span><span class="s2">&quot;ShortText&quot;</span><span class="p">]],[</span><span class="mi">3</span><span class="p">,</span><span class="s2">&quot;cab-&quot;</span><span class="p">]]]]</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="id21">
<h2>Fixes<a class="headerlink" href="#id21" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>[The browser based administration tool] Fixed a bug that a search query that is inputted to non-administration mode is sent even if we input checks to the checkbox for the administration mode of a record list. [GitHub#1186][Patched by Takashi Hashida]</p></li>
</ul>
</div>
<div class="section" id="id22">
<h2>Known Issues<a class="headerlink" href="#id22" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>Currently, Groonga has a bug that there is possible that data is corrupt when we execute many additions, delete, and update data to vector column.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">*&lt;</span></code> and <code class="docutils literal notranslate"><span class="pre">*&gt;</span></code> only valid when we use <code class="docutils literal notranslate"><span class="pre">query()</span></code> the right side of filter condition.
If we specify as below, <code class="docutils literal notranslate"><span class="pre">*&lt;</span></code> and <code class="docutils literal notranslate"><span class="pre">*&gt;</span></code> work as <code class="docutils literal notranslate"><span class="pre">&amp;&amp;</span></code>.</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'content</span> <span class="pre">&#64;</span> <span class="pre">&quot;Groonga&quot;</span> <span class="pre">*&lt;</span> <span class="pre">content</span> <span class="pre">&#64;</span> <span class="pre">&quot;Mroonga&quot;'</span></code></p></li>
</ul>
</div></blockquote>
</li>
<li><p>Groonga may not return records that should match caused by <code class="docutils literal notranslate"><span class="pre">GRN_II_CURSOR_SET_MIN_ENABLE</span></code>.</p></li>
</ul>
</div>
<div class="section" id="id23">
<h2>Thanks<a class="headerlink" href="#id23" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Takashi Hashida</p></li>
</ul>
</div>
<div class="section" id="release-11-0-9-2021-11-04">
<span id="release-11-0-9"></span><h2>Release 11.0.9 - 2021-11-04<a class="headerlink" href="#release-11-0-9-2021-11-04" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="id24">
<h2>Improvements<a class="headerlink" href="#id24" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>[<a class="reference internal" href="reference/functions/snippet.html"><span class="doc">snippet</span></a>] Added a new option <code class="docutils literal notranslate"><span class="pre">delimiter_regexp</span></code> for detecting snippet delimiter with regular expression.</p>
<p><a class="reference internal" href="reference/functions/snippet.html"><span class="doc">snippet</span></a> extracts text around search keywords.
We call the text that is extracted by <a class="reference internal" href="reference/functions/snippet.html"><span class="doc">snippet</span></a> snippet.</p>
<p>Normally, <a class="reference internal" href="reference/functions/snippet.html"><span class="doc">snippet</span></a> () returns the text of 200 bytes around search keywords.
However, <a class="reference internal" href="reference/functions/snippet.html"><span class="doc">snippet</span></a> () gives no thought to a delimiter of sentences.
The snippet may be composed of multi sentences.</p>
<p><code class="docutils literal notranslate"><span class="pre">delimiter_regexp</span></code> option is useful if we want to only extract the text of the same sentence as search keywords.
For example, we can use <code class="docutils literal notranslate"><span class="pre">\.\s*</span></code> to extract only text in the target sentence as below.
Note that you need to escape <code class="docutils literal notranslate"><span class="pre">\</span></code> in string.</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Documents</span> <span class="n">TABLE_NO_KEY</span>
<span class="n">column_create</span> <span class="n">Documents</span> <span class="n">content</span> <span class="n">COLUMN_SCALAR</span> <span class="n">Text</span>

<span class="n">table_create</span> <span class="n">Terms</span> <span class="n">TABLE_PAT_KEY</span> <span class="n">ShortText</span> <span class="o">--</span><span class="n">default_tokenizer</span> <span class="n">TokenBigram</span>  <span class="o">--</span><span class="n">normalizer</span> <span class="n">NormalizerAuto</span>
<span class="n">column_create</span> <span class="n">Terms</span> <span class="n">documents_content_index</span> <span class="n">COLUMN_INDEX</span><span class="o">|</span><span class="n">WITH_POSITION</span> <span class="n">Documents</span> <span class="n">content</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Documents</span>
<span class="p">[</span>
<span class="p">[</span><span class="s2">&quot;content&quot;</span><span class="p">],</span>
<span class="p">[</span><span class="s2">&quot;Groonga is a fast and accurate full text search engine based on inverted index. One of the characteristics of groonga is that a newly registered document instantly appears in search results. Also, groonga allows updates without read locks. These characteristics result in superior performance on real-time applications.&quot;</span><span class="p">],</span>
<span class="p">[</span><span class="s2">&quot;Groonga is also a column-oriented database management system (DBMS). Compared with well-known row-oriented systems, such as MySQL and PostgreSQL, column-oriented systems are more suited for aggregate queries. Due to this advantage, groonga can cover weakness of row-oriented systems.&quot;</span><span class="p">]</span>
<span class="p">]</span>

<span class="n">select</span> <span class="n">Documents</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="s1">&#39;snippet(content, </span><span class="se">\</span>
<span class="s1">                            { </span><span class="se">\</span>
<span class="s1">                               &quot;default_open_tag&quot;: &quot;[&quot;, </span><span class="se">\</span>
<span class="s1">                               &quot;default_close_tag&quot;: &quot;]&quot;, </span><span class="se">\</span>
<span class="s1">                               &quot;delimiter_regexp&quot;: &quot;</span><span class="se">\\\\</span><span class="s1">.</span><span class="se">\\\\</span><span class="s1">s*&quot; </span><span class="se">\</span>
<span class="s1">                            })&#39;</span> \
  <span class="o">--</span><span class="n">match_columns</span> <span class="n">content</span> \
  <span class="o">--</span><span class="n">query</span> <span class="s2">&quot;fast performance&quot;</span>
<span class="p">[</span>
  <span class="p">[</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mf">1337566253.89858</span><span class="p">,</span>
    <span class="mf">0.000355720520019531</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="p">[</span>
      <span class="p">[</span>
        <span class="mi">1</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="p">[</span>
          <span class="s2">&quot;snippet&quot;</span><span class="p">,</span>
          <span class="n">null</span>
        <span class="p">]</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="p">[</span>
          <span class="s2">&quot;Groonga is a [fast] and accurate full text search engine based on inverted index&quot;</span><span class="p">,</span>
          <span class="s2">&quot;These characteristics result in superior [performance] on real-time applications&quot;</span>
        <span class="p">]</span>
      <span class="p">]</span>
    <span class="p">]</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>[<a class="reference internal" href="reference/window_functions/window_rank.html"><span class="doc">window_rank</span></a>] Added a new function <code class="docutils literal notranslate"><span class="pre">window_rank()</span></code>.</p>
<ul>
<li><p>We can calculate a rank that includes a gap of each record.
Normally, the rank isn’t incremented when multiple records that are the same order.
For example, if values of sort keys are 100, 100, 200 then the ranks of them
are 1, 1, 3.
The rank of the last record is 3 not 2 because there are two 1 rank records.</p>
<p>This is similar to <a class="reference internal" href="reference/window_functions/window_record_number.html"><span class="doc">window_record_number</span></a>.
However, <a class="reference internal" href="reference/window_functions/window_record_number.html"><span class="doc">window_record_number</span></a> gives no thought to gap.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Points</span> <span class="n">TABLE_NO_KEY</span>
<span class="n">column_create</span> <span class="n">Points</span> <span class="n">game</span> <span class="n">COLUMN_SCALAR</span> <span class="n">ShortText</span>
<span class="n">column_create</span> <span class="n">Points</span> <span class="n">score</span> <span class="n">COLUMN_SCALAR</span> <span class="n">UInt32</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Points</span>
<span class="p">[</span>
<span class="p">[</span><span class="s2">&quot;game&quot;</span><span class="p">,</span>  <span class="s2">&quot;score&quot;</span><span class="p">],</span>
<span class="p">[</span><span class="s2">&quot;game1&quot;</span><span class="p">,</span> <span class="mi">100</span><span class="p">],</span>
<span class="p">[</span><span class="s2">&quot;game1&quot;</span><span class="p">,</span> <span class="mi">200</span><span class="p">],</span>
<span class="p">[</span><span class="s2">&quot;game1&quot;</span><span class="p">,</span> <span class="mi">100</span><span class="p">],</span>
<span class="p">[</span><span class="s2">&quot;game1&quot;</span><span class="p">,</span> <span class="mi">400</span><span class="p">],</span>
<span class="p">[</span><span class="s2">&quot;game2&quot;</span><span class="p">,</span> <span class="mi">150</span><span class="p">],</span>
<span class="p">[</span><span class="s2">&quot;game2&quot;</span><span class="p">,</span> <span class="mi">200</span><span class="p">],</span>
<span class="p">[</span><span class="s2">&quot;game2&quot;</span><span class="p">,</span> <span class="mi">200</span><span class="p">],</span>
<span class="p">[</span><span class="s2">&quot;game2&quot;</span><span class="p">,</span> <span class="mi">200</span><span class="p">]</span>
<span class="p">]</span>

<span class="n">select</span> <span class="n">Points</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">rank</span><span class="p">]</span><span class="o">.</span><span class="n">stage</span> <span class="n">filtered</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">rank</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="s1">&#39;window_rank()&#39;</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">rank</span><span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="n">UInt32</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">rank</span><span class="p">]</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">sort_keys</span> <span class="n">score</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="s1">&#39;game, score, rank&#39;</span> \
  <span class="o">--</span><span class="n">sort_keys</span> <span class="n">score</span>
<span class="p">[</span>
  <span class="p">[</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mf">1337566253.89858</span><span class="p">,</span>
    <span class="mf">0.000355720520019531</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="p">[</span>
      <span class="p">[</span>
        <span class="mi">8</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="p">[</span>
          <span class="s2">&quot;game&quot;</span><span class="p">,</span>
          <span class="s2">&quot;ShortText&quot;</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;score&quot;</span><span class="p">,</span>
          <span class="s2">&quot;UInt32&quot;</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;rank&quot;</span><span class="p">,</span>
          <span class="s2">&quot;UInt32&quot;</span>
        <span class="p">]</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="s2">&quot;game1&quot;</span><span class="p">,</span>
        <span class="mi">100</span><span class="p">,</span>
        <span class="mi">1</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="s2">&quot;game1&quot;</span><span class="p">,</span>
        <span class="mi">100</span><span class="p">,</span>
        <span class="mi">1</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="s2">&quot;game2&quot;</span><span class="p">,</span>
        <span class="mi">150</span><span class="p">,</span>
        <span class="mi">3</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="s2">&quot;game2&quot;</span><span class="p">,</span>
        <span class="mi">200</span><span class="p">,</span>
        <span class="mi">4</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="s2">&quot;game2&quot;</span><span class="p">,</span>
        <span class="mi">200</span><span class="p">,</span>
        <span class="mi">4</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="s2">&quot;game1&quot;</span><span class="p">,</span>
        <span class="mi">200</span><span class="p">,</span>
        <span class="mi">4</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="s2">&quot;game2&quot;</span><span class="p">,</span>
        <span class="mi">200</span><span class="p">,</span>
        <span class="mi">4</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="s2">&quot;game1&quot;</span><span class="p">,</span>
        <span class="mi">400</span><span class="p">,</span>
        <span class="mi">8</span>
      <span class="p">]</span>
    <span class="p">]</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/functions/in_values.html"><span class="doc">in_values</span></a>] Added support for auto cast when we search tables.</p>
<p>For example, if we load values of <code class="docutils literal notranslate"><span class="pre">UInt32</span></code> into a table that a key type is <code class="docutils literal notranslate"><span class="pre">UInt64</span></code>, Groonga cast the values to <code class="docutils literal notranslate"><span class="pre">UInt64</span></code> automatically when we search the table with <code class="docutils literal notranslate"><span class="pre">in_values()</span></code>. However, <code class="docutils literal notranslate"><span class="pre">in_values(_key,</span> <span class="pre">10)</span></code> doesn’t work with <code class="docutils literal notranslate"><span class="pre">UInt64</span></code> key table. Because 10 is parsed as <code class="docutils literal notranslate"><span class="pre">Int32</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Numbers</span> <span class="n">TABLE_HASH_KEY</span> <span class="n">UInt64</span>
<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Numbers</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="mi">200</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="mi">300</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">select</span> <span class="n">Numbers</span>   <span class="o">--</span><span class="n">output_columns</span> <span class="n">_key</span>   <span class="o">--</span><span class="nb">filter</span> <span class="s1">&#39;in_values(_key, 200, 100)&#39;</span>   <span class="o">--</span><span class="n">sortby</span> <span class="n">_id</span>
<span class="p">[[</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">],[[[</span><span class="mi">2</span><span class="p">],[[</span><span class="s2">&quot;_key&quot;</span><span class="p">,</span><span class="s2">&quot;UInt64&quot;</span><span class="p">]],[</span><span class="mi">100</span><span class="p">],[</span><span class="mi">200</span><span class="p">]]]]</span>
</pre></div>
</div>
</li>
<li><p>[httpd] Updated bundled nginx to 1.21.3.</p></li>
<li><p>[<a class="reference internal" href="install/almalinux.html"><span class="doc">AlmaLinux</span></a>] Added support for AlmaLinux 8.</p></li>
<li><p>[<a class="reference internal" href="install/ubuntu.html"><span class="doc">Ubuntu</span></a>] Added support for Ubuntu 21.10 (Impish Indri).</p></li>
</ul>
</div>
<div class="section" id="id25">
<h2>Fixes<a class="headerlink" href="#id25" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Fixed a bug that Groonga doesn’t return a response when an error occurred
in command (e.g. sytax error in filter).</p>
<ul>
<li><p>This bug only occurs when we use <code class="docutils literal notranslate"><span class="pre">--output_type</span> <span class="pre">apache-arrow</span></code>.</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id26">
<h2>Known Issues<a class="headerlink" href="#id26" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>Currently, Groonga has a bug that there is possible that data is corrupt when we execute many additions, delete, and update data to vector column.</p></li>
<li><p>[The browser based administration tool] Currently, Groonga has a bug that a search query that is inputted to non-administration mode is sent even if we input checks to the checkbox for the administration mode of a record list.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">*&lt;</span></code> and <code class="docutils literal notranslate"><span class="pre">*&gt;</span></code> only valid when we use <code class="docutils literal notranslate"><span class="pre">query()</span></code> the right side of filter condition.
If we specify as below, <code class="docutils literal notranslate"><span class="pre">*&lt;</span></code> and <code class="docutils literal notranslate"><span class="pre">*&gt;</span></code> work as <code class="docutils literal notranslate"><span class="pre">&amp;&amp;</span></code>.</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'content</span> <span class="pre">&#64;</span> <span class="pre">&quot;Groonga&quot;</span> <span class="pre">*&lt;</span> <span class="pre">content</span> <span class="pre">&#64;</span> <span class="pre">&quot;Mroonga&quot;'</span></code></p></li>
</ul>
</div></blockquote>
</li>
<li><p>Groonga may not return records that should match caused by <code class="docutils literal notranslate"><span class="pre">GRN_II_CURSOR_SET_MIN_ENABLE</span></code>.</p></li>
</ul>
</div>
<div class="section" id="release-11-0-7-2021-09-29">
<span id="release-11-0-7"></span><h2>Release 11.0.7 - 2021-09-29<a class="headerlink" href="#release-11-0-7-2021-09-29" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="id27">
<h2>Improvements<a class="headerlink" href="#id27" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>[<a class="reference internal" href="reference/commands/load.html"><span class="doc">load</span></a>] Added support for casting a string like as “[int, int,…]” to a vector of integer like as [int, int,…].</p>
<p>For example, Groonga handle as a vector of integer like as [1, -2] even if we load vector of string like as “[1, -2]” as below.</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Data</span> <span class="n">TABLE_NO_KEY</span>
<span class="n">column_create</span> <span class="n">Data</span> <span class="n">numbers</span> <span class="n">COLUMN_VECTOR</span> <span class="n">Int16</span>
<span class="n">table_create</span> <span class="n">Numbers</span> <span class="n">TABLE_PAT_KEY</span> <span class="n">Int16</span>
<span class="n">column_create</span> <span class="n">Numbers</span> <span class="n">data_numbers</span> <span class="n">COLUMN_INDEX</span> <span class="n">Data</span> <span class="n">numbers</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Data</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;numbers&quot;</span><span class="p">:</span> <span class="s2">&quot;[1, -2]&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;numbers&quot;</span><span class="p">:</span> <span class="s2">&quot;[-3, 4]&quot;</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">dump</span>   <span class="o">--</span><span class="n">dump_plugins</span> <span class="n">no</span>   <span class="o">--</span><span class="n">dump_schema</span> <span class="n">no</span>
<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Data</span>
<span class="p">[</span>
<span class="p">[</span><span class="s2">&quot;_id&quot;</span><span class="p">,</span><span class="s2">&quot;numbers&quot;</span><span class="p">],</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,[</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">2</span><span class="p">]],</span>
<span class="p">[</span><span class="mi">2</span><span class="p">,[</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]]</span>
<span class="p">]</span>

<span class="n">column_create</span> <span class="n">Numbers</span> <span class="n">data_numbers</span> <span class="n">COLUMN_INDEX</span> <span class="n">Data</span> <span class="n">numbers</span>
<span class="n">select</span> <span class="n">Data</span> <span class="o">--</span><span class="nb">filter</span> <span class="s1">&#39;numbers @ -2&#39;</span>
<span class="p">[[</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">],[[[</span><span class="mi">1</span><span class="p">],[[</span><span class="s2">&quot;_id&quot;</span><span class="p">,</span><span class="s2">&quot;UInt32&quot;</span><span class="p">],[</span><span class="s2">&quot;numbers&quot;</span><span class="p">,</span><span class="s2">&quot;Int16&quot;</span><span class="p">]],[</span><span class="mi">1</span><span class="p">,[</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">2</span><span class="p">]]]]]</span>
</pre></div>
</div>
</div></blockquote>
<p>This feature supports for the floowings types.</p>
<blockquote>
<div><ul class="simple">
<li><p>Int8</p></li>
<li><p>UInt8</p></li>
<li><p>Int16</p></li>
<li><p>UInt16</p></li>
<li><p>Int32</p></li>
<li><p>UInt32</p></li>
<li><p>Int64</p></li>
<li><p>UInt64</p></li>
</ul>
</div></blockquote>
</li>
<li><p>[<a class="reference internal" href="reference/commands/load.html"><span class="doc">load</span></a>] Added support for loading a JSON array expressed as a text string as a vector of string.</p>
<p>For example, Groonga handle as a vector that has two elements like as [“hello”, “world”] if we load JSON array expressed as a text string like as “[&quot;hello&quot;, &quot;world&quot;]” as below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Data</span> <span class="n">TABLE_NO_KEY</span>
<span class="p">[[</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">],</span><span class="n">true</span><span class="p">]</span>
<span class="n">column_create</span> <span class="n">Data</span> <span class="n">strings</span> <span class="n">COLUMN_VECTOR</span> <span class="n">ShortText</span>
<span class="p">[[</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">],</span><span class="n">true</span><span class="p">]</span>
<span class="n">table_create</span> <span class="n">Terms</span> <span class="n">TABLE_PAT_KEY</span> <span class="n">ShortText</span>   <span class="o">--</span><span class="n">normalizer</span> <span class="n">NormalizerNFKC130</span>   <span class="o">--</span><span class="n">default_tokenizer</span> <span class="n">TokenNgram</span>
<span class="p">[[</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">],</span><span class="n">true</span><span class="p">]</span>
<span class="n">column_create</span> <span class="n">Terms</span> <span class="n">data_strings</span> <span class="n">COLUMN_INDEX</span> <span class="n">Data</span> <span class="n">strings</span>
<span class="p">[[</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">],</span><span class="n">true</span><span class="p">]</span>
<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Data</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;strings&quot;</span><span class="p">:</span> <span class="s2">&quot;[</span><span class="se">\&quot;</span><span class="s2">Hello</span><span class="se">\&quot;</span><span class="s2">, </span><span class="se">\&quot;</span><span class="s2">World</span><span class="se">\&quot;</span><span class="s2">]&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;strings&quot;</span><span class="p">:</span> <span class="s2">&quot;[</span><span class="se">\&quot;</span><span class="s2">Good-bye</span><span class="se">\&quot;</span><span class="s2">, </span><span class="se">\&quot;</span><span class="s2">World</span><span class="se">\&quot;</span><span class="s2">]&quot;</span><span class="p">}</span>
<span class="p">]</span>
<span class="p">[[</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">],</span><span class="mi">2</span><span class="p">]</span>
<span class="n">dump</span>   <span class="o">--</span><span class="n">dump_plugins</span> <span class="n">no</span>   <span class="o">--</span><span class="n">dump_schema</span> <span class="n">no</span>
<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Data</span>
<span class="p">[</span>
<span class="p">[</span><span class="s2">&quot;_id&quot;</span><span class="p">,</span><span class="s2">&quot;strings&quot;</span><span class="p">],</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,[</span><span class="s2">&quot;Hello&quot;</span><span class="p">,</span><span class="s2">&quot;World&quot;</span><span class="p">]],</span>
<span class="p">[</span><span class="mi">2</span><span class="p">,[</span><span class="s2">&quot;Good-bye&quot;</span><span class="p">,</span><span class="s2">&quot;World&quot;</span><span class="p">]]</span>
<span class="p">]</span>

<span class="n">column_create</span> <span class="n">Terms</span> <span class="n">data_strings</span> <span class="n">COLUMN_INDEX</span> <span class="n">Data</span> <span class="n">strings</span>
<span class="n">select</span> <span class="n">Data</span> <span class="o">--</span><span class="nb">filter</span> <span class="s1">&#39;strings @ &quot;bye&quot;&#39;</span>
<span class="p">[</span>
  <span class="p">[</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mf">0.0</span><span class="p">,</span>
    <span class="mf">0.0</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="p">[</span>
      <span class="p">[</span>
        <span class="mi">1</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="p">[</span>
          <span class="s2">&quot;_id&quot;</span><span class="p">,</span>
          <span class="s2">&quot;UInt32&quot;</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;strings&quot;</span><span class="p">,</span>
          <span class="s2">&quot;ShortText&quot;</span>
        <span class="p">]</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">2</span><span class="p">,</span>
        <span class="p">[</span>
          <span class="s2">&quot;Good-bye&quot;</span><span class="p">,</span>
          <span class="s2">&quot;World&quot;</span>
        <span class="p">]</span>
      <span class="p">]</span>
    <span class="p">]</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
<p>In before version, Groonga handled as a vector that had one element like as [“[&quot;hello&quot;, &quot;world&quot;]”] if we loaded JSON array expressed as a text string like as “[&quot;hello&quot;, &quot;world&quot;]”.</p>
</li>
<li><p>[Documentation] Added a documentation about the following items.</p>
<ul class="simple">
<li><p>[<a class="reference internal" href="reference/commands/column_create.html"><span class="doc">column_create</span></a>] Added a documentation about <code class="docutils literal notranslate"><span class="pre">WEIGHT_FLOAT32</span></code> flag.</p></li>
<li><p>[<a class="reference internal" href="reference/normalizers/normalizer_nfkc121.html"><span class="doc">NormalizerNFKC121</span></a>] Added a documentation about <code class="docutils literal notranslate"><span class="pre">NormalizerNFKC121</span></code>.</p></li>
<li><p>[<a class="reference internal" href="reference/normalizers/normalizer_nfkc130.html"><span class="doc">NormalizerNFKC130</span></a>] Added a documentation about <code class="docutils literal notranslate"><span class="pre">NormalizerNFKC130</span></code>.</p></li>
<li><p>[<a class="reference internal" href="reference/normalizers/normalizer_table.html"><span class="doc">NormalizerTable</span></a>] Added a documentation about <code class="docutils literal notranslate"><span class="pre">NormalizerTable</span></code>.</p></li>
</ul>
</li>
<li><p>Updated to 3.0.0 that the version of Apache Arrow that Groonga requires. [GitHub#1265][Patched by Takashi Hashida]</p></li>
</ul>
</div>
<div class="section" id="id28">
<h2>Fixes<a class="headerlink" href="#id28" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>Fixed a memory leak when we created a table with a tokenizer with invalid option.</p></li>
<li><p>Fixed a bug that may not add a new entry in Hash table.</p>
<p>This bug only occurs in Groonga 11.0.6, and it may occur if we quite a lot of add and delete data.
If this bug occurs in your environment, you can resolve this problem by executing the following steps.</p>
<ol class="arabic simple">
<li><p>We upgrade Groonga to 11.0.7 or later from 11.0.6.</p></li>
<li><p>We make a new table that has the same schema as the original table.</p></li>
<li><p>We copy data to the new table from the original table.</p></li>
</ol>
</li>
<li><p>[Windows] Fixed a resource leak when Groonga fail open a new file caused by out of memory.</p></li>
</ul>
</div>
<div class="section" id="id29">
<h2>Known Issues<a class="headerlink" href="#id29" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>Currently, Groonga has a bug that there is possible that data is corrupt when we execute many additions, delete, and update data to vector column.</p></li>
<li><p>[The browser based administration tool] Currently, Groonga has a bug that a search query that is inputted to non-administration mode is sent even if we input checks to the checkbox for the administration mode of a record list.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">*&lt;</span></code> and <code class="docutils literal notranslate"><span class="pre">*&gt;</span></code> only valid when we use <code class="docutils literal notranslate"><span class="pre">query()</span></code> the right side of filter condition.
If we specify as below, <code class="docutils literal notranslate"><span class="pre">*&lt;</span></code> and <code class="docutils literal notranslate"><span class="pre">*&gt;</span></code> work as <code class="docutils literal notranslate"><span class="pre">&amp;&amp;</span></code>.</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'content</span> <span class="pre">&#64;</span> <span class="pre">&quot;Groonga&quot;</span> <span class="pre">*&lt;</span> <span class="pre">content</span> <span class="pre">&#64;</span> <span class="pre">&quot;Mroonga&quot;'</span></code></p></li>
</ul>
</div></blockquote>
</li>
<li><p>Groonga may not return records that should match caused by <code class="docutils literal notranslate"><span class="pre">GRN_II_CURSOR_SET_MIN_ENABLE</span></code>.</p></li>
</ul>
</div>
<div class="section" id="id30">
<h2>Thanks<a class="headerlink" href="#id30" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Takashi Hashida</p></li>
</ul>
</div>
<div class="section" id="release-11-0-6-2021-08-29">
<span id="release-11-0-6"></span><h2>Release 11.0.6 - 2021-08-29<a class="headerlink" href="#release-11-0-6-2021-08-29" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Groonga 11.0.6 has had a bug that may not add a new entry in Hash table.</p>
<p>We fixed this bug on Groonga 11.0.7. This bug only occurs in Groonga 11.0.6.
Therefore, if you were using Groonga 11.0.6, we highly recommended that
you use Groonga 11.0.7 or later.</p>
</div>
</div></blockquote>
</div>
<div class="section" id="id31">
<h2>Improvements<a class="headerlink" href="#id31" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>Added support for recovering on crash. (experimental)</p>
<p>This is a experimental feature. Currently, this feature is still not stable.</p>
<p>If Groonga crashes, it recovers the database automatically when it opens a database for the first time since the crash. However, This feature can’t recover the database automatically in all crash cases.
We need to recover the database manually depending on timing even if this feature enables.</p>
<p>Groonga execute WAL (write ahead log) when this feature is enable.
We can dump WAL by the following tools, but currently, users doesn’t need to use them.</p>
<blockquote>
<div><ul class="simple">
<li><p>[<a class="reference internal" href="reference/executables/grndb.html"><span class="doc">grndb</span></a>] <code class="docutils literal notranslate"><span class="pre">dump-wal</span></code> command.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dump-wal.rb</span></code> scritp.</p></li>
</ul>
</div></blockquote>
</li>
<li><p>[<a class="reference internal" href="reference/commands/cache_limit.html"><span class="doc">cache_limit</span></a>] Groonga remove cache when we execute <code class="docutils literal notranslate"><span class="pre">cache_limit</span> <span class="pre">0</span></code>. [GitHub#1224][Reported by higchi]</p>
<p>Groonga stores query cache to internally table.
The maximum total size of keys of this table is 4GiB. Because this table is hash table.
Therefore, If we execute many huge queries, Groonga may be unable to store query cache, because the maximum total size of keys may be over 4GiB.
In such cases, We can clear the table for query cache by using <code class="docutils literal notranslate"><span class="pre">cache_limit</span> <span class="pre">0</span></code>, and Groonga can store query cache</p>
</li>
</ul>
</div>
<div class="section" id="id32">
<h2>Fixes<a class="headerlink" href="#id32" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>Fixed a bug that Groonga doesn’t clear lock when some threads open the same object around the same time.</p>
<p>If some threads open the same object around the same time, threads except for a thread that executes the opening object at first are waiting for opening the target object.
At this time, threads that wait for an opening object take locks, but these locks are not released.
Therefore, these locks remain until Groonga’s process is restarted in the above case, and a new thread can’t also open the object all the time until Groonga’s process is restarted.</p>
<p>However, this bug rarely happens. Because a time of a thread open the object is a very short time.</p>
</li>
<li><p>[<a class="reference internal" href="reference/functions/query_parallel_or.html"><span class="doc">query_parallel_or</span></a>] Fixed a bug that result may be different from the <code class="docutils literal notranslate"><span class="pre">query()</span></code>.</p>
<p>For example, If we used <code class="docutils literal notranslate"><span class="pre">query(&quot;tags</span> <span class="pre">||</span> <span class="pre">tags2&quot;,</span> <span class="pre">&quot;beginner</span> <span class="pre">man&quot;)</span></code>, the following record was a match, but if we used <code class="docutils literal notranslate"><span class="pre">query_parallel_or(&quot;tags</span> <span class="pre">||</span> <span class="pre">tags2&quot;,</span> <span class="pre">&quot;beginner</span> <span class="pre">man&quot;)</span></code>, the following record wasn’t a match until now.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">{&quot;_key&quot;:</span> <span class="pre">&quot;Bob&quot;,</span>&#160;&#160; <span class="pre">&quot;comment&quot;:</span> <span class="pre">&quot;Hey!&quot;,</span>&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">&quot;tags&quot;:</span> <span class="pre">[&quot;expert&quot;,</span> <span class="pre">&quot;man&quot;],</span> <span class="pre">&quot;tags2&quot;:</span> <span class="pre">[&quot;beginner&quot;]}</span></code></p></li>
</ul>
<p>Even if we use <code class="docutils literal notranslate"><span class="pre">query_parallel_or(&quot;tags</span> <span class="pre">||</span> <span class="pre">tags2&quot;,</span> <span class="pre">&quot;beginner</span> <span class="pre">man&quot;)</span></code>, the above record is match by this modification.</p>
</li>
</ul>
</div>
<div class="section" id="id33">
<h2>Known Issues<a class="headerlink" href="#id33" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>Currently, Groonga has a bug that there is possible that data is corrupt when we execute many additions, delete, and update data to vector column.</p></li>
<li><p>[The browser based administration tool] Currently, Groonga has a bug that a search query that is inputted to non-administration mode is sent even if we input checks to the checkbox for the administration mode of a record list.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">*&lt;</span></code> and <code class="docutils literal notranslate"><span class="pre">*&gt;</span></code> only valid when we use <code class="docutils literal notranslate"><span class="pre">query()</span></code> the right side of filter condition.
If we specify as below, <code class="docutils literal notranslate"><span class="pre">*&lt;</span></code> and <code class="docutils literal notranslate"><span class="pre">*&gt;</span></code> work as <code class="docutils literal notranslate"><span class="pre">&amp;&amp;</span></code>.</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'content</span> <span class="pre">&#64;</span> <span class="pre">&quot;Groonga&quot;</span> <span class="pre">*&lt;</span> <span class="pre">content</span> <span class="pre">&#64;</span> <span class="pre">&quot;Mroonga&quot;'</span></code></p></li>
</ul>
</div></blockquote>
</li>
<li><p>Groonga may not return records that should match caused by <code class="docutils literal notranslate"><span class="pre">GRN_II_CURSOR_SET_MIN_ENABLE</span></code>.</p></li>
</ul>
</div>
<div class="section" id="id34">
<h2>Thanks<a class="headerlink" href="#id34" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>higchi</p></li>
</ul>
</div>
<div class="section" id="release-11-0-5-2021-07-29">
<span id="release-11-0-5"></span><h2>Release 11.0.5 - 2021-07-29<a class="headerlink" href="#release-11-0-5-2021-07-29" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="id35">
<h2>Improvements<a class="headerlink" href="#id35" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>[<a class="reference internal" href="reference/normalizers.html"><span class="doc">Normalizers</span></a>] Added support for multiple normalizers.</p>
<p>We can specify multiple normalizers by <code class="docutils literal notranslate"><span class="pre">--notmalizers</span></code> option when we create a table since this release.
If we can also specify them by  <code class="docutils literal notranslate"><span class="pre">--normalizer</span></code> existing option because of compatibility.</p>
<p>We added <code class="docutils literal notranslate"><span class="pre">NormalizerTable</span></code> for customizing a normalizer in Groonga 11.0.4.
We can more flexibly behavior of the normalizer by combining <code class="docutils literal notranslate"><span class="pre">NormalizerTable</span></code> with existing normalizer.</p>
<p>For example, this feature is useful in the following case.</p>
<blockquote>
<div><ul class="simple">
<li><p>Search for a telephone number. However, we import data handwritten by OCR.
If data is handwritten, OCR may misunderstand a number and string(e.g. 5 and S).</p></li>
</ul>
</div></blockquote>
<p>The details are as follows.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Normalizations</span> <span class="n">TABLE_PAT_KEY</span> <span class="n">ShortText</span>
<span class="n">column_create</span> <span class="n">Normalizations</span> <span class="n">normalized</span> <span class="n">COLUMN_SCALAR</span> <span class="n">ShortText</span>
<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Normalizations</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;s&quot;</span><span class="p">,</span> <span class="s2">&quot;normalized&quot;</span><span class="p">:</span> <span class="s2">&quot;5&quot;</span><span class="p">}</span>
<span class="p">]</span>


<span class="n">table_create</span> <span class="n">Tels</span> <span class="n">TABLE_NO_KEY</span>
<span class="n">column_create</span> <span class="n">Tels</span> <span class="n">tel</span> <span class="n">COLUMN_SCALAR</span> <span class="n">ShortText</span>

<span class="n">table_create</span> <span class="n">TelsIndex</span> <span class="n">TABLE_PAT_KEY</span> <span class="n">ShortText</span> \
  <span class="o">--</span><span class="n">normalizers</span> <span class="s1">&#39;NormalizerNFKC130(&quot;unify_hyphen_and_prolonged_sound_mark&quot;, true), </span><span class="se">\</span>
<span class="s1">                 NormalizerTable(&quot;column&quot;, &quot;Normalizations.normalized&quot;)&#39;</span> \
  <span class="o">--</span><span class="n">default_tokenizer</span> <span class="s1">&#39;TokenNgram(&quot;loose_symbol&quot;, true, &quot;loose_blank&quot;, true)&#39;</span>
<span class="n">column_create</span> <span class="n">TelsIndex</span> <span class="n">tel_index</span> <span class="n">COLUMN_INDEX</span><span class="o">|</span><span class="n">WITH_SECTION</span> <span class="n">Tels</span> <span class="n">tel</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Tels</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;tel&quot;</span><span class="p">:</span> <span class="s2">&quot;03-4S-1234&quot;</span><span class="p">}</span>
<span class="p">{</span><span class="s2">&quot;tel&quot;</span><span class="p">:</span> <span class="s2">&quot;03-45-9876&quot;</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">select</span> <span class="o">--</span><span class="n">table</span> <span class="n">Tels</span> \
  <span class="o">--</span><span class="nb">filter</span> <span class="s1">&#39;tel @ &quot;03-45-1234&quot;&#39;</span>
<span class="p">[</span>
  <span class="p">[</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mf">1625227424.560146</span><span class="p">,</span>
    <span class="mf">0.0001730918884277344</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="p">[</span>
      <span class="p">[</span>
        <span class="mi">1</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="p">[</span>
          <span class="s2">&quot;_id&quot;</span><span class="p">,</span>
          <span class="s2">&quot;UInt32&quot;</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;tel&quot;</span><span class="p">,</span>
          <span class="s2">&quot;ShortText&quot;</span>
        <span class="p">]</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;03-4S-1234&quot;</span>
      <span class="p">]</span>
    <span class="p">]</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
<p>Existing normalizers can’t meet in such case, but we can meet it by combining <code class="docutils literal notranslate"><span class="pre">NormalizerTable</span></code> with existing normalizer since this release.</p>
</li>
<li><p>[<a class="reference internal" href="reference/functions/query_parallel_or.html"><span class="doc">query_parallel_or</span></a>][<a class="reference internal" href="reference/functions/query.html"><span class="doc">query</span></a>] Added support for customizing thresholds for sequential search.</p>
<p>We can customize thresholds in each queries whether to use sequential search by the following options.</p>
<blockquote>
<div><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">{&quot;max_n_enough_filtered_records&quot;:</span> <span class="pre">xx}</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">max_n_enough_filtered_records</span></code> specify the number of records.
<code class="docutils literal notranslate"><span class="pre">query</span></code> or <code class="docutils literal notranslate"><span class="pre">query_parallel_or</span></code> use sequential search when they seems to narrow down until under this number.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">{&quot;enough_filtered_ratio&quot;:</span> <span class="pre">x.x}</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">enough_filtered_ratio</span></code> specify percentage of total.
<code class="docutils literal notranslate"><span class="pre">query</span></code> or <code class="docutils literal notranslate"><span class="pre">query_parallel_or</span></code> use sequential search when they seems to narrow down until under this percentage.
For example, if we specify <code class="docutils literal notranslate"><span class="pre">{&quot;enough_filtered_ratio&quot;:</span> <span class="pre">0.5}</span></code>, <code class="docutils literal notranslate"><span class="pre">query</span></code> or <code class="docutils literal notranslate"><span class="pre">query_parallel_or</span></code> use sequential search when they seems to narrow down until half of the whole.</p>
</li>
</ul>
</div></blockquote>
<p>The details are as follows.</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Products</span> <span class="n">TABLE_NO_KEY</span>
<span class="n">column_create</span> <span class="n">Products</span> <span class="n">name</span> <span class="n">COLUMN_SCALAR</span> <span class="n">ShortText</span>

<span class="n">table_create</span> <span class="n">Terms</span> <span class="n">TABLE_PAT_KEY</span> <span class="n">ShortText</span> <span class="o">--</span><span class="n">normalizer</span> <span class="n">NormalizerAuto</span>
<span class="n">column_create</span> <span class="n">Terms</span> <span class="n">products_name</span> <span class="n">COLUMN_INDEX</span> <span class="n">Products</span> <span class="n">name</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Products</span>
<span class="p">[</span>
<span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">],</span>
<span class="p">[</span><span class="s2">&quot;Groonga&quot;</span><span class="p">],</span>
<span class="p">[</span><span class="s2">&quot;Mroonga&quot;</span><span class="p">],</span>
<span class="p">[</span><span class="s2">&quot;Rroonga&quot;</span><span class="p">],</span>
<span class="p">[</span><span class="s2">&quot;PGroonga&quot;</span><span class="p">],</span>
<span class="p">[</span><span class="s2">&quot;Ruby&quot;</span><span class="p">],</span>
<span class="p">[</span><span class="s2">&quot;PostgreSQL&quot;</span><span class="p">]</span>
<span class="p">]</span>

<span class="n">select</span> \
  <span class="o">--</span><span class="n">table</span> <span class="n">Products</span> \
  <span class="o">--</span><span class="nb">filter</span> <span class="s1">&#39;query(&quot;name&quot;, &quot;r name:Ruby&quot;, {&quot;enough_filtered_ratio&quot;: 0.5})&#39;</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Products</span> <span class="n">TABLE_NO_KEY</span>
<span class="n">column_create</span> <span class="n">Products</span> <span class="n">name</span> <span class="n">COLUMN_SCALAR</span> <span class="n">ShortText</span>

<span class="n">table_create</span> <span class="n">Terms</span> <span class="n">TABLE_PAT_KEY</span> <span class="n">ShortText</span> <span class="o">--</span><span class="n">normalizer</span> <span class="n">NormalizerAuto</span>
<span class="n">column_create</span> <span class="n">Terms</span> <span class="n">products_name</span> <span class="n">COLUMN_INDEX</span> <span class="n">Products</span> <span class="n">name</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Products</span>
<span class="p">[</span>
<span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">],</span>
<span class="p">[</span><span class="s2">&quot;Groonga&quot;</span><span class="p">],</span>
<span class="p">[</span><span class="s2">&quot;Mroonga&quot;</span><span class="p">],</span>
<span class="p">[</span><span class="s2">&quot;Rroonga&quot;</span><span class="p">],</span>
<span class="p">[</span><span class="s2">&quot;PGroonga&quot;</span><span class="p">],</span>
<span class="p">[</span><span class="s2">&quot;Ruby&quot;</span><span class="p">],</span>
<span class="p">[</span><span class="s2">&quot;PostgreSQL&quot;</span><span class="p">]</span>
<span class="p">]</span>

<span class="n">select</span> \
  <span class="o">--</span><span class="n">table</span> <span class="n">Products</span> \
  <span class="o">--</span><span class="nb">filter</span> <span class="s1">&#39;query(&quot;name&quot;, &quot;r name:Ruby&quot;, {&quot;max_n_enough_filtered_records&quot;: 10})&#39;</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>[<a class="reference internal" href="reference/functions/between.html"><span class="doc">between</span></a>][<a class="reference internal" href="reference/functions/in_values.html"><span class="doc">in_values</span></a>] Added support for customizing thresholds for sequential search.</p>
<p>[<a class="reference internal" href="reference/functions/between.html"><span class="doc">between</span></a>] and [<a class="reference internal" href="reference/functions/in_values.html"><span class="doc">in_values</span></a>] have a feature that they switch to sequential search when the target of search records is narrowed down enough.</p>
<p>The value of <code class="docutils literal notranslate"><span class="pre">GRN_IN_VALUES_TOO_MANY_INDEX_MATCH_RATIO</span></code> / <code class="docutils literal notranslate"><span class="pre">GRN_BETWEEN_TOO_MANY_INDEX_MATCH_RATIO</span></code> is used as threshold whether Groonga execute sequential search or search with indexes in such a case.</p>
<p>This behavior is customized by only the following environment variable until now.</p>
<p><code class="docutils literal notranslate"><span class="pre">in_values()</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Don&#39;t use auto sequential search</span>
<span class="n">GRN_IN_VALUES_TOO_MANY_INDEX_MATCH_RATIO</span><span class="o">=-</span><span class="mi">1</span>
<span class="c1"># Set threshold to 0.02</span>
<span class="n">GRN_IN_VALUES_TOO_MANY_INDEX_MATCH_RATIO</span><span class="o">=</span><span class="mf">0.02</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">between()</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Don&#39;t use auto sequential search</span>
<span class="n">GRN_BETWEEN_TOO_MANY_INDEX_MATCH_RATIO</span><span class="o">=-</span><span class="mi">1</span>
<span class="c1"># Set threshold to 0.02</span>
<span class="n">GRN_BETWEEN_TOO_MANY_INDEX_MATCH_RATIO</span><span class="o">=</span><span class="mf">0.02</span>
</pre></div>
</div>
<p>if customize by the environment variable, this threshold applies to all queries, but we can specify it in each query by using this feature.</p>
<p>The details are as follows. We can specify the threshold by using <code class="docutils literal notranslate"><span class="pre">{&quot;too_many_index_match_ratio&quot;:</span> <span class="pre">x.xx}</span></code> option.
The value type of this option is <code class="docutils literal notranslate"><span class="pre">double</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Memos</span> <span class="n">TABLE_HASH_KEY</span> <span class="n">ShortText</span>
<span class="n">column_create</span> <span class="n">Memos</span> <span class="n">timestamp</span> <span class="n">COLUMN_SCALAR</span> <span class="n">Time</span>

<span class="n">table_create</span> <span class="n">Times</span> <span class="n">TABLE_PAT_KEY</span> <span class="n">Time</span>
<span class="n">column_create</span> <span class="n">Times</span> <span class="n">memos_timestamp</span> <span class="n">COLUMN_INDEX</span> <span class="n">Memos</span> <span class="n">timestamp</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Memos</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;001&quot;</span><span class="p">,</span> <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-11-10 07:25:23&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;002&quot;</span><span class="p">,</span> <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-11-10 07:25:24&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;003&quot;</span><span class="p">,</span> <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-11-10 07:25:25&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;004&quot;</span><span class="p">,</span> <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-11-10 07:25:26&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;005&quot;</span><span class="p">,</span> <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-11-10 07:25:27&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;006&quot;</span><span class="p">,</span> <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-11-10 07:25:28&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;007&quot;</span><span class="p">,</span> <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-11-10 07:25:29&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;008&quot;</span><span class="p">,</span> <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-11-10 07:25:30&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;009&quot;</span><span class="p">,</span> <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-11-10 07:25:31&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;010&quot;</span><span class="p">,</span> <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-11-10 07:25:32&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;011&quot;</span><span class="p">,</span> <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-11-10 07:25:33&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;012&quot;</span><span class="p">,</span> <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-11-10 07:25:34&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;013&quot;</span><span class="p">,</span> <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-11-10 07:25:35&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;014&quot;</span><span class="p">,</span> <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-11-10 07:25:36&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;015&quot;</span><span class="p">,</span> <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-11-10 07:25:37&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;016&quot;</span><span class="p">,</span> <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-11-10 07:25:38&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;017&quot;</span><span class="p">,</span> <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-11-10 07:25:39&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;018&quot;</span><span class="p">,</span> <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-11-10 07:25:40&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;019&quot;</span><span class="p">,</span> <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-11-10 07:25:41&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;020&quot;</span><span class="p">,</span> <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-11-10 07:25:42&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;021&quot;</span><span class="p">,</span> <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-11-10 07:25:43&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;022&quot;</span><span class="p">,</span> <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-11-10 07:25:44&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;023&quot;</span><span class="p">,</span> <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-11-10 07:25:45&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;024&quot;</span><span class="p">,</span> <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-11-10 07:25:46&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;025&quot;</span><span class="p">,</span> <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-11-10 07:25:47&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;026&quot;</span><span class="p">,</span> <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-11-10 07:25:48&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;027&quot;</span><span class="p">,</span> <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-11-10 07:25:49&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;028&quot;</span><span class="p">,</span> <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-11-10 07:25:50&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;029&quot;</span><span class="p">,</span> <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-11-10 07:25:51&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;030&quot;</span><span class="p">,</span> <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-11-10 07:25:52&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;031&quot;</span><span class="p">,</span> <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-11-10 07:25:53&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;032&quot;</span><span class="p">,</span> <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-11-10 07:25:54&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;033&quot;</span><span class="p">,</span> <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-11-10 07:25:55&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;034&quot;</span><span class="p">,</span> <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-11-10 07:25:56&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;035&quot;</span><span class="p">,</span> <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-11-10 07:25:57&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;036&quot;</span><span class="p">,</span> <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-11-10 07:25:58&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;037&quot;</span><span class="p">,</span> <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-11-10 07:25:59&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;038&quot;</span><span class="p">,</span> <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-11-10 07:26:00&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;039&quot;</span><span class="p">,</span> <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-11-10 07:26:01&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;040&quot;</span><span class="p">,</span> <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-11-10 07:26:02&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;041&quot;</span><span class="p">,</span> <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-11-10 07:26:03&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;042&quot;</span><span class="p">,</span> <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-11-10 07:26:04&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;043&quot;</span><span class="p">,</span> <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-11-10 07:26:05&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;044&quot;</span><span class="p">,</span> <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-11-10 07:26:06&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;045&quot;</span><span class="p">,</span> <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-11-10 07:26:07&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;046&quot;</span><span class="p">,</span> <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-11-10 07:26:08&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;047&quot;</span><span class="p">,</span> <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-11-10 07:26:09&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;048&quot;</span><span class="p">,</span> <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-11-10 07:26:10&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;049&quot;</span><span class="p">,</span> <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-11-10 07:26:11&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;050&quot;</span><span class="p">,</span> <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-11-10 07:26:12&quot;</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">select</span> <span class="n">Memos</span> \
  <span class="o">--</span><span class="nb">filter</span> <span class="s1">&#39;_key == &quot;003&quot; &amp;&amp; </span><span class="se">\</span>
<span class="s1">            between(timestamp, </span><span class="se">\</span>
<span class="s1">                    &quot;2014-11-10 07:25:24&quot;, </span><span class="se">\</span>
<span class="s1">                    &quot;include&quot;, </span><span class="se">\</span>
<span class="s1">                    &quot;2014-11-10 07:27:26&quot;, </span><span class="se">\</span>
<span class="s1">                    &quot;exclude&quot;, </span><span class="se">\</span>
<span class="s1">                    {&quot;too_many_index_match_ratio&quot;: 0.03})&#39;</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Tags</span> <span class="n">TABLE_HASH_KEY</span> <span class="n">ShortText</span>

<span class="n">table_create</span> <span class="n">Memos</span> <span class="n">TABLE_HASH_KEY</span> <span class="n">ShortText</span>
<span class="n">column_create</span> <span class="n">Memos</span> <span class="n">tag</span> <span class="n">COLUMN_SCALAR</span> <span class="n">Tags</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Memos</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;Rroonga is fast!&quot;</span><span class="p">,</span> <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="s2">&quot;Rroonga&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;Groonga is fast!&quot;</span><span class="p">,</span> <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="s2">&quot;Groonga&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;Mroonga is fast!&quot;</span><span class="p">,</span> <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="s2">&quot;Mroonga&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;Groonga sticker!&quot;</span><span class="p">,</span> <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="s2">&quot;Groonga&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;Groonga is good!&quot;</span><span class="p">,</span> <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="s2">&quot;Groonga&quot;</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">column_create</span> <span class="n">Tags</span> <span class="n">memos_tag</span> <span class="n">COLUMN_INDEX</span> <span class="n">Memos</span> <span class="n">tag</span>

<span class="n">select</span> \
  <span class="n">Memos</span> \
  <span class="o">--</span><span class="nb">filter</span> <span class="s1">&#39;_id &gt;= 3 &amp;&amp; </span><span class="se">\</span>
<span class="s1">            in_values(tag, </span><span class="se">\</span>
<span class="s1">                     &quot;Groonga&quot;, </span><span class="se">\</span>
<span class="s1">                     {&quot;too_many_index_match_ratio&quot;: 0.7})&#39;</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="n">_id</span><span class="p">,</span><span class="n">_score</span><span class="p">,</span><span class="n">_key</span><span class="p">,</span><span class="n">tag</span>
</pre></div>
</div>
</li>
<li><p>[<a class="reference internal" href="reference/functions/between.html"><span class="doc">between</span></a>] Added support for <code class="docutils literal notranslate"><span class="pre">GRN_EXPR_OPTIMIZE=yes</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">between()</span></code> supported for optimizing the order of evaluation of a conditional expression.</p>
</li>
<li><p>[<a class="reference internal" href="reference/functions/query_parallel_or.html"><span class="doc">query_parallel_or</span></a>][<a class="reference internal" href="reference/functions/query.html"><span class="doc">query</span></a>] Added support for specifying group of match_columns as vector. [GitHub#1238][Patched by naoa]</p>
<p>We can use vector in <code class="docutils literal notranslate"><span class="pre">match_columns</span></code> of <code class="docutils literal notranslate"><span class="pre">query</span></code> and <code class="docutils literal notranslate"><span class="pre">query_parallel_or</span></code> as below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Users</span> <span class="n">TABLE_NO_KEY</span>
<span class="n">column_create</span> <span class="n">Users</span> <span class="n">name</span> <span class="n">COLUMN_SCALAR</span> <span class="n">ShortText</span>
<span class="n">column_create</span> <span class="n">Users</span> <span class="n">memo</span> <span class="n">COLUMN_SCALAR</span> <span class="n">ShortText</span>
<span class="n">column_create</span> <span class="n">Users</span> <span class="n">tag</span> <span class="n">COLUMN_SCALAR</span> <span class="n">ShortText</span>

<span class="n">table_create</span> <span class="n">Terms</span> <span class="n">TABLE_PAT_KEY</span> <span class="n">ShortText</span> \
  <span class="o">--</span><span class="n">default_tokenizer</span> <span class="n">TokenNgram</span> \
  <span class="o">--</span><span class="n">normalizer</span> <span class="n">NormalizerNFKC130</span>
<span class="n">column_create</span> <span class="n">Terms</span> <span class="n">name</span> <span class="n">COLUMN_INDEX</span><span class="o">|</span><span class="n">WITH_POSITION</span> <span class="n">Users</span> <span class="n">name</span>
<span class="n">column_create</span> <span class="n">Terms</span> <span class="n">memo</span> <span class="n">COLUMN_INDEX</span><span class="o">|</span><span class="n">WITH_POSITION</span> <span class="n">Users</span> <span class="n">memo</span>
<span class="n">column_create</span> <span class="n">Terms</span> <span class="n">tag</span> <span class="n">COLUMN_INDEX</span><span class="o">|</span><span class="n">WITH_POSITION</span> <span class="n">Users</span> <span class="n">tag</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Users</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Alice&quot;</span><span class="p">,</span> <span class="s2">&quot;memo&quot;</span><span class="p">:</span> <span class="s2">&quot;Groonga user&quot;</span><span class="p">,</span> <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="s2">&quot;Groonga&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Bob&quot;</span><span class="p">,</span>   <span class="s2">&quot;memo&quot;</span><span class="p">:</span> <span class="s2">&quot;Rroonga user&quot;</span><span class="p">,</span> <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="s2">&quot;Rroonga&quot;</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">select</span> <span class="n">Users</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="n">_score</span><span class="p">,</span><span class="n">name</span> \
  <span class="o">--</span><span class="nb">filter</span> <span class="s1">&#39;query([&quot;name * 100&quot;, &quot;memo&quot;, &quot;tag * 10&quot;], </span><span class="se">\</span>
<span class="s1">                  &quot;Alice OR Groonga&quot;)&#39;</span>
</pre></div>
</div>
</li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] Added support for section and weight in prefix search. [GitHub#1240][Patched by naoa]</p>
<p>We can use multi column index and adjusting score in prefix search.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Memos</span> <span class="n">TABLE_NO_KEY</span>
<span class="n">column_create</span> <span class="n">Memos</span> <span class="n">title</span> <span class="n">COLUMN_SCALAR</span> <span class="n">ShortText</span>
<span class="n">column_create</span> <span class="n">Memos</span> <span class="n">tags</span> <span class="n">COLUMN_VECTOR</span> <span class="n">ShortText</span>

<span class="n">table_create</span> <span class="n">Terms</span> <span class="n">TABLE_PAT_KEY</span> <span class="n">ShortText</span>
<span class="n">column_create</span> <span class="n">Terms</span> <span class="n">index</span> <span class="n">COLUMN_INDEX</span><span class="o">|</span><span class="n">WITH_SECTION</span> <span class="n">Memos</span> <span class="n">title</span><span class="p">,</span><span class="n">tags</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Memos</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;Groonga&quot;</span><span class="p">,</span> <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Groonga&quot;</span><span class="p">]},</span>
<span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;Rroonga&quot;</span><span class="p">,</span> <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Groonga&quot;</span><span class="p">,</span> <span class="s2">&quot;Rroonga&quot;</span><span class="p">,</span> <span class="s2">&quot;Ruby&quot;</span><span class="p">]},</span>
<span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;Mroonga&quot;</span><span class="p">,</span> <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Groonga&quot;</span><span class="p">,</span> <span class="s2">&quot;Mroonga&quot;</span><span class="p">,</span> <span class="s2">&quot;MySQL&quot;</span><span class="p">]}</span>
<span class="p">]</span>

<span class="n">select</span> <span class="n">Memos</span> \
  <span class="o">--</span><span class="n">match_columns</span> <span class="s2">&quot;Terms.index.title * 2&quot;</span> \
  <span class="o">--</span><span class="n">query</span> <span class="s1">&#39;G*&#39;</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="n">title</span><span class="p">,</span><span class="n">tags</span><span class="p">,</span><span class="n">_score</span>
<span class="p">[</span>
  <span class="p">[</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mf">0.0</span><span class="p">,</span>
    <span class="mf">0.0</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="p">[</span>
      <span class="p">[</span>
        <span class="mi">1</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="p">[</span>
          <span class="s2">&quot;title&quot;</span><span class="p">,</span>
          <span class="s2">&quot;ShortText&quot;</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;tags&quot;</span><span class="p">,</span>
          <span class="s2">&quot;ShortText&quot;</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;_score&quot;</span><span class="p">,</span>
          <span class="s2">&quot;Int32&quot;</span>
        <span class="p">]</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="s2">&quot;Groonga&quot;</span><span class="p">,</span>
        <span class="p">[</span>
          <span class="s2">&quot;Groonga&quot;</span>
        <span class="p">],</span>
        <span class="mi">2</span>
      <span class="p">]</span>
    <span class="p">]</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
</li>
<li><p>[<a class="reference internal" href="reference/executables/grndb.html"><span class="doc">grndb</span></a>] Added support for closing used object immediately in <code class="docutils literal notranslate"><span class="pre">grndb</span> <span class="pre">recover</span></code>.</p>
<p>We can reduce memory usage by this.
This may decrease performance but it will be acceptable.</p>
<p>Note that <code class="docutils literal notranslate"><span class="pre">grndb</span> <span class="pre">check</span></code> doesn’t close used objects immediately yet.</p>
</li>
<li><p>[<a class="reference internal" href="reference/functions/query_parallel_or.html"><span class="doc">query_parallel_or</span></a>][<a class="reference internal" href="reference/functions/query.html"><span class="doc">query</span></a>] Added support for specifying <code class="docutils literal notranslate"><span class="pre">scorer_tf_idf</span></code> in <code class="docutils literal notranslate"><span class="pre">match_columns</span></code> as below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Tags</span> <span class="n">TABLE_HASH_KEY</span> <span class="n">ShortText</span>

<span class="n">table_create</span> <span class="n">Users</span> <span class="n">TABLE_HASH_KEY</span> <span class="n">ShortText</span>
<span class="n">column_create</span> <span class="n">Users</span> <span class="n">tags</span> <span class="n">COLUMN_VECTOR</span> <span class="n">Tags</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Users</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;Alice&quot;</span><span class="p">,</span>
 <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;beginner&quot;</span><span class="p">,</span> <span class="s2">&quot;active&quot;</span><span class="p">]},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;Bob&quot;</span><span class="p">,</span>
 <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;expert&quot;</span><span class="p">,</span> <span class="s2">&quot;passive&quot;</span><span class="p">]},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;Chris&quot;</span><span class="p">,</span>
 <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;beginner&quot;</span><span class="p">,</span> <span class="s2">&quot;passive&quot;</span><span class="p">]}</span>
<span class="p">]</span>

<span class="n">column_create</span> <span class="n">Tags</span> <span class="n">users</span> <span class="n">COLUMN_INDEX</span> <span class="n">Users</span> <span class="n">tags</span>

<span class="n">select</span> <span class="n">Users</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="n">_key</span><span class="p">,</span><span class="n">_score</span> \
  <span class="o">--</span><span class="n">sort_keys</span> <span class="n">_id</span> \
  <span class="o">--</span><span class="n">command_version</span> <span class="mi">3</span> \
  <span class="o">--</span><span class="nb">filter</span> <span class="s1">&#39;query_parallel_or(&quot;scorer_tf_idf(tags)&quot;, </span><span class="se">\</span>
<span class="s1">                              &quot;beginner active&quot;)&#39;</span>
<span class="p">{</span>
  <span class="s2">&quot;header&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;return_code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;start_time&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
    <span class="s2">&quot;elapsed_time&quot;</span><span class="p">:</span> <span class="mf">0.0</span>
  <span class="p">},</span>
  <span class="s2">&quot;body&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;n_hits&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;columns&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;_key&quot;</span><span class="p">,</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;ShortText&quot;</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;_score&quot;</span><span class="p">,</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Float&quot;</span>
      <span class="p">}</span>
    <span class="p">],</span>
    <span class="s2">&quot;records&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">[</span>
        <span class="s2">&quot;Alice&quot;</span><span class="p">,</span>
        <span class="mf">2.098612308502197</span>
      <span class="p">]</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>[<a class="reference internal" href="reference/commands/query_expand.html"><span class="doc">query_expand</span></a>] Added support for weighted increment, decrement, and negative.</p>
<p>We can specify weight against expanded words.</p>
<p>If we want to increment score, we use <code class="docutils literal notranslate"><span class="pre">&gt;</span></code>.
If we want to decrement score, we use <code class="docutils literal notranslate"><span class="pre">&lt;</span></code>.</p>
<p>We can specify the quantity of scores as a number. We can also use a negative numbers in it.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">TermExpansions</span> <span class="n">TABLE_NO_KEY</span>
<span class="n">column_create</span> <span class="n">TermExpansions</span> <span class="n">term</span> <span class="n">COLUMN_SCALAR</span> <span class="n">ShortText</span>
<span class="n">column_create</span> <span class="n">TermExpansions</span> <span class="n">expansions</span> <span class="n">COLUMN_VECTOR</span> <span class="n">ShortText</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">TermExpansions</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;term&quot;</span><span class="p">:</span> <span class="s2">&quot;Rroonga&quot;</span><span class="p">,</span> <span class="s2">&quot;expansions&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Rroonga&quot;</span><span class="p">,</span> <span class="s2">&quot;Ruby Groonga&quot;</span><span class="p">]}</span>
<span class="p">]</span>

<span class="n">query_expand</span> <span class="n">TermExpansions</span> <span class="s2">&quot;Groonga &lt;-0.2Rroonga Mroonga&quot;</span> \
  <span class="o">--</span><span class="n">term_column</span> <span class="n">term</span> \
  <span class="o">--</span><span class="n">expanded_term_column</span> <span class="n">expansions</span>
<span class="p">[[</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">],</span><span class="s2">&quot;Groonga &lt;-0.2((Rroonga) OR (Ruby Groonga)) Mroonga&quot;</span><span class="p">]</span>
</pre></div>
</div>
</li>
<li><p>[httpd] Updated bundled nginx to 1.21.1.</p></li>
<li><p>Updated bundled Apache Arrow to 5.0.0.</p></li>
<li><p>[<a class="reference internal" href="install/ubuntu.html"><span class="doc">Ubuntu</span></a>] Dropped Ubuntu 20.10 (Groovy Gorilla) support.</p>
<ul class="simple">
<li><p>Because Ubuntu 20.10 reached EOL July 22, 2021.</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id36">
<h2>Fixes<a class="headerlink" href="#id36" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>[<a class="reference internal" href="reference/functions/query_parallel_or.html"><span class="doc">query_parallel_or</span></a>][<a class="reference internal" href="reference/functions/query.html"><span class="doc">query</span></a>] Fixed a bug that if we specify <code class="docutils literal notranslate"><span class="pre">query_options</span></code> and the other options, the other options are ignored.</p>
<p>For example, <code class="docutils literal notranslate"><span class="pre">&quot;default_operator&quot;:</span> <span class="pre">&quot;OR&quot;</span></code> option had been ignored in the following case.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">plugin_register</span> <span class="n">token_filters</span><span class="o">/</span><span class="n">stop_word</span>

<span class="n">table_create</span> <span class="n">Memos</span> <span class="n">TABLE_NO_KEY</span>
<span class="n">column_create</span> <span class="n">Memos</span> <span class="n">content</span> <span class="n">COLUMN_SCALAR</span> <span class="n">ShortText</span>

<span class="n">table_create</span> <span class="n">Terms</span> <span class="n">TABLE_PAT_KEY</span> <span class="n">ShortText</span> \
  <span class="o">--</span><span class="n">default_tokenizer</span> <span class="n">TokenBigram</span> \
  <span class="o">--</span><span class="n">normalizer</span> <span class="n">NormalizerAuto</span> \
  <span class="o">--</span><span class="n">token_filters</span> <span class="n">TokenFilterStopWord</span>
<span class="n">column_create</span> <span class="n">Terms</span> <span class="n">memos_content</span> <span class="n">COLUMN_INDEX</span><span class="o">|</span><span class="n">WITH_POSITION</span> <span class="n">Memos</span> <span class="n">content</span>
<span class="n">column_create</span> <span class="n">Terms</span> <span class="n">is_stop_word</span> <span class="n">COLUMN_SCALAR</span> <span class="n">Bool</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Terms</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;and&quot;</span><span class="p">,</span> <span class="s2">&quot;is_stop_word&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Memos</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;Hello&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;Hello and Good-bye&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;and&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;Good-bye&quot;</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">select</span> <span class="n">Memos</span> \
  <span class="o">--</span><span class="nb">filter</span> <span class="s1">&#39;query_parallel_or( </span><span class="se">\</span>
<span class="s1">              &quot;content&quot;, </span><span class="se">\</span>
<span class="s1">              &quot;Hello and&quot;, </span><span class="se">\</span>
<span class="s1">              {&quot;default_operator&quot;: &quot;OR&quot;, </span><span class="se">\</span>
<span class="s1">               &quot;options&quot;: {&quot;TokenFilterStopWord.enable&quot;: false}})&#39;</span> \
  <span class="o">--</span><span class="n">match_escalation_threshold</span> <span class="o">-</span><span class="mi">1</span> \
  <span class="o">--</span><span class="n">sort_keys</span> <span class="o">-</span><span class="n">_score</span>
<span class="p">[</span>
  <span class="p">[</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mf">0.0</span><span class="p">,</span>
    <span class="mf">0.0</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="p">[</span>
      <span class="p">[</span>
        <span class="mi">1</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="p">[</span>
          <span class="s2">&quot;_id&quot;</span><span class="p">,</span>
          <span class="s2">&quot;UInt32&quot;</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;content&quot;</span><span class="p">,</span>
          <span class="s2">&quot;ShortText&quot;</span>
        <span class="p">]</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">2</span><span class="p">,</span>
        <span class="s2">&quot;Hello and Good-bye&quot;</span>
      <span class="p">]</span>
    <span class="p">]</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="id37">
<h2>Known Issues<a class="headerlink" href="#id37" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>Currently, Groonga has a bug that there is possible that data is corrupt when we execute many additions, delete, and update data to vector column.</p></li>
<li><p>[The browser based administration tool] Currently, Groonga has a bug that a search query that is inputted to non-administration mode is sent even if we input checks to the checkbox for the administration mode of a record list.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">*&lt;</span></code> and <code class="docutils literal notranslate"><span class="pre">*&gt;</span></code> only valid when we use <code class="docutils literal notranslate"><span class="pre">query()</span></code> the right side of filter condition.
If we specify as below, <code class="docutils literal notranslate"><span class="pre">*&lt;</span></code> and <code class="docutils literal notranslate"><span class="pre">*&gt;</span></code> work as <code class="docutils literal notranslate"><span class="pre">&amp;&amp;</span></code>.</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'content</span> <span class="pre">&#64;</span> <span class="pre">&quot;Groonga&quot;</span> <span class="pre">*&lt;</span> <span class="pre">content</span> <span class="pre">&#64;</span> <span class="pre">&quot;Mroonga&quot;'</span></code></p></li>
</ul>
</div></blockquote>
</li>
<li><p>If we repeat that we remove any data and load them again, Groonga may not return records that should match.</p></li>
</ul>
</div>
<div class="section" id="id38">
<h2>Thanks<a class="headerlink" href="#id38" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>naoa</p></li>
</ul>
</div>
<div class="section" id="release-11-0-4-2021-06-29">
<span id="release-11-0-4"></span><h2>Release 11.0.4 - 2021-06-29<a class="headerlink" href="#release-11-0-4-2021-06-29" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id39">
<h3>Improvements<a class="headerlink" href="#id39" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p>[Normalizer] Added support for customized normalizer.</p>
<p>We define a table for normalize to use this feature.
We can normalize with use that table.
In other words, we can use customized normalizer.</p>
<p>For example, we define that “S” normalize to “5” in the following example.
The <code class="docutils literal notranslate"><span class="pre">Substitutions</span></code> table is for nromalize.</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Substitutions</span> <span class="n">TABLE_PAT_KEY</span> <span class="n">ShortText</span>
<span class="n">column_create</span> <span class="n">Substitutions</span> <span class="n">substituted</span> <span class="n">COLUMN_SCALAR</span> <span class="n">ShortText</span>
<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Substitutions</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;S&quot;</span><span class="p">,</span> <span class="s2">&quot;substituted&quot;</span><span class="p">:</span> <span class="s2">&quot;5&quot;</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">table_create</span> <span class="n">TelLists</span> <span class="n">TABLE_NO_KEY</span>
<span class="n">column_create</span> <span class="n">TelLists</span> <span class="n">tel</span> <span class="n">COLUMN_SCALAR</span> <span class="n">ShortText</span>

<span class="n">table_create</span> <span class="n">Terms</span> <span class="n">TABLE_HASH_KEY</span> <span class="n">ShortText</span> \
  <span class="o">--</span><span class="n">default_tokenizer</span> <span class="n">TokenNgram</span> \
  <span class="o">--</span><span class="n">normalizer</span> <span class="s1">&#39;NormalizerTable(&quot;column&quot;, &quot;Substitutions.substituted&quot;, </span><span class="se">\</span>
<span class="s1">                                &quot;report_source_offset&quot;, true)&#39;</span>
<span class="n">column_create</span> <span class="n">Terms</span> <span class="n">tel_index</span> <span class="n">COLUMN_INDEX</span><span class="o">|</span><span class="n">WITH_POSITION</span> <span class="n">TelLists</span> <span class="n">tel</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">TelLists</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;tel&quot;</span><span class="p">:</span> <span class="s2">&quot;03-4S-1234&quot;</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">select</span> <span class="n">TelLists</span> <span class="o">--</span><span class="nb">filter</span> <span class="s1">&#39;tel @ &quot;03-45-1234&quot;&#39;</span>
<span class="p">[</span>
  <span class="p">[</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mf">1624686303.538532</span><span class="p">,</span>
    <span class="mf">0.001319169998168945</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="p">[</span>
      <span class="p">[</span>
        <span class="mi">1</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="p">[</span>
          <span class="s2">&quot;_id&quot;</span><span class="p">,</span>
          <span class="s2">&quot;UInt32&quot;</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;tel&quot;</span><span class="p">,</span>
          <span class="s2">&quot;ShortText&quot;</span>
        <span class="p">]</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;03-4S-1234&quot;</span>
      <span class="p">]</span>
    <span class="p">]</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
<p>For example, we can define to the table easy to false recognize words when we input a handwritten data.
By this, we can normalize incorrect data to correct data.</p>
<p>Note that we need to reconstruct the index if we updated the table for normalize.</p>
</li>
<li><p>Added a new command <code class="docutils literal notranslate"><span class="pre">object_warm</span></code>.</p>
<p>This commnad ship Groonga’s DB to OS’s page cache.</p>
<p>If we never startup Groonga after OS startup, Groonga’s DB doesn’t exist on OS’s page cache
When Groonga on the first run.
Therefore, the first operation to Groonga is slow.</p>
<p>If we execute this command in advance, the first operation to Groonga is fast.
In Linux, we can do the same by also executing <code class="docutils literal notranslate"><span class="pre">cat</span> <span class="pre">*.db</span> <span class="pre">&gt;</span> <span class="pre">dev/null</span></code>.
However, we could not do the same thing in Windows until now.</p>
<p>By using this command, we can ship Groonga’s DB to OS’s page cache in both Linux and Windows.
Then, we can also do that in units of table, column, and index.
Therefore, we can ship only table, column, and index that we often use to OS’s page cache.</p>
<p>We can execute this command against various targets as below.</p>
<blockquote>
<div><ul class="simple">
<li><p>If we specify <code class="docutils literal notranslate"><span class="pre">object_warm</span> <span class="pre">--name</span> <span class="pre">index_name</span></code>, the index is shipped to OS’s page cache.</p></li>
<li><p>If we specify <code class="docutils literal notranslate"><span class="pre">object_warm</span> <span class="pre">--name</span> <span class="pre">column_name</span></code>, the column is shipped to OS’s page cache.</p></li>
<li><p>If we specify <code class="docutils literal notranslate"><span class="pre">object_warm</span> <span class="pre">--name</span> <span class="pre">table_name</span></code> is shipped to OS’s page cache.</p></li>
<li><p>If we specify <code class="docutils literal notranslate"><span class="pre">object_warm</span></code>, whole Groonga’s database is shipped to OS’s page cache.</p></li>
</ul>
</div></blockquote>
<p>However, note that if OS has not empty space on memory, this command has no effect.</p>
</li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] Added support for adjusting the score of a specific record in <code class="docutils literal notranslate"><span class="pre">--filter</span></code>.</p>
<p>We can adjust the score of a specific record by using a oprtator named <code class="docutils literal notranslate"><span class="pre">*~</span></code>.
<code class="docutils literal notranslate"><span class="pre">*~</span></code> is logical operator same as <code class="docutils literal notranslate"><span class="pre">&amp;&amp;</span></code> and <code class="docutils literal notranslate"><span class="pre">||</span></code>. Therefore, we can use <code class="docutils literal notranslate"><span class="pre">*~</span></code> like as <code class="docutils literal notranslate"><span class="pre">&amp;&amp;</span></code> ans <code class="docutils literal notranslate"><span class="pre">||</span></code>.
Default weight of <code class="docutils literal notranslate"><span class="pre">*~</span></code> is -1.</p>
<p>Therefore, for example, <code class="docutils literal notranslate"><span class="pre">'content</span> <span class="pre">&#64;</span> <span class="pre">&quot;Groonga&quot;</span> <span class="pre">*~</span> <span class="pre">content</span> <span class="pre">&#64;</span> <span class="pre">&quot;Mroonga&quot;'</span></code> mean the following operations.</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Extract records that match <code class="docutils literal notranslate"><span class="pre">'content</span> <span class="pre">&#64;</span> <span class="pre">&quot;Groonga&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">content</span> <span class="pre">&#64;</span> <span class="pre">&quot;Mroonga&quot;'</span></code>.</p></li>
<li><p>Add a score as below.</p>
<ol class="loweralpha simple">
<li><p>Calculate the score of <code class="docutils literal notranslate"><span class="pre">'content</span> <span class="pre">&#64;</span> <span class="pre">&quot;Groonga&quot;</span></code>.</p></li>
<li><p>Calculate the score of <code class="docutils literal notranslate"><span class="pre">'content</span> <span class="pre">&#64;</span> <span class="pre">&quot;Mroonga&quot;'</span></code>.</p></li>
<li><p>b’s score multiplied by -1 by <code class="docutils literal notranslate"><span class="pre">*~</span></code>.</p></li>
<li><p>The socre of this record is a + b
Therefore, if a’s socre is 1 and b’s score is 1, the score of this record  is 1 + (1 * -1) = 0.</p></li>
</ol>
</li>
</ol>
</div></blockquote>
<p>Then, we can specify score quantity by <code class="docutils literal notranslate"><span class="pre">*~${score_quantity}</span></code>.</p>
<p>In particular, the following query adjust the score of match records by the following condition(<code class="docutils literal notranslate"><span class="pre">'content</span> <span class="pre">&#64;</span> <span class="pre">&quot;Groonga&quot;</span> <span class="pre">*~2.5</span> <span class="pre">content</span> <span class="pre">&#64;</span> <span class="pre">&quot;Mroonga&quot;)'</span></code> ).</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Memos</span> <span class="n">TABLE_NO_KEY</span>
<span class="n">column_create</span> <span class="n">Memos</span> <span class="n">content</span> <span class="n">COLUMN_SCALAR</span> <span class="n">ShortText</span>

<span class="n">table_create</span> <span class="n">Terms</span> <span class="n">TABLE_PAT_KEY</span> <span class="n">ShortText</span> \
  <span class="o">--</span><span class="n">default_tokenizer</span> <span class="n">TokenBigram</span> \
  <span class="o">--</span><span class="n">normalizer</span> <span class="n">NormalizerAuto</span>
<span class="n">column_create</span> <span class="n">Terms</span> <span class="n">index</span> <span class="n">COLUMN_INDEX</span><span class="o">|</span><span class="n">WITH_POSITION</span> <span class="n">Memos</span> <span class="n">content</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Memos</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;Groonga is a full text search engine.&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;Rroonga is the Ruby bindings of Groonga.&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;Mroonga is a MySQL storage engine based of Groonga.&quot;</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">select</span> <span class="n">Memos</span> \
  <span class="o">--</span><span class="n">command_version</span> <span class="mi">3</span> \
  <span class="o">--</span><span class="nb">filter</span> <span class="s1">&#39;content @ &quot;Groonga&quot; *~2.5 content @ &quot;Mroonga&quot;&#39;</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="s1">&#39;content, _score&#39;</span> \
  <span class="o">--</span><span class="n">sort_keys</span> <span class="o">-</span><span class="n">_score</span><span class="p">,</span><span class="n">_id</span>
<span class="p">{</span>
  <span class="s2">&quot;header&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;return_code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;start_time&quot;</span><span class="p">:</span> <span class="mf">1624605205.641078</span><span class="p">,</span>
    <span class="s2">&quot;elapsed_time&quot;</span><span class="p">:</span> <span class="mf">0.002965450286865234</span>
  <span class="p">},</span>
  <span class="s2">&quot;body&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;n_hits&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="s2">&quot;columns&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;content&quot;</span><span class="p">,</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;ShortText&quot;</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;_score&quot;</span><span class="p">,</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Float&quot;</span>
      <span class="p">}</span>
    <span class="p">],</span>
    <span class="s2">&quot;records&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">[</span>
        <span class="s2">&quot;Groonga is a full text search engine.&quot;</span><span class="p">,</span>
        <span class="mf">1.0</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="s2">&quot;Rroonga is the Ruby bindings of Groonga.&quot;</span><span class="p">,</span>
        <span class="mf">1.0</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="s2">&quot;Mroonga is a MySQL storage engine based of Groonga.&quot;</span><span class="p">,</span>
        <span class="o">-</span><span class="mf">1.5</span>
      <span class="p">]</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p>We can do the same by also useing <a class="reference internal" href="reference/commands/select.html#select-adjuster"><span class="std std-ref">adjuster</span></a> .
If we use <a class="reference internal" href="reference/commands/select.html#select-adjuster"><span class="std std-ref">adjuster</span></a> , we need to make <code class="docutils literal notranslate"><span class="pre">--filter</span></code> condition and <code class="docutils literal notranslate"><span class="pre">--adjuster</span></code> conditon on our application, but we make only <code class="docutils literal notranslate"><span class="pre">--filter</span></code> condition on it by this improvement.</p>
<p>We can also describe filter condition as below by using <code class="docutils literal notranslate"><span class="pre">query()</span></code>.</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">--filter</span> <span class="pre">'content</span> <span class="pre">&#64;</span> <span class="pre">&quot;Groonga&quot;</span> <span class="pre">*~2.5</span> <span class="pre">content</span> <span class="pre">&#64;</span> <span class="pre">&quot;Mroonga&quot;'</span></code></p></li>
</ul>
</div></blockquote>
</li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] Added support for <code class="docutils literal notranslate"><span class="pre">&amp;&amp;</span></code> with weight.</p>
<p>We can use <code class="docutils literal notranslate"><span class="pre">&amp;&amp;</span></code> with weight by using <code class="docutils literal notranslate"><span class="pre">*&lt;</span></code> or <code class="docutils literal notranslate"><span class="pre">*&gt;</span></code>.
Default weight of <code class="docutils literal notranslate"><span class="pre">*&lt;</span></code> is 0.5. Default weight of <code class="docutils literal notranslate"><span class="pre">*&gt;</span></code> is 2.0.</p>
<p>We can specify score quantity by <code class="docutils literal notranslate"><span class="pre">*&lt;${score_quantity}</span></code> and <code class="docutils literal notranslate"><span class="pre">*&gt;${score_quantity}</span></code>.
Then, if we specify <code class="docutils literal notranslate"><span class="pre">*&lt;${score_quantity}</span></code>, a plus or minus sign of <code class="docutils literal notranslate"><span class="pre">${score_quantity}</span></code> is reverse.</p>
<p>For example, <code class="docutils literal notranslate"><span class="pre">'content</span> <span class="pre">&#64;</span> <span class="pre">&quot;Groonga&quot;</span> <span class="pre">*&lt;2.5</span> <span class="pre">query(&quot;content&quot;,</span> <span class="pre">&quot;MySQL&quot;)'</span></code> is as below.</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Extract records that match <code class="docutils literal notranslate"><span class="pre">'content</span> <span class="pre">&#64;</span> <span class="pre">&quot;Groonga&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">content</span> <span class="pre">&#64;</span> <span class="pre">&quot;Mroonga&quot;'</span></code>.</p></li>
<li><p>Add a score as below.</p>
<ol class="loweralpha simple">
<li><p>Calculate the score of <code class="docutils literal notranslate"><span class="pre">'content</span> <span class="pre">&#64;</span> <span class="pre">&quot;Groonga&quot;</span></code>.</p></li>
<li><p>Calculate the score of <code class="docutils literal notranslate"><span class="pre">query(&quot;content&quot;,</span> <span class="pre">&quot;MySQL&quot;)</span></code>.</p></li>
<li><p>b’s score multiplied by -2.5 by <code class="docutils literal notranslate"><span class="pre">*&lt;</span></code>.</p></li>
<li><p>The socre of this record is a + b
Therefore, if a’s socre is 1 and b’s score is 1, the score of this record is 1 + (1 * -2.5) = -1.5.</p></li>
</ol>
</li>
</ol>
</div></blockquote>
<p>In particular, the following query adjust the score of match records by the following condition( <code class="docutils literal notranslate"><span class="pre">'content</span> <span class="pre">&#64;</span> <span class="pre">&quot;Groonga&quot;</span> <span class="pre">*&lt;2.5</span> <span class="pre">query(&quot;content&quot;,</span> <span class="pre">&quot;Mroonga&quot;)'</span></code> ).</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Memos</span> <span class="n">TABLE_NO_KEY</span>
<span class="n">column_create</span> <span class="n">Memos</span> <span class="n">content</span> <span class="n">COLUMN_SCALAR</span> <span class="n">ShortText</span>

<span class="n">table_create</span> <span class="n">Terms</span> <span class="n">TABLE_PAT_KEY</span> <span class="n">ShortText</span> \
  <span class="o">--</span><span class="n">default_tokenizer</span> <span class="n">TokenBigram</span> \
  <span class="o">--</span><span class="n">normalizer</span> <span class="n">NormalizerAuto</span>
<span class="n">column_create</span> <span class="n">Terms</span> <span class="n">index</span> <span class="n">COLUMN_INDEX</span><span class="o">|</span><span class="n">WITH_POSITION</span> <span class="n">Memos</span> <span class="n">content</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Memos</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;Groonga is a full text search engine.&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;Rroonga is the Ruby bindings of Groonga.&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;Mroonga is a MySQL storage engine based of Groonga.&quot;</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">select</span> <span class="n">Memos</span> \
  <span class="o">--</span><span class="n">command_version</span> <span class="mi">3</span> \
  <span class="o">--</span><span class="nb">filter</span> <span class="s1">&#39;content @ &quot;Groonga&quot; *&lt;2.5 query(&quot;content&quot;, &quot;Mroonga&quot;)&#39;</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="s1">&#39;content, _score&#39;</span> \
  <span class="o">--</span><span class="n">sort_keys</span> <span class="o">-</span><span class="n">_score</span><span class="p">,</span><span class="n">_id</span>
<span class="p">{</span>
  <span class="s2">&quot;header&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;return_code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;start_time&quot;</span><span class="p">:</span> <span class="mf">1624605205.641078</span><span class="p">,</span>
    <span class="s2">&quot;elapsed_time&quot;</span><span class="p">:</span> <span class="mf">0.002965450286865234</span>
  <span class="p">},</span>
  <span class="s2">&quot;body&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;n_hits&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="s2">&quot;columns&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;content&quot;</span><span class="p">,</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;ShortText&quot;</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;_score&quot;</span><span class="p">,</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Float&quot;</span>
      <span class="p">}</span>
    <span class="p">],</span>
    <span class="s2">&quot;records&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">[</span>
        <span class="s2">&quot;Groonga is a full text search engine.&quot;</span><span class="p">,</span>
        <span class="mf">1.0</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="s2">&quot;Rroonga is the Ruby bindings of Groonga.&quot;</span><span class="p">,</span>
        <span class="mf">1.0</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="s2">&quot;Mroonga is a MySQL storage engine based of Groonga.&quot;</span><span class="p">,</span>
        <span class="o">-</span><span class="mf">1.5</span>
      <span class="p">]</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>[<a class="reference internal" href="reference/log.html"><span class="doc">Log</span></a>] Added support for outputting to stdout and stderr.</p>
<p>[<a class="reference internal" href="reference/log.html#process-log"><span class="std std-ref">Process log</span></a>] and [<a class="reference internal" href="reference/log.html#query-log"><span class="std std-ref">Query log</span></a>] supported　output to stdout and stderr.</p>
<blockquote>
<div><ul class="simple">
<li><p>If we specify as <code class="docutils literal notranslate"><span class="pre">--log-path</span> <span class="pre">-</span></code>, <code class="docutils literal notranslate"><span class="pre">--query-log-path</span> <span class="pre">-</span></code>, Groonga output log to stdout.</p></li>
<li><p>If we specify as <code class="docutils literal notranslate"><span class="pre">--log-path</span> <span class="pre">+</span></code>, <code class="docutils literal notranslate"><span class="pre">--query-log-path</span> <span class="pre">+</span></code>, Groonga output log to stderr.</p></li>
</ul>
</div></blockquote>
<p>[<a class="reference internal" href="reference/log.html#process-log"><span class="std std-ref">Process log</span></a>] is for all of Groonga works.
[<a class="reference internal" href="reference/log.html#query-log"><span class="std std-ref">Query log</span></a>] is just for query processing.</p>
<p>This feature is useful when we execute Groonga on Docker.
Docker has the feature that records stdout and stderr in standard.
Therefore, we don’t need to login into the environment of Docker to get Groonga’s log.</p>
<p>For example, this feature is useful as he following case.</p>
<blockquote>
<div><ul>
<li><p>If we want to analyze slow queries of Groonga on Docker.</p>
<p>If we specify <code class="docutils literal notranslate"><span class="pre">--query-log-path</span> <span class="pre">-</span></code> when startup Groonga, we can analyze slow queries by only execution the following commands.</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">logs</span> <span class="pre">${container_name}</span> <span class="pre">|</span> <span class="pre">groonga-query-log-analyze</span></code></p></li>
</ul>
</div></blockquote>
</li>
</ul>
</div></blockquote>
<p>By this, we can analyze slow query with the query log that output from Groonga on Docker simply.</p>
</li>
<li><p>[Documentation] Filled missing documentation of <code class="docutils literal notranslate"><span class="pre">string_substring</span></code>. [GitHub#1209][Patched by Takashi Hashida]</p></li>
</ul>
</div>
</div>
<div class="section" id="id40">
<h2>Known Issues<a class="headerlink" href="#id40" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>Currently, Groonga has a bug that there is possible that data is corrupt when we execute many additions, delete, and update data to vector column.</p></li>
<li><p>[The browser based administration tool] Currently, Groonga has a bug that a search query that is inputted to non-administration mode is sent even if we input checks to the checkbox for the administration mode of a record list.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">*&lt;</span></code> and <code class="docutils literal notranslate"><span class="pre">*&gt;</span></code> only valid when we use <code class="docutils literal notranslate"><span class="pre">query()</span></code> the right side of filter condition.
If we specify as below, <code class="docutils literal notranslate"><span class="pre">*&lt;</span></code> and <code class="docutils literal notranslate"><span class="pre">*&gt;</span></code> work as <code class="docutils literal notranslate"><span class="pre">&amp;&amp;</span></code>.</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'content</span> <span class="pre">&#64;</span> <span class="pre">&quot;Groonga&quot;</span> <span class="pre">*&lt;</span> <span class="pre">content</span> <span class="pre">&#64;</span> <span class="pre">&quot;Mroonga&quot;'</span></code></p></li>
</ul>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="id41">
<h2>Thanks<a class="headerlink" href="#id41" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Takashi Hashida</p></li>
</ul>
</div>
</div>
<div class="section" id="release-11-0-3-2021-05-29">
<span id="release-11-0-3"></span><h1>Release 11.0.3 - 2021-05-29<a class="headerlink" href="#release-11-0-3-2021-05-29" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id42">
<h2>Improvements<a class="headerlink" href="#id42" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>[<a class="reference internal" href="reference/functions/query.html"><span class="doc">query</span></a>] Added support for ignoring <code class="docutils literal notranslate"><span class="pre">TokenFilterStem</span></code> by the query.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">TokenFilterStem</span></code> can search by using a stem.
For example, all of <code class="docutils literal notranslate"><span class="pre">develop</span></code>, <code class="docutils literal notranslate"><span class="pre">developing</span></code>, <code class="docutils literal notranslate"><span class="pre">developed</span></code> and <code class="docutils literal notranslate"><span class="pre">develops</span></code> tokens are stemmed as <code class="docutils literal notranslate"><span class="pre">develop</span></code>.
So we can find <code class="docutils literal notranslate"><span class="pre">develop</span></code>, <code class="docutils literal notranslate"><span class="pre">developing</span></code> and <code class="docutils literal notranslate"><span class="pre">developed</span></code> by <code class="docutils literal notranslate"><span class="pre">develops</span></code> query.</p></li>
<li><p>In this release, we are able to search without <code class="docutils literal notranslate"><span class="pre">TokenFilterStem</span></code> in only a specific query as below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">plugin_register</span> <span class="n">token_filters</span><span class="o">/</span><span class="n">stem</span>

<span class="n">table_create</span> <span class="n">Memos</span> <span class="n">TABLE_NO_KEY</span>
<span class="n">column_create</span> <span class="n">Memos</span> <span class="n">content</span> <span class="n">COLUMN_SCALAR</span> <span class="n">ShortText</span>

<span class="n">table_create</span> <span class="n">Terms</span> <span class="n">TABLE_PAT_KEY</span> <span class="n">ShortText</span> \
  <span class="o">--</span><span class="n">default_tokenizer</span> <span class="n">TokenBigram</span> \
  <span class="o">--</span><span class="n">normalizer</span> <span class="n">NormalizerAuto</span> \
  <span class="o">--</span><span class="n">token_filters</span> <span class="s1">&#39;TokenFilterStem(&quot;keep_original&quot;, true)&#39;</span>
<span class="n">column_create</span> <span class="n">Terms</span> <span class="n">memos_content</span> <span class="n">COLUMN_INDEX</span><span class="o">|</span><span class="n">WITH_POSITION</span> <span class="n">Memos</span> <span class="n">content</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Memos</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;I develop Groonga&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;I&#39;m developing Groonga&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;I developed Groonga&quot;</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">select</span> <span class="n">Memos</span> \
  <span class="o">--</span><span class="n">match_columns</span> <span class="n">content</span> \
  <span class="o">--</span><span class="n">query</span> <span class="s1">&#39;&quot;developed groonga&quot;&#39;</span> \
  <span class="o">--</span><span class="n">query_options</span> <span class="s1">&#39;{&quot;TokenFilterStem.enable&quot;: false}&#39;</span>
<span class="p">[</span>
  <span class="p">[</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mf">0.0</span><span class="p">,</span>
    <span class="mf">0.0</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="p">[</span>
      <span class="p">[</span>
        <span class="mi">1</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="p">[</span>
          <span class="s2">&quot;_id&quot;</span><span class="p">,</span>
          <span class="s2">&quot;UInt32&quot;</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;content&quot;</span><span class="p">,</span>
          <span class="s2">&quot;ShortText&quot;</span>
        <span class="p">]</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">3</span><span class="p">,</span>
        <span class="s2">&quot;I developed Groonga&quot;</span>
      <span class="p">]</span>
    <span class="p">]</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
</li>
<li><p>This feature is useful when users want to search by a stemmed word generally but users sometimes want to search by a exact (not stemmed) word as below.</p>
<ul class="simple">
<li><p>If Groonga returns many results when searching by a stemmed word.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">TokenFilterStem</span></code> returns the wrong result of stemming.</p></li>
<li><p>If we want to find only records that have an exact (not stemmed) word.</p></li>
</ul>
</li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/functions/query.html"><span class="doc">query</span></a>] Added support for ignoring <code class="docutils literal notranslate"><span class="pre">TokenFilterStopWord</span></code> by the query.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">TokenFilterStopWord</span></code> searched without stop word that we registered beforehand.
It uses for reducing noise of search by ignoring frequently word (e.g., <code class="docutils literal notranslate"><span class="pre">and</span></code>, <code class="docutils literal notranslate"><span class="pre">is</span></code>, and so on.).</p></li>
<li><p>However, we sometimes want to search include these words only a specific query. In this release, we are able to search without <code class="docutils literal notranslate"><span class="pre">TokenFilterStopWord</span></code> in only a specific query as below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">plugin_register</span> <span class="n">token_filters</span><span class="o">/</span><span class="n">stop_word</span>

<span class="n">table_create</span> <span class="n">Memos</span> <span class="n">TABLE_NO_KEY</span>
<span class="n">column_create</span> <span class="n">Memos</span> <span class="n">content</span> <span class="n">COLUMN_SCALAR</span> <span class="n">ShortText</span>

<span class="n">table_create</span> <span class="n">Terms</span> <span class="n">TABLE_PAT_KEY</span> <span class="n">ShortText</span> \
  <span class="o">--</span><span class="n">default_tokenizer</span> <span class="n">TokenBigram</span> \
  <span class="o">--</span><span class="n">normalizer</span> <span class="n">NormalizerAuto</span> \
  <span class="o">--</span><span class="n">token_filters</span> <span class="n">TokenFilterStopWord</span>
<span class="n">column_create</span> <span class="n">Terms</span> <span class="n">memos_content</span> <span class="n">COLUMN_INDEX</span><span class="o">|</span><span class="n">WITH_POSITION</span> <span class="n">Memos</span> <span class="n">content</span>
<span class="n">column_create</span> <span class="n">Terms</span> <span class="n">is_stop_word</span> <span class="n">COLUMN_SCALAR</span> <span class="n">Bool</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Terms</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;and&quot;</span><span class="p">,</span> <span class="s2">&quot;is_stop_word&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Memos</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;Hello&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;Hello and Good-bye&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;Good-bye&quot;</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">select</span> <span class="n">Memos</span> \
  <span class="o">--</span><span class="n">match_columns</span> <span class="n">content</span> \
  <span class="o">--</span><span class="n">query</span> <span class="s2">&quot;Hello and&quot;</span> \
  <span class="o">--</span><span class="n">query_options</span> <span class="s1">&#39;{&quot;TokenFilterStopWord.enable&quot;: false}&#39;</span> \
  <span class="o">--</span><span class="n">match_escalation_threshold</span> <span class="o">-</span><span class="mi">1</span> \
  <span class="o">--</span><span class="n">sort_keys</span> <span class="o">-</span><span class="n">_score</span>
<span class="p">[</span>
  <span class="p">[</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mf">0.0</span><span class="p">,</span>
    <span class="mf">0.0</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="p">[</span>
      <span class="p">[</span>
        <span class="mi">1</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="p">[</span>
          <span class="s2">&quot;_id&quot;</span><span class="p">,</span>
          <span class="s2">&quot;UInt32&quot;</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;content&quot;</span><span class="p">,</span>
          <span class="s2">&quot;ShortText&quot;</span>
        <span class="p">]</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">2</span><span class="p">,</span>
        <span class="s2">&quot;Hello and Good-bye&quot;</span>
      <span class="p">]</span>
    <span class="p">]</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
</li>
<li><p>In the above example, we specify <code class="docutils literal notranslate"><span class="pre">TokenFilterStopWord.enable</span></code> by using <code class="docutils literal notranslate"><span class="pre">--query-options</span></code>, but we also specify it by using <code class="docutils literal notranslate"><span class="pre">{&quot;options&quot;:</span> <span class="pre">{&quot;TokenFilterStopWord.enable&quot;:</span> <span class="pre">false}}</span></code> as below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">plugin_register</span> <span class="n">token_filters</span><span class="o">/</span><span class="n">stop_word</span>

<span class="n">table_create</span> <span class="n">Memos</span> <span class="n">TABLE_NO_KEY</span>
<span class="n">column_create</span> <span class="n">Memos</span> <span class="n">content</span> <span class="n">COLUMN_SCALAR</span> <span class="n">ShortText</span>

<span class="n">table_create</span> <span class="n">Terms</span> <span class="n">TABLE_PAT_KEY</span> <span class="n">ShortText</span> \
  <span class="o">--</span><span class="n">default_tokenizer</span> <span class="n">TokenBigram</span> \
  <span class="o">--</span><span class="n">normalizer</span> <span class="n">NormalizerAuto</span> \
  <span class="o">--</span><span class="n">token_filters</span> <span class="n">TokenFilterStopWord</span>
<span class="n">column_create</span> <span class="n">Terms</span> <span class="n">memos_content</span> <span class="n">COLUMN_INDEX</span><span class="o">|</span><span class="n">WITH_POSITION</span> <span class="n">Memos</span> <span class="n">content</span>
<span class="n">column_create</span> <span class="n">Terms</span> <span class="n">is_stop_word</span> <span class="n">COLUMN_SCALAR</span> <span class="n">Bool</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Terms</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;and&quot;</span><span class="p">,</span> <span class="s2">&quot;is_stop_word&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Memos</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;Hello&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;Hello and Good-bye&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;Good-bye&quot;</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">select</span> <span class="n">Memos</span> \
  <span class="o">--</span><span class="nb">filter</span> <span class="s1">&#39;query(&quot;content&quot;, </span><span class="se">\</span>
<span class="s1">                  &quot;Hello and&quot;, </span><span class="se">\</span>
<span class="s1">                  {&quot;options&quot;: {&quot;TokenFilterStopWord.enable&quot;: false}})&#39;</span> \
  <span class="o">--</span><span class="n">match_escalation_threshold</span> <span class="o">-</span><span class="mi">1</span> \
  <span class="o">--</span><span class="n">sort_keys</span> <span class="o">-</span><span class="n">_score</span>
<span class="p">[</span>
  <span class="p">[</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mf">0.0</span><span class="p">,</span>
    <span class="mf">0.0</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="p">[</span>
      <span class="p">[</span>
        <span class="mi">1</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="p">[</span>
          <span class="s2">&quot;_id&quot;</span><span class="p">,</span>
          <span class="s2">&quot;UInt32&quot;</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;content&quot;</span><span class="p">,</span>
          <span class="s2">&quot;ShortText&quot;</span>
        <span class="p">]</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">2</span><span class="p">,</span>
        <span class="s2">&quot;Hello and Good-bye&quot;</span>
      <span class="p">]</span>
    <span class="p">]</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
</li>
<li><p>This feature is useful if that Groonga can’t return results correctly if we don’t search by keywords include commonly used words (e.g., if a search for a song title, a shop name, and so on.).</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/normalizers.html"><span class="doc">Normalizers</span></a>][NormalizerNFKC] Added a new option <code class="docutils literal notranslate"><span class="pre">remove_new_line</span></code>.</p>
<ul class="simple">
<li><p>If we want to normalize the key of a table that stores data, we set a normalizer to it.
However, normally, normalizers remove a new line.</p></li>
<li><p>Groonga can’t handle a key that is only a new line.</p></li>
<li><p>We can register data that is only a new line as key by this option.</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/functions/string_slice.html"><span class="doc">string_slice</span></a>] Added a new function <code class="docutils literal notranslate"><span class="pre">string_slice()</span></code>. [Github#1177][Patched by Takashi Hashida]</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">string_slice()</span></code> extracts a substring of a string.</p></li>
<li><p>To enable this function, we need to register <code class="docutils literal notranslate"><span class="pre">functions/string</span></code> plugin.</p></li>
<li><p>We can use two different extraction methods depending on the arguments as below.</p>
<ul>
<li><p>Extraction by position:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">plugin_register</span> <span class="n">functions</span><span class="o">/</span><span class="n">string</span>
<span class="n">table_create</span> <span class="n">Memos</span> <span class="n">TABLE_HASH_KEY</span> <span class="n">ShortText</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Memos</span>
<span class="p">[</span>
  <span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;Groonga&quot;</span><span class="p">}</span>
<span class="p">]</span>
<span class="n">select</span> <span class="n">Memos</span> <span class="o">--</span><span class="n">output_columns</span> <span class="s1">&#39;_key, string_slice(_key, 2, 3)&#39;</span>
<span class="p">[</span>
  <span class="p">[</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mf">1337566253.89858</span><span class="p">,</span>
    <span class="mf">0.000355720520019531</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="p">[</span>
      <span class="p">[</span>
        <span class="mi">1</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="p">[</span>
          <span class="s2">&quot;_key&quot;</span><span class="p">,</span>
          <span class="s2">&quot;ShortText&quot;</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;string_slice&quot;</span><span class="p">,</span>
          <span class="n">null</span>
        <span class="p">]</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="s2">&quot;Groonga&quot;</span><span class="p">,</span>
        <span class="s2">&quot;oon&quot;</span>
      <span class="p">]</span>
    <span class="p">]</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
</li>
<li><p>Extraction by regular expression:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">plugin_register</span> <span class="n">functions</span><span class="o">/</span><span class="n">string</span>
<span class="n">table_create</span> <span class="n">Memos</span> <span class="n">TABLE_HASH_KEY</span> <span class="n">ShortText</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Memos</span>
<span class="p">[</span>
  <span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;Groonga&quot;</span><span class="p">}</span>
<span class="p">]</span>
<span class="n">select</span> <span class="n">Memos</span> <span class="o">--</span><span class="n">output_columns</span> <span class="s1">&#39;_key, string_slice(_key, &quot;(Gro+)(.*)&quot;, 2)&#39;</span>
<span class="p">[</span>
  <span class="p">[</span><span class="n">p</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mf">1337566253.89858</span><span class="p">,</span>
    <span class="mf">0.000355720520019531</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="p">[</span>
      <span class="p">[</span>
        <span class="mi">1</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="p">[</span>
          <span class="s2">&quot;_key&quot;</span><span class="p">,</span>
          <span class="s2">&quot;ShortText&quot;</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;string_slice&quot;</span><span class="p">,</span>
          <span class="n">null</span>
        <span class="p">]</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="s2">&quot;Groonga&quot;</span><span class="p">,</span>
        <span class="s2">&quot;nga&quot;</span>
      <span class="p">]</span>
    <span class="p">]</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
</li>
</ul>
</li>
</ul>
</li>
<li><p>[<a class="reference internal" href="install/ubuntu.html"><span class="doc">Ubuntu</span></a>] Dropped support for Ubuntu 16.04 LTS (Xenial Xerus).</p></li>
<li><p>Added EditorConfig for Visual Studio. [GitHub#1191][Patched by Takashi Hashida]</p>
<ul class="simple">
<li><p>Most settings are for Visual Studio only.</p></li>
</ul>
</li>
<li><p>[httpd] Updated bundled nginx to 1.20.1.</p>
<ul class="simple">
<li><p>Contains security fix of CVE-2021-23017.</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id43">
<h2>Fixes<a class="headerlink" href="#id43" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Fixed a bug that Groonga may not have returned a result of a search query if we sent many search queries when tokenizer, normalizer, or token_filters that support options were used.</p></li>
</ul>
</div>
<div class="section" id="id44">
<h2>Known Issues<a class="headerlink" href="#id44" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Currently, Groonga has a bug that there is possible that data is corrupt when we execute many additions, delete, and update data to vector column.</p></li>
<li><p>[The browser based administration tool] Currently, Groonga has a bug that a search query that is inputted to non-administration mode is sent even if we input checks to the checkbox for the administration mode of a record list.</p></li>
</ul>
</div>
<div class="section" id="id45">
<h2>Thanks<a class="headerlink" href="#id45" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Takashi Hashida</p></li>
</ul>
</div>
</div>
<div class="section" id="release-11-0-2-2021-05-10">
<span id="release-11-0-2"></span><h1>Release 11.0.2 - 2021-05-10<a class="headerlink" href="#release-11-0-2-2021-05-10" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id46">
<h2>Improvements<a class="headerlink" href="#id46" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>[Documentation] Removed a reference about <code class="docutils literal notranslate"><span class="pre">ruby_load</span></code> command. [GitHub#1172][Patched by Anthony M. Cook]</p>
<ul class="simple">
<li><p>Because this command has already deleted.</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="install/debian.html"><span class="doc">Debian GNU/Linux</span></a>] Added support for Debian 11(Bullseye).</p></li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] Added support for <code class="docutils literal notranslate"><span class="pre">--post_filter</span></code>.</p>
<ul>
<li><p>We can use <code class="docutils literal notranslate"><span class="pre">post_filter</span></code> to filter by <code class="docutils literal notranslate"><span class="pre">filtered</span></code> stage dynamic columns as below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Items</span> <span class="n">TABLE_NO_KEY</span>
<span class="n">column_create</span> <span class="n">Items</span> <span class="n">price</span> <span class="n">COLUMN_SCALAR</span> <span class="n">UInt32</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Items</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;price&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;price&quot;</span><span class="p">:</span> <span class="mi">150</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;price&quot;</span><span class="p">:</span> <span class="mi">200</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;price&quot;</span><span class="p">:</span> <span class="mi">250</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;price&quot;</span><span class="p">:</span> <span class="mi">300</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">select</span> <span class="n">Items</span> \
  <span class="o">--</span><span class="nb">filter</span> <span class="s2">&quot;price &gt;= 150&quot;</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">price_with_tax</span><span class="p">]</span><span class="o">.</span><span class="n">stage</span> <span class="n">filtered</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">price_with_tax</span><span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="n">UInt32</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">price_with_tax</span><span class="p">]</span><span class="o">.</span><span class="n">flags</span> <span class="n">COLUMN_SCALAR</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">price_with_tax</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="s2">&quot;price * 1.1&quot;</span> \
  <span class="o">--</span><span class="n">post_filter</span> <span class="s2">&quot;price_with_tax &lt;= 250&quot;</span>
<span class="p">[</span>
  <span class="p">[</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mf">0.0</span><span class="p">,</span>
    <span class="mf">0.0</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="p">[</span>
      <span class="p">[</span>
        <span class="mi">2</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="p">[</span>
          <span class="s2">&quot;_id&quot;</span><span class="p">,</span>
          <span class="s2">&quot;UInt32&quot;</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;price_with_tax&quot;</span><span class="p">,</span>
          <span class="s2">&quot;UInt32&quot;</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;price&quot;</span><span class="p">,</span>
          <span class="s2">&quot;UInt32&quot;</span>
        <span class="p">]</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">2</span><span class="p">,</span>
        <span class="mi">165</span><span class="p">,</span>
        <span class="mi">150</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">3</span><span class="p">,</span>
        <span class="mi">220</span><span class="p">,</span>
        <span class="mi">200</span>
      <span class="p">]</span>
    <span class="p">]</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] Added support for <code class="docutils literal notranslate"><span class="pre">--slices[].post_filter</span></code>.</p>
<ul>
<li><p>We can use <code class="docutils literal notranslate"><span class="pre">post_filter</span></code> to filter by <code class="docutils literal notranslate"><span class="pre">--slices[].filter</span></code> as below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Items</span> <span class="n">TABLE_NO_KEY</span>
<span class="n">column_create</span> <span class="n">Items</span> <span class="n">price</span> <span class="n">COLUMN_SCALAR</span> <span class="n">UInt32</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Items</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;price&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;price&quot;</span><span class="p">:</span> <span class="mi">200</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;price&quot;</span><span class="p">:</span> <span class="mi">300</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;price&quot;</span><span class="p">:</span> <span class="mi">1000</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;price&quot;</span><span class="p">:</span> <span class="mi">2000</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;price&quot;</span><span class="p">:</span> <span class="mi">3000</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">select</span> <span class="n">Items</span> \
  <span class="o">--</span><span class="n">slices</span><span class="p">[</span><span class="n">expensive</span><span class="p">]</span><span class="o">.</span><span class="n">filter</span> <span class="s1">&#39;price &gt;= 1000&#39;</span> \
  <span class="o">--</span><span class="n">slices</span><span class="p">[</span><span class="n">expensive</span><span class="p">]</span><span class="o">.</span><span class="n">post_filter</span> <span class="s1">&#39;price &lt; 3000&#39;</span>
<span class="p">[</span>
  <span class="p">[</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mf">0.0</span><span class="p">,</span>
    <span class="mf">0.0</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="p">[</span>
      <span class="p">[</span>
        <span class="mi">6</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="p">[</span>
          <span class="s2">&quot;_id&quot;</span><span class="p">,</span>
          <span class="s2">&quot;UInt32&quot;</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;price&quot;</span><span class="p">,</span>
          <span class="s2">&quot;UInt32&quot;</span>
        <span class="p">]</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">1</span><span class="p">,</span>
        <span class="mi">100</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">2</span><span class="p">,</span>
        <span class="mi">200</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">3</span><span class="p">,</span>
        <span class="mi">300</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">4</span><span class="p">,</span>
        <span class="mi">1000</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">5</span><span class="p">,</span>
        <span class="mi">2000</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">6</span><span class="p">,</span>
        <span class="mi">3000</span>
      <span class="p">]</span>
    <span class="p">],</span>
    <span class="p">{</span>
      <span class="s2">&quot;expensive&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">[</span>
          <span class="mi">2</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="p">[</span>
            <span class="s2">&quot;_id&quot;</span><span class="p">,</span>
            <span class="s2">&quot;UInt32&quot;</span>
          <span class="p">],</span>
          <span class="p">[</span>
            <span class="s2">&quot;price&quot;</span><span class="p">,</span>
            <span class="s2">&quot;UInt32&quot;</span>
          <span class="p">]</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="mi">4</span><span class="p">,</span>
          <span class="mi">1000</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="mi">5</span><span class="p">,</span>
          <span class="mi">2000</span>
        <span class="p">]</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] Added support for describing expression into <code class="docutils literal notranslate"><span class="pre">--sort_keys</span></code>.</p>
<ul>
<li><p>We can describe the expression into <code class="docutils literal notranslate"><span class="pre">--sort_keys</span></code>.</p>
<ul class="simple">
<li><p>If nonexistent keys into expression as a <code class="docutils literal notranslate"><span class="pre">--sort_keys</span></code>, they are ignored and outputted warns into a log.</p></li>
</ul>
</li>
<li><p>By this, for example, we can specify a value of an element of <code class="docutils literal notranslate"><span class="pre">VECTOR</span> <span class="pre">COLUMN</span></code> to <code class="docutils literal notranslate"><span class="pre">--sort_keys</span></code>. And we can sort a result with it.</p></li>
<li><p>We can sort a result with an element of <code class="docutils literal notranslate"><span class="pre">VECTOR</span> <span class="pre">COLUMN</span></code> even if the before version by using dynamic column.
However, we can sort a result with an element of <code class="docutils literal notranslate"><span class="pre">VECTOR</span> <span class="pre">COLUMN</span></code> without using dynamic column by this feature.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Values</span> <span class="n">TABLE_NO_KEY</span>
<span class="n">column_create</span> <span class="n">Values</span> <span class="n">numbers</span> <span class="n">COLUMN_VECTOR</span> <span class="n">Int32</span>
<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Values</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;numbers&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">127</span><span class="p">,</span> <span class="mi">128</span><span class="p">,</span> <span class="mi">129</span><span class="p">]},</span>
<span class="p">{</span><span class="s2">&quot;numbers&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">126</span><span class="p">,</span> <span class="mi">255</span><span class="p">]},</span>
<span class="p">{</span><span class="s2">&quot;numbers&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">128</span><span class="p">,</span> <span class="o">-</span><span class="mi">254</span><span class="p">]}</span>
<span class="p">]</span>
<span class="n">select</span> <span class="n">Values</span> <span class="o">--</span><span class="n">sort_keys</span> <span class="s1">&#39;numbers[1]&#39;</span> <span class="o">--</span><span class="n">output_columns</span> <span class="n">numbers</span>
<span class="p">[</span>
  <span class="p">[</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mf">0.0</span><span class="p">,</span>
    <span class="mf">0.0</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="p">[</span>
      <span class="p">[</span>
        <span class="mi">3</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="p">[</span>
          <span class="s2">&quot;numbers&quot;</span><span class="p">,</span>
          <span class="s2">&quot;Int32&quot;</span>
        <span class="p">]</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="p">[</span>
          <span class="mi">128</span><span class="p">,</span>
          <span class="o">-</span><span class="mi">254</span>
        <span class="p">]</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="p">[</span>
          <span class="mi">127</span><span class="p">,</span>
          <span class="mi">128</span><span class="p">,</span>
          <span class="mi">129</span>
        <span class="p">]</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="p">[</span>
          <span class="mi">126</span><span class="p">,</span>
          <span class="mi">255</span>
        <span class="p">]</span>
      <span class="p">]</span>
    <span class="p">]</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/token_filters.html"><span class="doc">Token filters</span></a>] Added support for multiple token filters with options.</p>
<ul class="simple">
<li><p>We can specify multiple token filters with options like <code class="docutils literal notranslate"><span class="pre">--token_filters</span> <span class="pre">'TokenFilterStopWord(&quot;column&quot;,</span> <span class="pre">&quot;ignore&quot;),</span> <span class="pre">TokenFilterNFKC130(&quot;unify_kana&quot;,</span> <span class="pre">true)'</span></code>. [Github#mroonga/mroonga#399][Reported by MASUDA Kazuhiro]</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/functions/query.html"><span class="doc">query</span></a>] Added support a dynamic column of <code class="docutils literal notranslate"><span class="pre">result_set</span></code> stage with complex expression.</p>
<ul>
<li><p>Complex expression is that it needs temporary result sets internally like a following expression.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;(true &amp;&amp; query(&quot;name * 10&quot;, &quot;ali&quot;, {&quot;score_column&quot;: &quot;ali_score&quot;})) || </span><span class="se">\</span>
<span class="s1"> (true &amp;&amp; query(&quot;name * 2&quot;, &quot;li&quot;, {&quot;score_column&quot;: &quot;li_score&quot;}))&#39;</span>
</pre></div>
</div>
<ul>
<li><p>In the above expressions, the temporary result sets are used to store the result of evaluating the <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p></li>
<li><p>Therefore, for example, in the following expression, we can use a value of dynamic column of <code class="docutils literal notranslate"><span class="pre">result_set</span></code> stage in expression. Because temporary result sets internally are needless as below expression.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;(query(&quot;name * 10&quot;, &quot;ali&quot;, {&quot;score_column&quot;: &quot;ali_score&quot;})) || </span><span class="se">\</span>
<span class="s1"> (query(&quot;name * 2&quot;, &quot;li&quot;, {&quot;score_column&quot;: &quot;li_score&quot;}))&#39;</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>In this release, for example, we can set a value to <code class="docutils literal notranslate"><span class="pre">li_score</span></code> as below. (The value of <code class="docutils literal notranslate"><span class="pre">li_score</span></code> had been <code class="docutils literal notranslate"><span class="pre">0</span></code> in before version. Because the second expression could not get dynamic column.)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Users</span> <span class="n">TABLE_NO_KEY</span>
<span class="n">column_create</span> <span class="n">Users</span> <span class="n">name</span> <span class="n">COLUMN_SCALAR</span> <span class="n">ShortText</span>

<span class="n">table_create</span> <span class="n">Lexicon</span> <span class="n">TABLE_HASH_KEY</span> <span class="n">ShortText</span> \
  <span class="o">--</span><span class="n">default_tokenizer</span> <span class="n">TokenBigramSplitSymbolAlphaDigit</span> \
  <span class="o">--</span><span class="n">normalizer</span> <span class="n">NormalizerAuto</span>
<span class="n">column_create</span> <span class="n">Lexicon</span> <span class="n">users_name</span> <span class="n">COLUMN_INDEX</span><span class="o">|</span><span class="n">WITH_POSITION</span> <span class="n">Users</span> <span class="n">name</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Users</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Alice&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Alisa&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Bob&quot;</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">select</span> <span class="n">Users</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">ali_score</span><span class="p">]</span><span class="o">.</span><span class="n">stage</span> <span class="n">result_set</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">ali_score</span><span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="n">Float</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">ali_score</span><span class="p">]</span><span class="o">.</span><span class="n">flags</span> <span class="n">COLUMN_SCALAR</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">li_score</span><span class="p">]</span><span class="o">.</span><span class="n">stage</span> <span class="n">result_set</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">li_score</span><span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="n">Float</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">li_score</span><span class="p">]</span><span class="o">.</span><span class="n">flags</span> <span class="n">COLUMN_SCALAR</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="n">name</span><span class="p">,</span><span class="n">_score</span><span class="p">,</span><span class="n">ali_score</span><span class="p">,</span><span class="n">li_score</span> \
  <span class="o">--</span><span class="nb">filter</span> <span class="s1">&#39;(true &amp;&amp; query(&quot;name * 10&quot;, &quot;ali&quot;, {&quot;score_column&quot;: &quot;ali_score&quot;})) || </span><span class="se">\</span>
<span class="s1">            (true &amp;&amp; query(&quot;name * 2&quot;, &quot;li&quot;, {&quot;score_column&quot;: &quot;li_score&quot;}))&#39;</span>
<span class="p">[</span>
  <span class="p">[</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mf">0.0</span><span class="p">,</span>
    <span class="mf">0.0</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="p">[</span>
      <span class="p">[</span>
        <span class="mi">2</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="p">[</span>
          <span class="s2">&quot;name&quot;</span><span class="p">,</span>
          <span class="s2">&quot;ShortText&quot;</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;_score&quot;</span><span class="p">,</span>
          <span class="s2">&quot;Int32&quot;</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;ali_score&quot;</span><span class="p">,</span>
          <span class="s2">&quot;Float&quot;</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;li_score&quot;</span><span class="p">,</span>
          <span class="s2">&quot;Float&quot;</span>
        <span class="p">]</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="s2">&quot;Alice&quot;</span><span class="p">,</span>
        <span class="mi">14</span><span class="p">,</span>
        <span class="mf">10.0</span><span class="p">,</span>
        <span class="mf">2.0</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="s2">&quot;Alisa&quot;</span><span class="p">,</span>
        <span class="mi">14</span><span class="p">,</span>
        <span class="mf">10.0</span><span class="p">,</span>
        <span class="mf">2.0</span>
      <span class="p">]</span>
    <span class="p">]</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
</li>
<li><p>We also supported a dynamic vector column of <code class="docutils literal notranslate"><span class="pre">result_set</span></code> stage as below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Users</span> <span class="n">TABLE_NO_KEY</span>
<span class="n">column_create</span> <span class="n">Users</span> <span class="n">name</span> <span class="n">COLUMN_SCALAR</span> <span class="n">ShortText</span>

<span class="n">table_create</span> <span class="n">Lexicon</span> <span class="n">TABLE_HASH_KEY</span> <span class="n">ShortText</span> \
  <span class="o">--</span><span class="n">default_tokenizer</span> <span class="n">TokenBigramSplitSymbolAlphaDigit</span> \
  <span class="o">--</span><span class="n">normalizer</span> <span class="n">NormalizerAuto</span>
<span class="n">column_create</span> <span class="n">Lexicon</span> <span class="n">users_name</span> <span class="n">COLUMN_INDEX</span><span class="o">|</span><span class="n">WITH_POSITION</span> <span class="n">Users</span> <span class="n">name</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Users</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Alice&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Alisa&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Bob&quot;</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">select</span> <span class="n">Users</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">tags</span><span class="p">]</span><span class="o">.</span><span class="n">stage</span> <span class="n">result_set</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">tags</span><span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="n">ShortText</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">tags</span><span class="p">]</span><span class="o">.</span><span class="n">flags</span> <span class="n">COLUMN_VECTOR</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="n">name</span><span class="p">,</span><span class="n">tags</span> \
  <span class="o">--</span><span class="nb">filter</span> <span class="s1">&#39;(true &amp;&amp; query(&quot;name&quot;, &quot;al&quot;, {&quot;tags&quot;: [&quot;al&quot;], &quot;tags_column&quot;: &quot;tags&quot;})) || </span><span class="se">\</span>
<span class="s1">            (true &amp;&amp; query(&quot;name&quot;, &quot;sa&quot;, {&quot;tags&quot;: [&quot;sa&quot;], &quot;tags_column&quot;: &quot;tags&quot;}))&#39;</span>
<span class="p">[</span>
  <span class="p">[</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mf">0.0</span><span class="p">,</span>
    <span class="mf">0.0</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="p">[</span>
      <span class="p">[</span>
        <span class="mi">2</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="p">[</span>
          <span class="s2">&quot;name&quot;</span><span class="p">,</span>
          <span class="s2">&quot;ShortText&quot;</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;tags&quot;</span><span class="p">,</span>
          <span class="s2">&quot;ShortText&quot;</span>
        <span class="p">]</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="s2">&quot;Alice&quot;</span><span class="p">,</span>
        <span class="p">[</span>
          <span class="s2">&quot;al&quot;</span>
        <span class="p">]</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="s2">&quot;Alisa&quot;</span><span class="p">,</span>
        <span class="p">[</span>
          <span class="s2">&quot;al&quot;</span><span class="p">,</span>
          <span class="s2">&quot;sa&quot;</span>
        <span class="p">]</span>
      <span class="p">]</span>
    <span class="p">]</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
<ul class="simple">
<li><p>If we use a dynamic vector column, the storing values are appended values of each element.</p></li>
</ul>
</li>
</ul>
</li>
<li><p>[<a class="reference internal" href="install/ubuntu.html"><span class="doc">Ubuntu</span></a>] Added support for Ubuntu 21.04 (Hirsute Hippo).</p></li>
<li><p>[httpd] Updated bundled nginx to 1.19.10.</p></li>
</ul>
</div>
<div class="section" id="id47">
<h2>Known Issues<a class="headerlink" href="#id47" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Currently, Groonga has a bug that there is possible that data is corrupt when we execute many additions, delete, and update data to vector column.</p></li>
<li><p>[The browser based administration tool] Currently, Groonga has a bug that a search query that is inputted to non-administration mode is sent even if we input checks to the checkbox for the administration mode of a record list. [Github#1186][Reported by poti]</p></li>
</ul>
</div>
<div class="section" id="id48">
<h2>Thanks<a class="headerlink" href="#id48" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Anthony M. Cook</p></li>
<li><p>MASUDA Kazuhiro</p></li>
<li><p>poti</p></li>
</ul>
</div>
</div>
<div class="section" id="release-11-0-1-2021-03-31">
<span id="release-11-0-1"></span><h1>Release 11.0.1 - 2021-03-31<a class="headerlink" href="#release-11-0-1-2021-03-31" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id49">
<h2>Improvements<a class="headerlink" href="#id49" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>[<a class="reference internal" href="install/debian.html"><span class="doc">Debian GNU/Linux</span></a>] Added support for a ARM64 package.</p></li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] Added support for customizing adjust weight every key word.</p>
<ul class="simple">
<li><p>We need to specify <code class="docutils literal notranslate"><span class="pre">&lt;</span></code> or <code class="docutils literal notranslate"><span class="pre">&gt;</span></code> to all keywords to adjust scores until now.
Because the default adjustment of weight (6 or 4) is larger than the default score (1).</p>
<ul>
<li><p>Therefore, for example, “A“‘s weight is 1 and “B“‘s weight is 4 in <code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">&lt;B</span></code>.
Decremented “B“‘s weight (4) is larger than not decremented “A“‘s weight (1).
This is not works as expected.
we need to specify <code class="docutils literal notranslate"><span class="pre">&gt;A</span> <span class="pre">&lt;B</span></code> to use smaller weight than “A” for “B”.
“A“‘s weight is 6 and “B“‘s weight is 4 in <code class="docutils literal notranslate"><span class="pre">&gt;A</span> <span class="pre">&lt;B</span></code>.</p></li>
</ul>
</li>
<li><p>We can customize adjustment of weight every key word by only specifying <code class="docutils literal notranslate"><span class="pre">&lt;${WEIGHT}</span></code> or <code class="docutils literal notranslate"><span class="pre">&gt;${WEIGHT}</span></code> to target keywords since this release.
For example, “A“‘s weight is 1 and “B“‘s weight is 0.9 in <code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">&lt;0.1B</span></code> (“B“‘s weight decrement 0.1).</p></li>
<li><p>However, note that these forms ( <code class="docutils literal notranslate"><span class="pre">&gt;${WEIGHT}...</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;${WEIGHT}...</span></code>, and <code class="docutils literal notranslate"><span class="pre">~${WEIGHT}...</span></code> ) are incompatible.</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] Added support for outputting <code class="docutils literal notranslate"><span class="pre">Float</span></code> and <code class="docutils literal notranslate"><span class="pre">Float32</span></code> value in Apache Arrow format.</p>
<ul class="simple">
<li><p>For example, Groonga output as below.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Data</span> <span class="n">TABLE_NO_KEY</span>
<span class="n">column_create</span> <span class="n">Data</span> <span class="nb">float</span> <span class="n">COLUMN_SCALAR</span> <span class="n">Float</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Data</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;float&quot;</span><span class="p">:</span> <span class="mf">1.1</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">select</span> <span class="n">Data</span> \
  <span class="o">--</span><span class="n">command_version</span> <span class="mi">3</span> \
  <span class="o">--</span><span class="n">output_type</span> <span class="n">apache</span><span class="o">-</span><span class="n">arrow</span>

  <span class="n">return_code</span><span class="p">:</span> <span class="n">int32</span>
  <span class="n">start_time</span><span class="p">:</span> <span class="n">timestamp</span><span class="p">[</span><span class="n">ns</span><span class="p">]</span>
  <span class="n">elapsed_time</span><span class="p">:</span> <span class="n">double</span>
  <span class="o">--</span> <span class="n">metadata</span> <span class="o">--</span>
  <span class="n">GROONGA</span><span class="p">:</span><span class="n">data_type</span><span class="p">:</span> <span class="n">metadata</span>
   <span class="n">return_code</span>                    <span class="n">start_time</span>       <span class="n">elapsed_time</span>
  <span class="mi">0</span>                  <span class="mi">0</span>     <span class="mi">1970</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="n">T09</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="o">+</span><span class="mi">09</span><span class="p">:</span><span class="mi">00</span>           <span class="mf">0.000000</span>
  <span class="o">========================================</span>
  <span class="n">_id</span><span class="p">:</span> <span class="n">uint32</span>
  <span class="nb">float</span><span class="p">:</span> <span class="n">double</span>
  <span class="o">--</span> <span class="n">metadata</span> <span class="o">--</span>
  <span class="n">GROONGA</span><span class="p">:</span><span class="n">n_hits</span><span class="p">:</span> <span class="mi">1</span>
   <span class="n">_id</span>          <span class="nb">float</span>
  <span class="mi">0</span>          <span class="mi">1</span>       <span class="mf">1.100000</span>
</pre></div>
</div>
</li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] Added support for getting a reference destination data via index column when we output a result.</p>
<ul>
<li><p>Until now, Groonga had returned involuntary value when we specified output value like <code class="docutils literal notranslate"><span class="pre">index_column.xxx</span></code>.
For example, A value of <code class="docutils literal notranslate"><span class="pre">--columns[tags].value</span> <span class="pre">purchases.tag</span></code> was <code class="docutils literal notranslate"><span class="pre">[&quot;apple&quot;,[&quot;many&quot;]],[&quot;banana&quot;,[&quot;man&quot;]],[&quot;cacao&quot;,[&quot;man&quot;]]</span></code> in the following example. In this case, the expected values was <code class="docutils literal notranslate"><span class="pre">[&quot;apple&quot;,[&quot;man&quot;,&quot;many&quot;]],[&quot;banana&quot;,[&quot;man&quot;]],[&quot;cacao&quot;,[&quot;woman&quot;]]</span></code>.
In this release, we can get a correct reference destination data via index column as below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Products</span> <span class="n">TABLE_PAT_KEY</span> <span class="n">ShortText</span>

<span class="n">table_create</span> <span class="n">Purchases</span> <span class="n">TABLE_NO_KEY</span>
<span class="n">column_create</span> <span class="n">Purchases</span> <span class="n">product</span> <span class="n">COLUMN_SCALAR</span> <span class="n">Products</span>
<span class="n">column_create</span> <span class="n">Purchases</span> <span class="n">tag</span> <span class="n">COLUMN_SCALAR</span> <span class="n">ShortText</span>

<span class="n">column_create</span> <span class="n">Products</span> <span class="n">purchases</span> <span class="n">COLUMN_INDEX</span> <span class="n">Purchases</span> <span class="n">product</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Products</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;apple&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;banana&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;cacao&quot;</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Purchases</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;product&quot;</span><span class="p">:</span> <span class="s2">&quot;apple&quot;</span><span class="p">,</span>  <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="s2">&quot;man&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;product&quot;</span><span class="p">:</span> <span class="s2">&quot;banana&quot;</span><span class="p">,</span> <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="s2">&quot;man&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;product&quot;</span><span class="p">:</span> <span class="s2">&quot;cacao&quot;</span><span class="p">,</span>  <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="s2">&quot;woman&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;product&quot;</span><span class="p">:</span> <span class="s2">&quot;apple&quot;</span><span class="p">,</span>  <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="s2">&quot;many&quot;</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">select</span> <span class="n">Products</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">tags</span><span class="p">]</span><span class="o">.</span><span class="n">stage</span> <span class="n">output</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">tags</span><span class="p">]</span><span class="o">.</span><span class="n">flags</span> <span class="n">COLUMN_VECTOR</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">tags</span><span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="n">ShortText</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">tags</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="n">purchases</span><span class="o">.</span><span class="n">tag</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="n">_key</span><span class="p">,</span><span class="n">tags</span>
<span class="p">[</span>
  <span class="p">[</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mf">0.0</span><span class="p">,</span>
    <span class="mf">0.0</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="p">[</span>
      <span class="p">[</span>
        <span class="mi">3</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="p">[</span>
          <span class="s2">&quot;_key&quot;</span><span class="p">,</span>
          <span class="s2">&quot;ShortText&quot;</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;tags&quot;</span><span class="p">,</span>
          <span class="s2">&quot;ShortText&quot;</span>
        <span class="p">]</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="s2">&quot;apple&quot;</span><span class="p">,</span>
        <span class="p">[</span>
          <span class="s2">&quot;man&quot;</span><span class="p">,</span>
          <span class="s2">&quot;many&quot;</span>
        <span class="p">]</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="s2">&quot;banana&quot;</span><span class="p">,</span>
        <span class="p">[</span>
          <span class="s2">&quot;man&quot;</span>
        <span class="p">]</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="s2">&quot;cacao&quot;</span><span class="p">,</span>
        <span class="p">[</span>
          <span class="s2">&quot;woman&quot;</span>
        <span class="p">]</span>
      <span class="p">]</span>
    <span class="p">]</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] Added support for specifying index column directly as a part of nested index.</p>
<ul>
<li><p>We can search source table after filtering by using <code class="docutils literal notranslate"><span class="pre">index_column.except_source_column</span></code>.
For example, we specify <code class="docutils literal notranslate"><span class="pre">comments.content</span></code> when searching in the following example.
In this case, at first, this query execute full text search from <code class="docutils literal notranslate"><span class="pre">content</span></code> column of <code class="docutils literal notranslate"><span class="pre">Commentts</span></code> table, then fetch the records of Articles table which refers to already searched records of Comments table.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Articles</span> <span class="n">TABLE_HASH_KEY</span> <span class="n">ShortText</span>

<span class="n">table_create</span> <span class="n">Comments</span> <span class="n">TABLE_NO_KEY</span>
<span class="n">column_create</span> <span class="n">Comments</span> <span class="n">article</span> <span class="n">COLUMN_SCALAR</span> <span class="n">Articles</span>
<span class="n">column_create</span> <span class="n">Comments</span> <span class="n">content</span> <span class="n">COLUMN_SCALAR</span> <span class="n">ShortText</span>

<span class="n">column_create</span> <span class="n">Articles</span> <span class="n">content</span> <span class="n">COLUMN_SCALAR</span> <span class="n">Text</span>
<span class="n">column_create</span> <span class="n">Articles</span> <span class="n">comments</span> <span class="n">COLUMN_INDEX</span> <span class="n">Comments</span> <span class="n">article</span>

<span class="n">table_create</span> <span class="n">Terms</span> <span class="n">TABLE_PAT_KEY</span> <span class="n">ShortText</span> \
  <span class="o">--</span><span class="n">default_tokenizer</span> <span class="n">TokenBigram</span> \
  <span class="o">--</span><span class="n">normalizer</span> <span class="n">NormalizerNFKC130</span>
<span class="n">column_create</span> <span class="n">Terms</span> <span class="n">articles_content</span> <span class="n">COLUMN_INDEX</span><span class="o">|</span><span class="n">WITH_POSITION</span> \
  <span class="n">Articles</span> <span class="n">content</span>
<span class="n">column_create</span> <span class="n">Terms</span> <span class="n">comments_content</span> <span class="n">COLUMN_INDEX</span><span class="o">|</span><span class="n">WITH_POSITION</span> \
  <span class="n">Comments</span> <span class="n">content</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Articles</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;article-1&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;Groonga is fast!&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;article-2&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;Groonga is useful!&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;article-3&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;Mroonga is fast!&quot;</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Comments</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;article&quot;</span><span class="p">:</span> <span class="s2">&quot;article-1&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;I&#39;m using Groonga too!&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;article&quot;</span><span class="p">:</span> <span class="s2">&quot;article-3&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;I&#39;m using Mroonga!&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;article&quot;</span><span class="p">:</span> <span class="s2">&quot;article-1&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;I&#39;m using PGroonga!&quot;</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">select</span> <span class="n">Articles</span> <span class="o">--</span><span class="n">match_columns</span> <span class="n">comments</span><span class="o">.</span><span class="n">content</span> <span class="o">--</span><span class="n">query</span> <span class="n">groonga</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="s2">&quot;_key, _score, comments.content</span>
<span class="p">[</span>
  <span class="p">[</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mf">0.0</span><span class="p">,</span>
    <span class="mf">0.0</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="p">[</span>
      <span class="p">[</span>
        <span class="mi">1</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="p">[</span>
          <span class="s2">&quot;_key&quot;</span><span class="p">,</span>
          <span class="s2">&quot;ShortText&quot;</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;_score&quot;</span><span class="p">,</span>
          <span class="s2">&quot;Int32&quot;</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;comments.content&quot;</span><span class="p">,</span>
          <span class="s2">&quot;ShortText&quot;</span>
        <span class="p">]</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="s2">&quot;article-1&quot;</span><span class="p">,</span>
        <span class="mi">1</span><span class="p">,</span>
        <span class="p">[</span>
          <span class="s2">&quot;I&#39;m using Groonga too!&quot;</span><span class="p">,</span>
          <span class="s2">&quot;I&#39;m using PGroonga!&quot;</span>
        <span class="p">]</span>
      <span class="p">]</span>
    <span class="p">]</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/load.html"><span class="doc">load</span></a>] Added support for loading reference vector with inline object literal.</p>
<ul>
<li><p>For example, we can load data like <code class="docutils literal notranslate"><span class="pre">&quot;key&quot;</span> <span class="pre">:</span> <span class="pre">&quot;[</span> <span class="pre">{</span> <span class="pre">&quot;key&quot;</span> <span class="pre">:</span> <span class="pre">&quot;value&quot;,</span> <span class="pre">...,</span> <span class="pre">&quot;key&quot;</span> <span class="pre">:</span> <span class="pre">&quot;value&quot;</span> <span class="pre">}</span> <span class="pre">]&quot;</span></code> as below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Purchases</span> <span class="n">TABLE_NO_KEY</span>
<span class="n">column_create</span> <span class="n">Purchases</span> <span class="n">item</span> <span class="n">COLUMN_SCALAR</span> <span class="n">ShortText</span>
<span class="n">column_create</span> <span class="n">Purchases</span> <span class="n">price</span> <span class="n">COLUMN_SCALAR</span> <span class="n">UInt32</span>

<span class="n">table_create</span> <span class="n">Settlements</span> <span class="n">TABLE_HASH_KEY</span> <span class="n">ShortText</span>
<span class="n">column_create</span> <span class="n">Settlements</span> <span class="n">purchases</span> <span class="n">COLUMN_VECTOR</span> <span class="n">Purchases</span>
<span class="n">column_create</span> <span class="n">Purchases</span> <span class="n">settlements_purchases</span> <span class="n">COLUMN_INDEX</span> <span class="n">Settlements</span> <span class="n">purchases</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Settlements</span>
<span class="p">[</span>
<span class="p">{</span>
  <span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;super market&quot;</span><span class="p">,</span>
  <span class="s2">&quot;purchases&quot;</span><span class="p">:</span> <span class="p">[</span>
     <span class="p">{</span><span class="s2">&quot;item&quot;</span><span class="p">:</span> <span class="s2">&quot;apple&quot;</span><span class="p">,</span> <span class="s2">&quot;price&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">},</span>
     <span class="p">{</span><span class="s2">&quot;item&quot;</span><span class="p">:</span> <span class="s2">&quot;milk&quot;</span><span class="p">,</span>  <span class="s2">&quot;price&quot;</span><span class="p">:</span> <span class="mi">200</span><span class="p">}</span>
  <span class="p">]</span>
<span class="p">},</span>
<span class="p">{</span>
  <span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;shoes shop&quot;</span><span class="p">,</span>
  <span class="s2">&quot;purchases&quot;</span><span class="p">:</span> <span class="p">[</span>
     <span class="p">{</span><span class="s2">&quot;item&quot;</span><span class="p">:</span> <span class="s2">&quot;sneakers&quot;</span><span class="p">,</span> <span class="s2">&quot;price&quot;</span><span class="p">:</span> <span class="mi">3000</span><span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</li>
<li><p>It makes easier to add JSON data into reference columns by this feature.</p></li>
<li><p>Currently, this feature only support with JSON input.</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/load.html"><span class="doc">load</span></a>] Added support for loading reference vector from JSON text.</p>
<ul>
<li><p>We can load data to reference vector from source table with JSON text as below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Purchases</span> <span class="n">TABLE_HASH_KEY</span> <span class="n">ShortText</span>
<span class="n">column_create</span> <span class="n">Purchases</span> <span class="n">item</span> <span class="n">COLUMN_SCALAR</span> <span class="n">ShortText</span>
<span class="n">column_create</span> <span class="n">Purchases</span> <span class="n">price</span> <span class="n">COLUMN_SCALAR</span> <span class="n">UInt32</span>

<span class="n">table_create</span> <span class="n">Settlements</span> <span class="n">TABLE_HASH_KEY</span> <span class="n">ShortText</span>
<span class="n">column_create</span> <span class="n">Settlements</span> <span class="n">purchases</span> <span class="n">COLUMN_VECTOR</span> <span class="n">Purchases</span>

<span class="n">column_create</span> <span class="n">Purchases</span> <span class="n">settlements_purchases</span> <span class="n">COLUMN_INDEX</span> <span class="n">Settlements</span> <span class="n">purchases</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Settlements</span>
<span class="p">[</span>
<span class="p">{</span>
  <span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;super market&quot;</span><span class="p">,</span>
  <span class="s2">&quot;purchases&quot;</span><span class="p">:</span> <span class="s2">&quot;[{</span><span class="se">\&quot;</span><span class="s2">_key</span><span class="se">\&quot;</span><span class="s2">: </span><span class="se">\&quot;</span><span class="s2">super market-1</span><span class="se">\&quot;</span><span class="s2">, </span><span class="se">\&quot;</span><span class="s2">item</span><span class="se">\&quot;</span><span class="s2">: </span><span class="se">\&quot;</span><span class="s2">apple</span><span class="se">\&quot;</span><span class="s2">, </span><span class="se">\&quot;</span><span class="s2">price</span><span class="se">\&quot;</span><span class="s2">: 100}, {</span><span class="se">\&quot;</span><span class="s2">_key</span><span class="se">\&quot;</span><span class="s2">: </span><span class="se">\&quot;</span><span class="s2">super market-2</span><span class="se">\&quot;</span><span class="s2">, </span><span class="se">\&quot;</span><span class="s2">item</span><span class="se">\&quot;</span><span class="s2">: </span><span class="se">\&quot;</span><span class="s2">milk</span><span class="se">\&quot;</span><span class="s2">,  </span><span class="se">\&quot;</span><span class="s2">price</span><span class="se">\&quot;</span><span class="s2">: 200}]&quot;</span>
<span class="p">},</span>
<span class="p">{</span>
  <span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;shoes shop&quot;</span><span class="p">,</span>
  <span class="s2">&quot;purchases&quot;</span><span class="p">:</span> <span class="s2">&quot;[{</span><span class="se">\&quot;</span><span class="s2">_key</span><span class="se">\&quot;</span><span class="s2">: </span><span class="se">\&quot;</span><span class="s2">shoes shop-1</span><span class="se">\&quot;</span><span class="s2">, </span><span class="se">\&quot;</span><span class="s2">item</span><span class="se">\&quot;</span><span class="s2">: </span><span class="se">\&quot;</span><span class="s2">sneakers</span><span class="se">\&quot;</span><span class="s2">, </span><span class="se">\&quot;</span><span class="s2">price</span><span class="se">\&quot;</span><span class="s2">: 3000}]&quot;</span>
<span class="p">}</span>
<span class="p">]</span>

<span class="n">dump</span> \
  <span class="o">--</span><span class="n">dump_plugins</span> <span class="n">no</span> \
  <span class="o">--</span><span class="n">dump_schema</span> <span class="n">no</span>
<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Purchases</span>
<span class="p">[</span>
<span class="p">[</span><span class="s2">&quot;_key&quot;</span><span class="p">,</span><span class="s2">&quot;item&quot;</span><span class="p">,</span><span class="s2">&quot;price&quot;</span><span class="p">],</span>
<span class="p">[</span><span class="s2">&quot;super market-1&quot;</span><span class="p">,</span><span class="s2">&quot;apple&quot;</span><span class="p">,</span><span class="mi">100</span><span class="p">],</span>
<span class="p">[</span><span class="s2">&quot;super market-2&quot;</span><span class="p">,</span><span class="s2">&quot;milk&quot;</span><span class="p">,</span><span class="mi">200</span><span class="p">],</span>
<span class="p">[</span><span class="s2">&quot;shoes shop-1&quot;</span><span class="p">,</span><span class="s2">&quot;sneakers&quot;</span><span class="p">,</span><span class="mi">3000</span><span class="p">]</span>
<span class="p">]</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Settlements</span>
<span class="p">[</span>
<span class="p">[</span><span class="s2">&quot;_key&quot;</span><span class="p">,</span><span class="s2">&quot;purchases&quot;</span><span class="p">],</span>
<span class="p">[</span><span class="s2">&quot;super market&quot;</span><span class="p">,[</span><span class="s2">&quot;super market-1&quot;</span><span class="p">,</span><span class="s2">&quot;super market-2&quot;</span><span class="p">]],</span>
<span class="p">[</span><span class="s2">&quot;shoes shop&quot;</span><span class="p">,[</span><span class="s2">&quot;shoes shop-1&quot;</span><span class="p">]]</span>
<span class="p">]</span>

<span class="n">column_create</span> <span class="n">Purchases</span> <span class="n">settlements_purchases</span> <span class="n">COLUMN_INDEX</span> <span class="n">Settlements</span> <span class="n">purchases</span>
</pre></div>
</div>
</li>
<li><p>Currently, this feature doesn’t support nested reference record.</p></li>
</ul>
</li>
<li><p>[Windows] Added support for UNIX epoch for <code class="docutils literal notranslate"><span class="pre">time_classify_*</span></code> functions.</p>
<ul>
<li><p>Groonga handles timestamps on local time. Therefore, for example, if we input the UNIX epoch in Japan, inputting time is 9 hours behind the UNIX epoch.</p></li>
<li><p>The Windows API outputs an error when we input the time before the UNIX epoch.</p></li>
<li><p>We can use the UNIX epoch in <code class="docutils literal notranslate"><span class="pre">time_classify_*</span></code> functions as below in this release.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">plugin_register</span> <span class="n">functions</span><span class="o">/</span><span class="n">time</span>

<span class="n">table_create</span> <span class="n">Timestamps</span> <span class="n">TABLE_PAT_KEY</span> <span class="n">Time</span>
<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Timestamps</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-05-06 00:00:00.000001&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-05-06 23:59:59.999999&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-05-07 00:00:00.000000&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-05-07 00:00:00.000001&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-05-08 23:59:59.999999&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-05-08 00:00:00.000000&quot;</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">select</span> <span class="n">Timestamps</span> \
  <span class="o">--</span><span class="n">sortby</span> <span class="n">_id</span> \
  <span class="o">--</span><span class="n">limit</span> <span class="o">-</span><span class="mi">1</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="s1">&#39;_key, time_classify_day_of_week(_key)&#39;</span>
<span class="p">[</span>
  <span class="p">[</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mf">0.0</span><span class="p">,</span>
    <span class="mf">0.0</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="p">[</span>
      <span class="p">[</span>
        <span class="mi">7</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="p">[</span>
          <span class="s2">&quot;_key&quot;</span><span class="p">,</span>
          <span class="s2">&quot;Time&quot;</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;time_classify_day_of_week&quot;</span><span class="p">,</span>
          <span class="n">null</span>
        <span class="p">]</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mf">0.0</span><span class="p">,</span>
        <span class="mi">4</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mf">1462460400.000001</span><span class="p">,</span>
        <span class="mi">5</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mf">1462546799.999999</span><span class="p">,</span>
        <span class="mi">5</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mf">1462546800.0</span><span class="p">,</span>
        <span class="mi">6</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mf">1462546800.000001</span><span class="p">,</span>
        <span class="mi">6</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mf">1462719599.999999</span><span class="p">,</span>
        <span class="mi">0</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mf">1462633200.0</span><span class="p">,</span>
        <span class="mi">0</span>
      <span class="p">]</span>
    <span class="p">]</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/functions/query_parallel_or.html"><span class="doc">query_parallel_or</span></a>] Added a new function for processing queries in parallel.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">query_parallel_or</span></code> requires Apache Arrow for processing queries in parallel.
If it does not enable, <code class="docutils literal notranslate"><span class="pre">query_parallel_or</span></code> processes queries in sequence.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">query_parallel_or</span></code> processes combination of <code class="docutils literal notranslate"><span class="pre">match_columns</span></code> and <code class="docutils literal notranslate"><span class="pre">query_string</span></code> in parallel.</p></li>
<li><p>Syntax of <code class="docutils literal notranslate"><span class="pre">query_parallel_or</span></code> is as follow:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">query_parallel_or</span><span class="p">(</span><span class="n">match_columns</span><span class="p">,</span> <span class="n">query_string1</span><span class="p">,</span>
                                 <span class="n">query_string2</span><span class="p">,</span>
                                 <span class="o">.</span>
                                 <span class="o">.</span>
                                 <span class="o">.</span>
                                 <span class="n">query_stringN</span><span class="p">,</span>
                                 <span class="p">{</span><span class="s2">&quot;option&quot;</span><span class="p">:</span> <span class="s2">&quot;value&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">})</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] Added support for ignoring nonexistent sort keys.</p>
<ul class="simple">
<li><p>Groonga had been outputted error when we specified nonexistent sort keys until now.
However, Groonga ignore nonexistent sort keys since this release. (Groonga doesn’t output error.)</p></li>
<li><p>This feature implements for consistency.
Because we just ignore invalid values in <code class="docutils literal notranslate"><span class="pre">output_columns</span></code> and most of invalid values in <code class="docutils literal notranslate"><span class="pre">sort_keys</span></code>.</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] Added support for ignoring nonexistent tables in <code class="docutils literal notranslate"><span class="pre">drilldowns[].table</span></code>. [GitHub#1169][Reported by naoa]</p>
<ul class="simple">
<li><p>Groonga had been outputted error when we specified nonexistent tables in <code class="docutils literal notranslate"><span class="pre">drilldowns[].table</span></code> until now.
However, Groonga ignore nonexistent tables in <code class="docutils literal notranslate"><span class="pre">drilldowns[].table</span></code> since this release. (Groonga doesn’t output error.)</p></li>
<li><p>This feature implements for consistency.
Because we just ignore invalid values in <code class="docutils literal notranslate"><span class="pre">output_columns</span></code> and most of invalid values in <code class="docutils literal notranslate"><span class="pre">sort_keys</span></code>.</p></li>
</ul>
</li>
<li><p>[httpd] Updated bundled nginx to 1.19.8.</p></li>
</ul>
</div>
<div class="section" id="id50">
<h2>Fixes<a class="headerlink" href="#id50" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>[<a class="reference internal" href="reference/commands/reference_acquire.html"><span class="doc">reference_acquire</span></a>] Fixed a bug that Groonga crash when a table’s reference is acquired and a column is added to the table before auto release is happened.</p>
<ul>
<li><p>Because the added column’s reference isn’t acquired but it’s released on auto release.</p></li>
</ul>
</li>
<li><p>[Windows] Fixed a bug that one or more processes fail an output backtrace on SEGV when a new backtrace logging process starts when another backtrace logging process is running in another thread.</p></li>
</ul>
</div>
<div class="section" id="id51">
<h2>Known Issues<a class="headerlink" href="#id51" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Currently, Groonga has a bug that there is possible that data is corrupt when we execute many additions, delete, and update data to vector column.</p></li>
</ul>
</div>
<div class="section" id="id52">
<h2>Thanks<a class="headerlink" href="#id52" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>naoa</p></li>
</ul>
</div>
</div>
<div class="section" id="release-11-0-0-2021-02-09">
<span id="release-11-0-0"></span><h1>Release 11.0.0 - 2021-02-09<a class="headerlink" href="#release-11-0-0-2021-02-09" title="Permalink to this headline">¶</a></h1>
<p>This is a major version up! But It keeps backward compatibility. We can upgrade to 11.0.0 without rebuilding database.</p>
<div class="section" id="id53">
<h2>Improvements<a class="headerlink" href="#id53" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] Added support for outputting values of scalar column and vector column via nested index.</p>
<ul>
<li><p>The nested index is that has structure as below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Products</span> <span class="n">TABLE_PAT_KEY</span> <span class="n">ShortText</span>

<span class="n">table_create</span> <span class="n">Purchases</span> <span class="n">TABLE_NO_KEY</span>
<span class="n">column_create</span> <span class="n">Purchases</span> <span class="n">product</span> <span class="n">COLUMN_SCALAR</span> <span class="n">Products</span>
<span class="n">column_create</span> <span class="n">Purchases</span> <span class="n">tag</span> <span class="n">COLUMN_SCALAR</span> <span class="n">ShortText</span>

<span class="n">column_create</span> <span class="n">Products</span> <span class="n">purchases</span> <span class="n">COLUMN_INDEX</span> <span class="n">Purchases</span> <span class="n">product</span>
</pre></div>
</div>
</li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">Products.purchases</span></code> column is a index of <code class="docutils literal notranslate"><span class="pre">Purchases.product</span></code> column in the above example.
Also, <code class="docutils literal notranslate"><span class="pre">Purchases.product</span></code> is a reference to <code class="docutils literal notranslate"><span class="pre">Products</span></code> table.</p></li>
<li><p>We had not got the correct search result when we search via nested index until now.</p></li>
<li><p>The result had been as follows until now. We can see that <code class="docutils literal notranslate"><span class="pre">{&quot;product&quot;:</span> <span class="pre">&quot;apple&quot;,</span>&#160; <span class="pre">&quot;tag&quot;:</span> <span class="pre">&quot;man&quot;}</span></code> is not output.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Products</span> <span class="n">TABLE_PAT_KEY</span> <span class="n">ShortText</span>

<span class="n">table_create</span> <span class="n">Purchases</span> <span class="n">TABLE_NO_KEY</span>
<span class="n">column_create</span> <span class="n">Purchases</span> <span class="n">product</span> <span class="n">COLUMN_SCALAR</span> <span class="n">Products</span>
<span class="n">column_create</span> <span class="n">Purchases</span> <span class="n">tag</span> <span class="n">COLUMN_SCALAR</span> <span class="n">ShortText</span>

<span class="n">column_create</span> <span class="n">Products</span> <span class="n">purchases</span> <span class="n">COLUMN_INDEX</span> <span class="n">Purchases</span> <span class="n">product</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Products</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;apple&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;banana&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;cacao&quot;</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Purchases</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;product&quot;</span><span class="p">:</span> <span class="s2">&quot;apple&quot;</span><span class="p">,</span>  <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="s2">&quot;man&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;product&quot;</span><span class="p">:</span> <span class="s2">&quot;banana&quot;</span><span class="p">,</span> <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="s2">&quot;man&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;product&quot;</span><span class="p">:</span> <span class="s2">&quot;cacao&quot;</span><span class="p">,</span>  <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="s2">&quot;woman&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;product&quot;</span><span class="p">:</span> <span class="s2">&quot;apple&quot;</span><span class="p">,</span>  <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="s2">&quot;many&quot;</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">select</span> <span class="n">Products</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="n">_key</span><span class="p">,</span><span class="n">purchases</span><span class="o">.</span><span class="n">tag</span>
<span class="p">[</span>
  <span class="p">[</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mf">1612504193.380738</span><span class="p">,</span>
    <span class="mf">0.0002026557922363281</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="p">[</span>
      <span class="p">[</span>
        <span class="mi">3</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="p">[</span>
          <span class="s2">&quot;_key&quot;</span><span class="p">,</span>
          <span class="s2">&quot;ShortText&quot;</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;purchases.tag&quot;</span><span class="p">,</span>
          <span class="s2">&quot;ShortText&quot;</span>
        <span class="p">]</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="s2">&quot;apple&quot;</span><span class="p">,</span>
        <span class="s2">&quot;many&quot;</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="s2">&quot;banana&quot;</span><span class="p">,</span>
        <span class="s2">&quot;man&quot;</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="s2">&quot;cacao&quot;</span><span class="p">,</span>
        <span class="s2">&quot;man&quot;</span>
      <span class="p">]</span>
    <span class="p">]</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
</li>
<li><p>The result will be as follows from this release. We can see that <code class="docutils literal notranslate"><span class="pre">{&quot;product&quot;:</span> <span class="pre">&quot;apple&quot;,</span>&#160; <span class="pre">&quot;tag&quot;:</span> <span class="pre">&quot;man&quot;}</span></code> is output.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">Products</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="n">_key</span><span class="p">,</span><span class="n">purchases</span><span class="o">.</span><span class="n">tag</span>
<span class="p">[</span>
  <span class="p">[</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mf">0.0</span><span class="p">,</span>
    <span class="mf">0.0</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="p">[</span>
      <span class="p">[</span>
        <span class="mi">3</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="p">[</span>
          <span class="s2">&quot;_key&quot;</span><span class="p">,</span>
          <span class="s2">&quot;ShortText&quot;</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;purchases.tags&quot;</span><span class="p">,</span>
          <span class="s2">&quot;Tags&quot;</span>
        <span class="p">]</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="s2">&quot;apple&quot;</span><span class="p">,</span>
        <span class="p">[</span>
          <span class="p">[</span>
            <span class="s2">&quot;man&quot;</span><span class="p">,</span>
            <span class="s2">&quot;one&quot;</span>
          <span class="p">],</span>
          <span class="p">[</span>
            <span class="s2">&quot;child&quot;</span><span class="p">,</span>
            <span class="s2">&quot;many&quot;</span>
          <span class="p">]</span>
        <span class="p">]</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="s2">&quot;banana&quot;</span><span class="p">,</span>
        <span class="p">[</span>
          <span class="p">[</span>
            <span class="s2">&quot;man&quot;</span><span class="p">,</span>
            <span class="s2">&quot;many&quot;</span>
          <span class="p">]</span>
        <span class="p">]</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="s2">&quot;cacao&quot;</span><span class="p">,</span>
        <span class="p">[</span>
          <span class="p">[</span>
            <span class="s2">&quot;woman&quot;</span>
          <span class="p">]</span>
        <span class="p">]</span>
      <span class="p">]</span>
    <span class="p">]</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>[Windows] Dropped support for packages of Windows version that we had cross compiled by using MinGW on Linux.</p>
<ul class="simple">
<li><p>Because there aren’t probably many people who use that.</p></li>
<li><p>These above packages are that We had provided as below name until now.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">groonga-x.x.x-x86.exe</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">groonga-x.x.x-x86.zip</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">groonga-x.x.x-x64.exe</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">groonga-x.x.x-x86.zip</span></code></p></li>
</ul>
</li>
<li><p>From now on, we use the following packages for Windows.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">groonga-latest-x86-vs2019-with-vcruntime.zip</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">groonga-latest-x64-vs2019-with-vcruntime.zip</span></code></p></li>
</ul>
</li>
<li><p>If a system already has installed Microsoft Visual C++ Runtime Library, we suggest that we use the following packages.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">groonga-latest-x86-vs2019.zip</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">groonga-latest-x64-vs2019.zip</span></code></p></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id54">
<h2>Fixes<a class="headerlink" href="#id54" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Fixed a bug that there is possible that index is corrupt when Groonga executes many additions, delete, and update information in it.</p>
<ul>
<li><p>This bug occurs when we only execute many delete information from index.
However, it doesn’t occur when we only execute many additions information into index.</p></li>
<li><p>We can repair the index that is corrupt by this bug using reconstruction of it.</p></li>
<li><p>This bug doesn’t detect unless we reference the broken index.
Therefore, the index in our indexes may has already broken.</p></li>
<li><p>We can use [<a class="reference internal" href="reference/commands/index_column_diff.html"><span class="doc">index_column_diff</span></a>] command to confirm whether the index has already been broken or not.</p></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="release-10-1-1-2021-01-25">
<span id="release-10-1-1"></span><h1>Release 10.1.1 - 2021-01-25<a class="headerlink" href="#release-10-1-1-2021-01-25" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id55">
<h2>Improvements<a class="headerlink" href="#id55" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] Added support for outputting UInt64 value in Apache Arrow format.</p></li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] Added support for outputting a number of hits in Apache Arrow format as below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span> <span class="n">metadata</span> <span class="o">--</span>
<span class="n">GROONGA</span><span class="p">:</span><span class="n">n</span><span class="o">-</span><span class="n">hits</span><span class="p">:</span> <span class="mi">10</span>
</pre></div>
</div>
</li>
<li><p>[<a class="reference internal" href="reference/functions/query.html"><span class="doc">query</span></a>] Added support for optimization of “order by estimated size”.</p>
<ul class="simple">
<li><p>Normally, we can search at high speed when we first execute a condition which number of hits is a little.</p>
<ul>
<li><p>The “B (There are few) &amp;&amp; A (There are many)” faster than “A (There are many) &amp;&amp; B (There are few)”.</p></li>
</ul>
</li>
<li><p>This is a known optimization. However we need reorder conditions by ourselves.</p></li>
<li><p>Groonga executes this reorder automatically by using optimization of “order by estimated size”.</p></li>
<li><p>This optimization is valid by <code class="docutils literal notranslate"><span class="pre">GRN_ORDER_BY_ESTIMATED_SIZE_ENABLE=yes</span></code>.</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/functions/between.html"><span class="doc">between</span></a>] Improved performance by the following improvements.</p>
<ul class="simple">
<li><p>Improved the accuracy of a decision whether the <code class="docutils literal notranslate"><span class="pre">between()</span></code> use sequential search or not.</p></li>
<li><p>Improved that we set a result of <code class="docutils literal notranslate"><span class="pre">between()</span></code> into a result set in bulk.</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] Improved performance for a prefix search.</p>
<ul>
<li><p>For example, the performance of the following prefix search by using “*” improved.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Memos</span> <span class="n">TABLE_PAT_KEY</span> <span class="n">ShortText</span>
<span class="n">table_create</span> <span class="n">Contents</span> <span class="n">TABLE_PAT_KEY</span> <span class="n">ShortText</span>   <span class="o">--</span><span class="n">normalizer</span> <span class="n">NormalizerAuto</span>
<span class="n">column_create</span> <span class="n">Contents</span> <span class="n">entries_key_index</span> <span class="n">COLUMN_INDEX</span> <span class="n">Memos</span> <span class="n">_key</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Memos</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;(groonga) Start to try!&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;(mroonga) Installed&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;(groonga) Upgraded!&quot;</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">select</span> \
  <span class="o">--</span><span class="n">table</span> <span class="n">Memos</span> \
  <span class="o">--</span><span class="n">match_columns</span> <span class="n">_key</span> \
  <span class="o">--</span><span class="n">query</span> <span class="s1">&#39;</span><span class="se">\\</span><span class="s1">(groonga</span><span class="se">\\</span><span class="s1">)*&#39;</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/tokenizers.html"><span class="doc">Tokenizers</span></a>][TokenMecab] Improved performance for parallel construction fo token column. [GitHub#1158][Patched by naoa]</p></li>
</ul>
</div>
<div class="section" id="id56">
<h2>Fixes<a class="headerlink" href="#id56" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>[<a class="reference internal" href="reference/functions/sub_filter.html"><span class="doc">sub_filter</span></a>] Fixed a bug that <code class="docutils literal notranslate"><span class="pre">sub_filter</span></code> doesn’t work in <code class="docutils literal notranslate"><span class="pre">slices[].filter</span></code>.</p>
<ul>
<li><p>For example, the result of <code class="docutils literal notranslate"><span class="pre">sub_filter</span></code> was 0 records by the following query by this bug.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Users</span> <span class="n">TABLE_HASH_KEY</span> <span class="n">ShortText</span>
<span class="n">column_create</span> <span class="n">Users</span> <span class="n">age</span> <span class="n">COLUMN_SCALAR</span> <span class="n">UInt8</span>

<span class="n">table_create</span> <span class="n">Memos</span> <span class="n">TABLE_NO_KEY</span>
<span class="n">column_create</span> <span class="n">Memos</span> <span class="n">user</span> <span class="n">COLUMN_SCALAR</span> <span class="n">Users</span>
<span class="n">column_create</span> <span class="n">Memos</span> <span class="n">content</span> <span class="n">COLUMN_SCALAR</span> <span class="n">Text</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Users</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;alice&quot;</span><span class="p">,</span> <span class="s2">&quot;age&quot;</span><span class="p">:</span> <span class="mi">9</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;bob&quot;</span><span class="p">,</span>   <span class="s2">&quot;age&quot;</span><span class="p">:</span> <span class="mi">29</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Memos</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;user&quot;</span><span class="p">:</span> <span class="s2">&quot;alice&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;hello&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;user&quot;</span><span class="p">:</span> <span class="s2">&quot;bob&quot;</span><span class="p">,</span>   <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;world&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;user&quot;</span><span class="p">:</span> <span class="s2">&quot;alice&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;bye&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;user&quot;</span><span class="p">:</span> <span class="s2">&quot;bob&quot;</span><span class="p">,</span>   <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;yay&quot;</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">select</span> \
  <span class="o">--</span><span class="n">table</span> <span class="n">Memos</span> \
  <span class="o">--</span><span class="n">slices</span><span class="p">[</span><span class="n">adult</span><span class="p">]</span><span class="o">.</span><span class="n">filter</span> <span class="s1">&#39;_id &gt; 1 &amp;&amp; sub_filter(user, &quot;age &gt;= 18&quot;)&#39;</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>Fixed a bug that it is possible that we can’t add data and Groonga crash when we repeat much addition of data and deletion of data against a hash table.</p></li>
</ul>
</div>
<div class="section" id="id57">
<h2>Thanks<a class="headerlink" href="#id57" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>naoa</p></li>
</ul>
</div>
</div>
<div class="section" id="release-10-1-0-2020-12-29">
<span id="release-10-1-0"></span><h1>Release 10.1.0 - 2020-12-29<a class="headerlink" href="#release-10-1-0-2020-12-29" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id58">
<h2>Improvements<a class="headerlink" href="#id58" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>[<a class="reference internal" href="reference/functions/highlight_html.html"><span class="doc">highlight_html</span></a>] Added support for removing leading full width spaces from highlight target. [PGroonga#GitHub#155][Reported by Hung Nguyen V]</p>
<ul>
<li><p>Until now, leading full width spaces had also included in the target of highlight as below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Entries</span> <span class="n">TABLE_NO_KEY</span>
<span class="n">column_create</span> <span class="n">Entries</span> <span class="n">body</span> <span class="n">COLUMN_SCALAR</span> <span class="n">ShortText</span>

<span class="n">table_create</span> <span class="n">Terms</span> <span class="n">TABLE_PAT_KEY</span> <span class="n">ShortText</span> <span class="o">--</span><span class="n">default_tokenizer</span> <span class="n">TokenBigram</span> <span class="o">--</span><span class="n">normalizer</span> <span class="n">NormalizerAuto</span>
<span class="n">column_create</span> <span class="n">Terms</span> <span class="n">document_index</span> <span class="n">COLUMN_INDEX</span><span class="o">|</span><span class="n">WITH_POSITION</span> <span class="n">Entries</span> <span class="n">body</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Entries</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;body&quot;</span><span class="p">:</span> <span class="s2">&quot;Groonga　高速！&quot;</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">select</span> <span class="n">Entries</span> <span class="o">--</span><span class="n">output_columns</span> \
  <span class="o">--</span><span class="n">match_columns</span> <span class="n">body</span> <span class="o">--</span><span class="n">query</span> <span class="s1">&#39;高速&#39;</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="s1">&#39;highlight_html(body)&#39;</span>
<span class="p">[</span>
  <span class="p">[</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mf">0.0</span><span class="p">,</span>
    <span class="mf">0.0</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="p">[</span>
      <span class="p">[</span>
        <span class="mi">1</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="p">[</span>
          <span class="s2">&quot;highlight_html&quot;</span><span class="p">,</span>
          <span class="n">null</span>
        <span class="p">]</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="s2">&quot;Groonga&lt;span class=</span><span class="se">\&quot;</span><span class="s2">keyword</span><span class="se">\&quot;</span><span class="s2">&gt;　高速&lt;/span&gt;！&quot;</span>
      <span class="p">]</span>
    <span class="p">]</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
</li>
<li><p>However, this is needless as the target of highlight.
Therefore, in this release, <code class="docutils literal notranslate"><span class="pre">highlight_html()</span></code> removes leading full width spaces.</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/status.html"><span class="doc">status</span></a>] Added a new item <code class="docutils literal notranslate"><span class="pre">features</span></code>.</p>
<ul>
<li><p>We can display which Groonga’s features are enabled as below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">status</span> <span class="o">--</span><span class="n">output_pretty</span> <span class="n">yes</span>
<span class="p">[</span>
  <span class="p">[</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mf">0.0</span><span class="p">,</span>
    <span class="mf">0.0</span>
  <span class="p">],</span>
  <span class="p">{</span>
    <span class="s2">&quot;alloc_count&quot;</span><span class="p">:</span> <span class="mi">361</span><span class="p">,</span>
    <span class="s2">&quot;starttime&quot;</span><span class="p">:</span> <span class="mi">1608087311</span><span class="p">,</span>
    <span class="s2">&quot;start_time&quot;</span><span class="p">:</span> <span class="mi">1608087311</span><span class="p">,</span>
    <span class="s2">&quot;uptime&quot;</span><span class="p">:</span> <span class="mi">35</span><span class="p">,</span>
    <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;10.1.0&quot;</span><span class="p">,</span>
    <span class="s2">&quot;n_queries&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;cache_hit_rate&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
    <span class="s2">&quot;command_version&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;default_command_version&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;max_command_version&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="s2">&quot;n_jobs&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;features&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;nfkc&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
      <span class="s2">&quot;mecab&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
      <span class="s2">&quot;message_pack&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
      <span class="s2">&quot;mruby&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
      <span class="s2">&quot;onigmo&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
      <span class="s2">&quot;zlib&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
      <span class="s2">&quot;lz4&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
      <span class="s2">&quot;zstandard&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
      <span class="s2">&quot;kqueue&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
      <span class="s2">&quot;epoll&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
      <span class="s2">&quot;poll&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
      <span class="s2">&quot;rapidjson&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
      <span class="s2">&quot;apache_arrow&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
      <span class="s2">&quot;xxhash&quot;</span><span class="p">:</span> <span class="n">false</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/status.html"><span class="doc">status</span></a>] Added a new item <code class="docutils literal notranslate"><span class="pre">apache_arrow</span></code>.</p>
<ul class="simple">
<li><p>We can display Apache Arrow version that Groonga use as below.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
  <span class="p">[</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mf">1608088628.440753</span><span class="p">,</span>
    <span class="mf">0.0006628036499023438</span>
  <span class="p">],</span>
  <span class="p">{</span>
    <span class="s2">&quot;alloc_count&quot;</span><span class="p">:</span> <span class="mi">360</span><span class="p">,</span>
    <span class="s2">&quot;starttime&quot;</span><span class="p">:</span> <span class="mi">1608088617</span><span class="p">,</span>
    <span class="s2">&quot;start_time&quot;</span><span class="p">:</span> <span class="mi">1608088617</span><span class="p">,</span>
    <span class="s2">&quot;uptime&quot;</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span>
    <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;10.0.9-39-g5a4c6f3&quot;</span><span class="p">,</span>
    <span class="s2">&quot;n_queries&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;cache_hit_rate&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
    <span class="s2">&quot;command_version&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;default_command_version&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;max_command_version&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="s2">&quot;n_jobs&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;features&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;nfkc&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
      <span class="s2">&quot;mecab&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
      <span class="s2">&quot;message_pack&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
      <span class="s2">&quot;mruby&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
      <span class="s2">&quot;onigmo&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
      <span class="s2">&quot;zlib&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
      <span class="s2">&quot;lz4&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
      <span class="s2">&quot;zstandard&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
      <span class="s2">&quot;kqueue&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
      <span class="s2">&quot;epoll&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
      <span class="s2">&quot;poll&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
      <span class="s2">&quot;rapidjson&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
      <span class="s2">&quot;apache_arrow&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
      <span class="s2">&quot;xxhash&quot;</span><span class="p">:</span> <span class="n">false</span>
    <span class="p">},</span>
    <span class="s2">&quot;apache_arrow&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;version_major&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
      <span class="s2">&quot;version_minor&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="s2">&quot;version_patch&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;2.0.0&quot;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<ul class="simple">
<li><p>This item only display when Apache Arrow is valid in Groonga.</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/window_function.html"><span class="doc">Window function</span></a>] Added support for processing all tables at once even if target tables straddle a shard. (experimental)</p>
<ul>
<li><p>If the target tables straddle a shard, the window function had processed each shard until now.</p>
<ul>
<li><p>Therefore, if we used multiple group keys in windows functions, the value of the group keys from the second had to be one kind of value.</p></li>
<li><p>However, we can use multiple kind of values for it as below by this improvement.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">plugin_register</span> <span class="n">sharding</span>
<span class="n">plugin_register</span> <span class="n">functions</span><span class="o">/</span><span class="n">time</span>

<span class="n">table_create</span> <span class="n">Logs_20170315</span> <span class="n">TABLE_NO_KEY</span>
<span class="n">column_create</span> <span class="n">Logs_20170315</span> <span class="n">timestamp</span> <span class="n">COLUMN_SCALAR</span> <span class="n">Time</span>
<span class="n">column_create</span> <span class="n">Logs_20170315</span> <span class="n">price</span> <span class="n">COLUMN_SCALAR</span> <span class="n">UInt32</span>
<span class="n">column_create</span> <span class="n">Logs_20170315</span> <span class="n">item</span> <span class="n">COLUMN_SCALAR</span> <span class="n">ShortText</span>

<span class="n">table_create</span> <span class="n">Logs_20170316</span> <span class="n">TABLE_NO_KEY</span>
<span class="n">column_create</span> <span class="n">Logs_20170316</span> <span class="n">timestamp</span> <span class="n">COLUMN_SCALAR</span> <span class="n">Time</span>
<span class="n">column_create</span> <span class="n">Logs_20170316</span> <span class="n">price</span> <span class="n">COLUMN_SCALAR</span> <span class="n">UInt32</span>
<span class="n">column_create</span> <span class="n">Logs_20170316</span> <span class="n">item</span> <span class="n">COLUMN_SCALAR</span> <span class="n">ShortText</span>

<span class="n">table_create</span> <span class="n">Logs_20170317</span> <span class="n">TABLE_NO_KEY</span>
<span class="n">column_create</span> <span class="n">Logs_20170317</span> <span class="n">timestamp</span> <span class="n">COLUMN_SCALAR</span> <span class="n">Time</span>
<span class="n">column_create</span> <span class="n">Logs_20170317</span> <span class="n">price</span> <span class="n">COLUMN_SCALAR</span> <span class="n">UInt32</span>
<span class="n">column_create</span> <span class="n">Logs_20170317</span> <span class="n">item</span> <span class="n">COLUMN_SCALAR</span> <span class="n">ShortText</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Logs_20170315</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2017/03/15 10:00:00&quot;</span><span class="p">,</span> <span class="s2">&quot;price&quot;</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span> <span class="s2">&quot;item&quot;</span><span class="p">:</span> <span class="s2">&quot;A&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2017/03/15 11:00:00&quot;</span><span class="p">,</span> <span class="s2">&quot;price&quot;</span><span class="p">:</span>  <span class="mi">900</span><span class="p">,</span> <span class="s2">&quot;item&quot;</span><span class="p">:</span> <span class="s2">&quot;A&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2017/03/15 12:00:00&quot;</span><span class="p">,</span> <span class="s2">&quot;price&quot;</span><span class="p">:</span>  <span class="mi">300</span><span class="p">,</span> <span class="s2">&quot;item&quot;</span><span class="p">:</span> <span class="s2">&quot;B&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2017/03/15 13:00:00&quot;</span><span class="p">,</span> <span class="s2">&quot;price&quot;</span><span class="p">:</span>  <span class="mi">200</span><span class="p">,</span> <span class="s2">&quot;item&quot;</span><span class="p">:</span> <span class="s2">&quot;B&quot;</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Logs_20170316</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2017/03/16 10:00:00&quot;</span><span class="p">,</span> <span class="s2">&quot;price&quot;</span><span class="p">:</span>  <span class="mi">530</span><span class="p">,</span> <span class="s2">&quot;item&quot;</span><span class="p">:</span> <span class="s2">&quot;A&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2017/03/16 11:00:00&quot;</span><span class="p">,</span> <span class="s2">&quot;price&quot;</span><span class="p">:</span>  <span class="mi">520</span><span class="p">,</span> <span class="s2">&quot;item&quot;</span><span class="p">:</span> <span class="s2">&quot;B&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2017/03/16 12:00:00&quot;</span><span class="p">,</span> <span class="s2">&quot;price&quot;</span><span class="p">:</span>  <span class="mi">110</span><span class="p">,</span> <span class="s2">&quot;item&quot;</span><span class="p">:</span> <span class="s2">&quot;A&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2017/03/16 13:00:00&quot;</span><span class="p">,</span> <span class="s2">&quot;price&quot;</span><span class="p">:</span>  <span class="mi">410</span><span class="p">,</span> <span class="s2">&quot;item&quot;</span><span class="p">:</span> <span class="s2">&quot;A&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2017/03/16 14:00:00&quot;</span><span class="p">,</span> <span class="s2">&quot;price&quot;</span><span class="p">:</span>  <span class="mi">710</span><span class="p">,</span> <span class="s2">&quot;item&quot;</span><span class="p">:</span> <span class="s2">&quot;B&quot;</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Logs_20170317</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2017/03/17 10:00:00&quot;</span><span class="p">,</span> <span class="s2">&quot;price&quot;</span><span class="p">:</span>  <span class="mi">800</span><span class="p">,</span> <span class="s2">&quot;item&quot;</span><span class="p">:</span> <span class="s2">&quot;A&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2017/03/17 11:00:00&quot;</span><span class="p">,</span> <span class="s2">&quot;price&quot;</span><span class="p">:</span>  <span class="mi">400</span><span class="p">,</span> <span class="s2">&quot;item&quot;</span><span class="p">:</span> <span class="s2">&quot;B&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2017/03/17 12:00:00&quot;</span><span class="p">,</span> <span class="s2">&quot;price&quot;</span><span class="p">:</span>  <span class="mi">500</span><span class="p">,</span> <span class="s2">&quot;item&quot;</span><span class="p">:</span> <span class="s2">&quot;B&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2017/03/17 13:00:00&quot;</span><span class="p">,</span> <span class="s2">&quot;price&quot;</span><span class="p">:</span>  <span class="mi">300</span><span class="p">,</span> <span class="s2">&quot;item&quot;</span><span class="p">:</span> <span class="s2">&quot;A&quot;</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">table_create</span> <span class="n">Times</span> <span class="n">TABLE_PAT_KEY</span> <span class="n">Time</span>
<span class="n">column_create</span> <span class="n">Times</span> <span class="n">logs_20170315</span> <span class="n">COLUMN_INDEX</span> <span class="n">Logs_20170315</span> <span class="n">timestamp</span>
<span class="n">column_create</span> <span class="n">Times</span> <span class="n">logs_20170316</span> <span class="n">COLUMN_INDEX</span> <span class="n">Logs_20170316</span> <span class="n">timestamp</span>
<span class="n">column_create</span> <span class="n">Times</span> <span class="n">logs_20170317</span> <span class="n">COLUMN_INDEX</span> <span class="n">Logs_20170317</span> <span class="n">timestamp</span>

<span class="n">logical_range_filter</span> <span class="n">Logs</span> \
  <span class="o">--</span><span class="n">shard_key</span> <span class="n">timestamp</span> \
  <span class="o">--</span><span class="nb">filter</span> <span class="s1">&#39;price &gt;= 300&#39;</span> \
  <span class="o">--</span><span class="n">limit</span> <span class="o">-</span><span class="mi">1</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">offsetted_timestamp</span><span class="p">]</span><span class="o">.</span><span class="n">stage</span> <span class="n">filtered</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">offsetted_timestamp</span><span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="n">Time</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">offsetted_timestamp</span><span class="p">]</span><span class="o">.</span><span class="n">flags</span> <span class="n">COLUMN_SCALAR</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">offsetted_timestamp</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="s1">&#39;timestamp - 39600000000&#39;</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">offsetted_day</span><span class="p">]</span><span class="o">.</span><span class="n">stage</span> <span class="n">filtered</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">offsetted_day</span><span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="n">Time</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">offsetted_day</span><span class="p">]</span><span class="o">.</span><span class="n">flags</span> <span class="n">COLUMN_SCALAR</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">offsetted_day</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="s1">&#39;time_classify_day(offsetted_timestamp)&#39;</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">n_records_per_day_and_item</span><span class="p">]</span><span class="o">.</span><span class="n">stage</span> <span class="n">filtered</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">n_records_per_day_and_item</span><span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="n">UInt32</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">n_records_per_day_and_item</span><span class="p">]</span><span class="o">.</span><span class="n">flags</span> <span class="n">COLUMN_SCALAR</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">n_records_per_day_and_item</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="s1">&#39;window_count()&#39;</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">n_records_per_day_and_item</span><span class="p">]</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">group_keys</span> <span class="s1">&#39;offsetted_day,item&#39;</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="s2">&quot;_id,time_format_iso8601(offsetted_day),item,n_records_per_day_and_item&quot;</span>
<span class="p">[</span>
  <span class="p">[</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mf">0.0</span><span class="p">,</span>
    <span class="mf">0.0</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="p">[</span>
      <span class="p">[</span>
        <span class="s2">&quot;_id&quot;</span><span class="p">,</span>
        <span class="s2">&quot;UInt32&quot;</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="s2">&quot;time_format_iso8601&quot;</span><span class="p">,</span>
        <span class="n">null</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="s2">&quot;item&quot;</span><span class="p">,</span>
        <span class="s2">&quot;ShortText&quot;</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="s2">&quot;n_records_per_day_and_item&quot;</span><span class="p">,</span>
        <span class="s2">&quot;UInt32&quot;</span>
      <span class="p">]</span>
    <span class="p">],</span>
    <span class="p">[</span>
      <span class="mi">1</span><span class="p">,</span>
      <span class="s2">&quot;2017-03-14T00:00:00.000000+09:00&quot;</span><span class="p">,</span>
      <span class="s2">&quot;A&quot;</span><span class="p">,</span>
      <span class="mi">1</span>
    <span class="p">],</span>
    <span class="p">[</span>
      <span class="mi">2</span><span class="p">,</span>
      <span class="s2">&quot;2017-03-15T00:00:00.000000+09:00&quot;</span><span class="p">,</span>
      <span class="s2">&quot;A&quot;</span><span class="p">,</span>
      <span class="mi">2</span>
    <span class="p">],</span>
    <span class="p">[</span>
      <span class="mi">3</span><span class="p">,</span>
      <span class="s2">&quot;2017-03-15T00:00:00.000000+09:00&quot;</span><span class="p">,</span>
      <span class="s2">&quot;B&quot;</span><span class="p">,</span>
      <span class="mi">1</span>
    <span class="p">],</span>
    <span class="p">[</span>
      <span class="mi">1</span><span class="p">,</span>
      <span class="s2">&quot;2017-03-15T00:00:00.000000+09:00&quot;</span><span class="p">,</span>
      <span class="s2">&quot;A&quot;</span><span class="p">,</span>
      <span class="mi">2</span>
    <span class="p">],</span>
    <span class="p">[</span>
      <span class="mi">2</span><span class="p">,</span>
      <span class="s2">&quot;2017-03-16T00:00:00.000000+09:00&quot;</span><span class="p">,</span>
      <span class="s2">&quot;B&quot;</span><span class="p">,</span>
      <span class="mi">2</span>
    <span class="p">],</span>
    <span class="p">[</span>
      <span class="mi">4</span><span class="p">,</span>
      <span class="s2">&quot;2017-03-16T00:00:00.000000+09:00&quot;</span><span class="p">,</span>
      <span class="s2">&quot;A&quot;</span><span class="p">,</span>
      <span class="mi">2</span>
    <span class="p">],</span>
    <span class="p">[</span>
      <span class="mi">5</span><span class="p">,</span>
      <span class="s2">&quot;2017-03-16T00:00:00.000000+09:00&quot;</span><span class="p">,</span>
      <span class="s2">&quot;B&quot;</span><span class="p">,</span>
      <span class="mi">2</span>
    <span class="p">],</span>
    <span class="p">[</span>
      <span class="mi">1</span><span class="p">,</span>
      <span class="s2">&quot;2017-03-16T00:00:00.000000+09:00&quot;</span><span class="p">,</span>
      <span class="s2">&quot;A&quot;</span><span class="p">,</span>
      <span class="mi">2</span>
    <span class="p">],</span>
    <span class="p">[</span>
      <span class="mi">2</span><span class="p">,</span>
      <span class="s2">&quot;2017-03-17T00:00:00.000000+09:00&quot;</span><span class="p">,</span>
      <span class="s2">&quot;B&quot;</span><span class="p">,</span>
      <span class="mi">2</span>
    <span class="p">],</span>
    <span class="p">[</span>
      <span class="mi">3</span><span class="p">,</span>
      <span class="s2">&quot;2017-03-17T00:00:00.000000+09:00&quot;</span><span class="p">,</span>
      <span class="s2">&quot;B&quot;</span><span class="p">,</span>
      <span class="mi">2</span>
    <span class="p">],</span>
    <span class="p">[</span>
      <span class="mi">4</span><span class="p">,</span>
      <span class="s2">&quot;2017-03-17T00:00:00.000000+09:00&quot;</span><span class="p">,</span>
      <span class="s2">&quot;A&quot;</span><span class="p">,</span>
      <span class="mi">1</span>
    <span class="p">]</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>This feature requires Apache Arrow 3.0.0 that is not released yet.</p></li>
</ul>
</li>
<li><p>Added support for sequential search against reference column.</p>
<ul>
<li><p>This feature is only used if an index search will match many records and the current result set is enough small.</p>
<ul class="simple">
<li><p>Because the sequential search is faster than the index search in the above case.</p></li>
</ul>
</li>
<li><p>It is invalid by default.</p></li>
<li><p>It is valid if we set <code class="docutils literal notranslate"><span class="pre">GRN_II_SELECT_TOO_MANY_INDEX_MATCH_RATIO_REFERENCE</span></code> environment variable.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">GRN_II_SELECT_TOO_MANY_INDEX_MATCH_RATIO_REFERENCE</span></code> environment variable is a threshold to switch the sequential search from the index search.</p>
<ul>
<li><p>For example, if we set <code class="docutils literal notranslate"><span class="pre">GRN_II_SELECT_TOO_MANY_INDEX_MATCH_RATIO_REFERENCE=0.7</span></code> as below, if the number of records for the result set less than 70 % of total records, a search is executed by a sequential search.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ export GRN_II_SELECT_TOO_MANY_INDEX_MATCH_RATIO_REFERENCE=0.7

table_create Tags TABLE_HASH_KEY ShortText
table_create Memos TABLE_HASH_KEY ShortText
column_create Memos tag COLUMN_SCALAR Tags

load --table Memos
[
{&quot;_key&quot;: &quot;Rroonga is fast!&quot;, &quot;tag&quot;: &quot;Rroonga&quot;},
{&quot;_key&quot;: &quot;Groonga is fast!&quot;, &quot;tag&quot;: &quot;Groonga&quot;},
{&quot;_key&quot;: &quot;Mroonga is fast!&quot;, &quot;tag&quot;: &quot;Mroonga&quot;},
{&quot;_key&quot;: &quot;Groonga sticker!&quot;, &quot;tag&quot;: &quot;Groonga&quot;},
{&quot;_key&quot;: &quot;Groonga is good!&quot;, &quot;tag&quot;: &quot;Groonga&quot;}
]

column_create Tags memos_tag COLUMN_INDEX Memos tag

select Memos --query &#39;_id:&gt;=3 tag:@Groonga&#39; --output_columns _id,_score,_key,tag
[
  [
    0,
    0.0,
    0.0
  ],
  [
    [
      [
        2
      ],
      [
        [
          &quot;_id&quot;,
          &quot;UInt32&quot;
        ],
        [
          &quot;_score&quot;,
          &quot;Int32&quot;
        ],
        [
          &quot;_key&quot;,
          &quot;ShortText&quot;
        ],
        [
          &quot;tag&quot;,
          &quot;Tags&quot;
        ]
      ],
      [
        4,
        2,
        &quot;Groonga sticker!&quot;,
        &quot;Groonga&quot;
      ],
      [
        5,
        2,
        &quot;Groonga is good!&quot;,
        &quot;Groonga&quot;
      ]
    ]
  ]
]
</pre></div>
</div>
</li>
</ul>
</li>
</ul>
</li>
<li><p>[tokenizers] Added support for the token column into <code class="docutils literal notranslate"><span class="pre">TokenDocumentVectorTFIDF</span></code> and <code class="docutils literal notranslate"><span class="pre">TokenDocumentVectorBM25</span></code>.</p>
<ul>
<li><p>If there is the token column that has the same source as the index column, these tokenizer use the token id of the token column.</p>
<ul class="simple">
<li><p>The token column has already had data that has already finished tokenize.</p></li>
<li><p>Therefore, these tokenizer are improved performance by using a token column.</p></li>
</ul>
</li>
<li><p>For example, we can use this feature by making a token column named <code class="docutils literal notranslate"><span class="pre">content_tokens</span></code> as below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Memos</span> <span class="n">TABLE_NO_KEY</span>
<span class="n">column_create</span> <span class="n">Memos</span> <span class="n">content</span> <span class="n">COLUMN_SCALAR</span> <span class="n">Text</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Memos</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;a b c a&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;c b c&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;b b a&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;a c c&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;a&quot;</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">table_create</span> <span class="n">Tokens</span> <span class="n">TABLE_PAT_KEY</span> <span class="n">ShortText</span> \
  <span class="o">--</span><span class="n">normalizer</span> <span class="n">NormalizerNFKC121</span> \
  <span class="o">--</span><span class="n">default_tokenizer</span> <span class="n">TokenNgram</span>
<span class="n">column_create</span> <span class="n">Tokens</span> <span class="n">memos_content</span> <span class="n">COLUMN_INDEX</span><span class="o">|</span><span class="n">WITH_POSITION</span> <span class="n">Memos</span> <span class="n">content</span>

<span class="n">column_create</span> <span class="n">Memos</span> <span class="n">content_tokens</span> <span class="n">COLUMN_VECTOR</span> <span class="n">Tokens</span> <span class="n">content</span>

<span class="n">table_create</span> <span class="n">DocumentVectorBM25</span> <span class="n">TABLE_HASH_KEY</span> <span class="n">Tokens</span> \
  <span class="o">--</span><span class="n">default_tokenizer</span> \
    <span class="s1">&#39;TokenDocumentVectorBM25(&quot;index_column&quot;, &quot;memos_content&quot;, </span><span class="se">\</span>
<span class="s1">                             &quot;df_column&quot;, &quot;df&quot;)&#39;</span>
<span class="n">column_create</span> <span class="n">DocumentVectorBM25</span> <span class="n">df</span> <span class="n">COLUMN_SCALAR</span> <span class="n">UInt32</span>

<span class="n">column_create</span> <span class="n">Memos</span> <span class="n">content_feature</span> <span class="n">COLUMN_VECTOR</span><span class="o">|</span><span class="n">WITH_WEIGHT</span><span class="o">|</span><span class="n">WEIGHT_FLOAT32</span> \
  <span class="n">DocumentVectorBM25</span> <span class="n">content</span>

<span class="n">select</span> <span class="n">Memos</span>
<span class="p">[</span>
  <span class="p">[</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mf">0.0</span><span class="p">,</span>
    <span class="mf">0.0</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="p">[</span>
      <span class="p">[</span>
        <span class="mi">5</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="p">[</span>
          <span class="s2">&quot;_id&quot;</span><span class="p">,</span>
          <span class="s2">&quot;UInt32&quot;</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;content&quot;</span><span class="p">,</span>
          <span class="s2">&quot;Text&quot;</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;content_feature&quot;</span><span class="p">,</span>
          <span class="s2">&quot;DocumentVectorBM25&quot;</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;content_tokens&quot;</span><span class="p">,</span>
          <span class="s2">&quot;Tokens&quot;</span>
        <span class="p">]</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;a b c a&quot;</span><span class="p">,</span>
        <span class="p">{</span>
          <span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="mf">0.5095787</span><span class="p">,</span>
          <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="mf">0.6084117</span><span class="p">,</span>
          <span class="s2">&quot;c&quot;</span><span class="p">:</span> <span class="mf">0.6084117</span>
        <span class="p">},</span>
        <span class="p">[</span>
          <span class="s2">&quot;a&quot;</span><span class="p">,</span>
          <span class="s2">&quot;b&quot;</span><span class="p">,</span>
          <span class="s2">&quot;c&quot;</span><span class="p">,</span>
          <span class="s2">&quot;a&quot;</span>
        <span class="p">]</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">2</span><span class="p">,</span>
        <span class="s2">&quot;c b c&quot;</span><span class="p">,</span>
        <span class="p">{</span>
          <span class="s2">&quot;c&quot;</span><span class="p">:</span> <span class="mf">0.8342565</span><span class="p">,</span>
          <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="mf">0.5513765</span>
        <span class="p">},</span>
        <span class="p">[</span>
          <span class="s2">&quot;c&quot;</span><span class="p">,</span>
          <span class="s2">&quot;b&quot;</span><span class="p">,</span>
          <span class="s2">&quot;c&quot;</span>
        <span class="p">]</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">3</span><span class="p">,</span>
        <span class="s2">&quot;b b a&quot;</span><span class="p">,</span>
        <span class="p">{</span>
          <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="mf">0.9430448</span><span class="p">,</span>
          <span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="mf">0.3326656</span>
        <span class="p">},</span>
        <span class="p">[</span>
          <span class="s2">&quot;b&quot;</span><span class="p">,</span>
          <span class="s2">&quot;b&quot;</span><span class="p">,</span>
          <span class="s2">&quot;a&quot;</span>
        <span class="p">]</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">4</span><span class="p">,</span>
        <span class="s2">&quot;a c c&quot;</span><span class="p">,</span>
        <span class="p">{</span>
          <span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="mf">0.3326656</span><span class="p">,</span>
          <span class="s2">&quot;c&quot;</span><span class="p">:</span> <span class="mf">0.9430448</span>
        <span class="p">},</span>
        <span class="p">[</span>
          <span class="s2">&quot;a&quot;</span><span class="p">,</span>
          <span class="s2">&quot;c&quot;</span><span class="p">,</span>
          <span class="s2">&quot;c&quot;</span>
        <span class="p">]</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">5</span><span class="p">,</span>
        <span class="s2">&quot;a&quot;</span><span class="p">,</span>
        <span class="p">{</span>
          <span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="mf">1.0</span>
        <span class="p">},</span>
        <span class="p">[</span>
          <span class="s2">&quot;a&quot;</span>
        <span class="p">]</span>
      <span class="p">]</span>
    <span class="p">]</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">TokenDocumentVectorTFIDF</span></code> and <code class="docutils literal notranslate"><span class="pre">TokenDocumentVectorBM25</span></code> give a weight against each tokens.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">TokenDocumentVectorTFIDF</span></code> calculate a weight for token by using TF-IDF.</p>
<blockquote>
<div><ul class="simple">
<li><p>Please refer to <a class="reference external" href="https://radimrehurek.com/gensim/models/tfidfmodel.html">https://radimrehurek.com/gensim/models/tfidfmodel.html</a> about TF-IDF.</p></li>
</ul>
</div></blockquote>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">TokenDocumentVectorBM25</span></code> calculate a weight for token by using Okapi BM25.</p>
<blockquote>
<div><ul class="simple">
<li><p>Please refer to <a class="reference external" href="https://en.wikipedia.org/wiki/Okapi_BM25">https://en.wikipedia.org/wiki/Okapi_BM25</a> about Okapi BM25.</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</li>
</ul>
</li>
<li><p>Improved performance when below case.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">(column</span> <span class="pre">&#64;</span> <span class="pre">&quot;value&quot;)</span> <span class="pre">&amp;&amp;</span> <span class="pre">(column</span> <span class="pre">&#64;</span> <span class="pre">&quot;value&quot;)</span></code></p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="install/ubuntu.html"><span class="doc">Ubuntu</span></a>] Added support for Ubuntu 20.10 (Groovy Gorilla).</p></li>
<li><p>[<a class="reference internal" href="install/debian.html"><span class="doc">Debian GNU/Linux</span></a>] Dropped stretch support.</p>
<ul class="simple">
<li><p>It reached EOL.</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="install/centos.html"><span class="doc">CentOS</span></a>] Dropped CentOS 6.</p>
<ul class="simple">
<li><p>It reached EOL.</p></li>
</ul>
</li>
<li><p>[httpd] Updated bundled nginx to 1.19.6.</p></li>
</ul>
</div>
<div class="section" id="id59">
<h2>Fixes<a class="headerlink" href="#id59" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>Fixed a bug that Groonga crash when we use multiple keys drilldown and use multiple accessor as below. [GitHub#1153][Patched by naoa]</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Tags</span> <span class="n">TABLE_PAT_KEY</span> <span class="n">ShortText</span>

<span class="n">table_create</span> <span class="n">Memos</span> <span class="n">TABLE_HASH_KEY</span> <span class="n">ShortText</span>
<span class="n">column_create</span> <span class="n">Memos</span> <span class="n">tags</span> <span class="n">COLUMN_VECTOR</span> <span class="n">Tags</span>
<span class="n">column_create</span> <span class="n">Memos</span> <span class="n">year</span> <span class="n">COLUMN_SCALAR</span> <span class="n">Int32</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Memos</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;Groonga is fast!&quot;</span><span class="p">,</span> <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;full-text-search&quot;</span><span class="p">],</span> <span class="s2">&quot;year&quot;</span><span class="p">:</span> <span class="mi">2019</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;Mroonga is fast!&quot;</span><span class="p">,</span> <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;mysql&quot;</span><span class="p">,</span> <span class="s2">&quot;full-text-search&quot;</span><span class="p">],</span> <span class="s2">&quot;year&quot;</span><span class="p">:</span> <span class="mi">2019</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;Groonga sticker!&quot;</span><span class="p">,</span> <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;full-text-search&quot;</span><span class="p">,</span> <span class="s2">&quot;sticker&quot;</span><span class="p">],</span> <span class="s2">&quot;year&quot;</span><span class="p">:</span> <span class="mi">2020</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;Rroonga is fast!&quot;</span><span class="p">,</span> <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;full-text-search&quot;</span><span class="p">,</span> <span class="s2">&quot;ruby&quot;</span><span class="p">],</span> <span class="s2">&quot;year&quot;</span><span class="p">:</span> <span class="mi">2020</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;Groonga is good!&quot;</span><span class="p">,</span> <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;full-text-search&quot;</span><span class="p">],</span> <span class="s2">&quot;year&quot;</span><span class="p">:</span> <span class="mi">2020</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">select</span> <span class="n">Memos</span> \
  <span class="o">--</span><span class="nb">filter</span> <span class="s1">&#39;_id &gt; 0&#39;</span> \
  <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">tags</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span> <span class="s1">&#39;tags,year &gt;= 2020&#39;</span> \
  <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">tags</span><span class="p">]</span><span class="o">.</span><span class="n">output_columns</span> <span class="n">_key</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">_key</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">_nsubrecs</span>

<span class="n">select</span> <span class="n">Memos</span> \
  <span class="o">--</span><span class="nb">filter</span> <span class="s1">&#39;_id &gt; 0&#39;</span> \
  <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">tags</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span> <span class="s1">&#39;tags,year &gt;= 2020&#39;</span> \
  <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">tags</span><span class="p">]</span><span class="o">.</span><span class="n">output_columns</span> <span class="n">_key</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">_nsubrecs</span>
</pre></div>
</div>
</li>
<li><p>Fixed a bug that the near phrase search did not match when the same phrase occurs multiple times as below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Entries</span> <span class="n">TABLE_NO_KEY</span>
<span class="n">column_create</span> <span class="n">Entries</span> <span class="n">content</span> <span class="n">COLUMN_SCALAR</span> <span class="n">Text</span>

<span class="n">table_create</span> <span class="n">Terms</span> <span class="n">TABLE_PAT_KEY</span> <span class="n">ShortText</span> \
  <span class="o">--</span><span class="n">default_tokenizer</span> <span class="n">TokenNgram</span> \
  <span class="o">--</span><span class="n">normalizer</span> <span class="n">NormalizerNFKC121</span>
<span class="n">column_create</span> <span class="n">Terms</span> <span class="n">entries_content</span> <span class="n">COLUMN_INDEX</span><span class="o">|</span><span class="n">WITH_POSITION</span> <span class="n">Entries</span> <span class="n">content</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Entries</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;a x a x b x x&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;a x x b x&quot;</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">select</span> <span class="n">Entries</span> \
  <span class="o">--</span><span class="n">match_columns</span> <span class="n">content</span> \
  <span class="o">--</span><span class="n">query</span> <span class="s1">&#39;*NP2&quot;a b&quot;&#39;</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="s1">&#39;_score, content&#39;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="id60">
<h2>Thanks<a class="headerlink" href="#id60" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Hung Nguyen V</p></li>
<li><p>naoa</p></li>
<li><p>timgates42 [Provided the patch at GitHub#1155]</p></li>
</ul>
</div>
</div>
<div class="section" id="release-10-0-9-2020-12-01">
<span id="release-10-0-9"></span><h1>Release 10.0.9 - 2020-12-01<a class="headerlink" href="#release-10-0-9-2020-12-01" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id61">
<h2>Improvements<a class="headerlink" href="#id61" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>Improved performance when we specified <code class="docutils literal notranslate"><span class="pre">-1</span></code> to <code class="docutils literal notranslate"><span class="pre">limit</span></code>.</p></li>
<li><p>[<a class="reference internal" href="reference/commands/reference_acquire.html"><span class="doc">reference_acquire</span></a>] Added a new option <code class="docutils literal notranslate"><span class="pre">--auto_release_count</span></code>.</p>
<ul>
<li><p>Groonga reduces a reference count automatically when a request reaching the number of value that is specified in <code class="docutils literal notranslate"><span class="pre">--auto_release_count</span></code>.</p></li>
<li><p>For example, the acquired reference of <code class="docutils literal notranslate"><span class="pre">Users</span></code> is released automatically after the second <code class="docutils literal notranslate"><span class="pre">status</span></code> is processed as below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">reference_acquire</span> <span class="o">--</span><span class="n">target_name</span> <span class="n">Users</span> <span class="o">--</span><span class="n">auto_release_count</span> <span class="mi">2</span>
<span class="n">status</span> <span class="c1"># Users is still referred.</span>
<span class="n">status</span> <span class="c1"># Users&#39; reference is released after this command is processed.</span>
</pre></div>
</div>
</li>
<li><p>We can prevent a leak of the release of acquired reference by this option.</p></li>
</ul>
</li>
<li><p>Modify behavior when Groonga evaluated empty <code class="docutils literal notranslate"><span class="pre">vector</span></code> and <code class="docutils literal notranslate"><span class="pre">uvector</span></code>.</p>
<ul class="simple">
<li><p>Empty <code class="docutils literal notranslate"><span class="pre">vector</span></code> and <code class="docutils literal notranslate"><span class="pre">uvector</span></code> are evaluated to <code class="docutils literal notranslate"><span class="pre">false</span></code> in command version 3.</p>
<ul>
<li><p>This behavior is valid for only command version 3.</p></li>
<li><p>Note that the different behavior until now.</p></li>
</ul>
</li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/normalizers.html"><span class="doc">Normalizers</span></a>] Added a new Normalizer <code class="docutils literal notranslate"><span class="pre">NormalizerNFKC130</span></code> based on Unicode NFKC (Normalization Form Compatibility Composition) for Unicode 13.0.</p></li>
<li><p>[<a class="reference internal" href="reference/token_filters.html"><span class="doc">Token filters</span></a>] Added a new TokenFilter <code class="docutils literal notranslate"><span class="pre">TokenFilterNFKC130</span></code> based on Unicode NFKC (Normalization Form Compatibility Composition) for Unicode 13.0.</p></li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] Improved performance for <code class="docutils literal notranslate"><span class="pre">&quot;_score</span> <span class="pre">=</span> <span class="pre">column</span> <span class="pre">-</span> <span class="pre">X&quot;</span></code>.</p></li>
<li><p>[<a class="reference internal" href="reference/commands/reference_acquire.html"><span class="doc">reference_acquire</span></a>] Improved that <code class="docutils literal notranslate"><span class="pre">--reference_acquire</span></code> doesn’t get unnecessary reference of index column when we specify the <code class="docutils literal notranslate"><span class="pre">--recursive</span> <span class="pre">dependent</span></code> option.</p>
<ul class="simple">
<li><p>From this release, the targets of <code class="docutils literal notranslate"><span class="pre">--recursive</span> <span class="pre">dependent</span></code> are only the target table’s key  and the index column that is set to data column.</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] Add support for ordered near phrase search.</p>
<ul>
<li><p>Until now, the near phrase search have only looked for records that the distance of between specified phrases near.</p></li>
<li><p>This feature look for satisfy the following conditions records.</p>
<ul class="simple">
<li><p>If the distance of between specified phrases is near.</p></li>
<li><p>If the specified phrases are in line with specified order.</p></li>
</ul>
</li>
<li><p>This feature use <code class="docutils literal notranslate"><span class="pre">*ONP</span></code> as an operator. (Note that the operator isn’t <code class="docutils literal notranslate"><span class="pre">*NP</span></code>.)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">$</span></code> is handled as itself in the query syntax. Note that it isn’t a special character in the query syntax.</p></li>
<li><p>If we use script syntax, this feature use as below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Entries</span> <span class="n">TABLE_NO_KEY</span>
<span class="n">column_create</span> <span class="n">Entries</span> <span class="n">content</span> <span class="n">COLUMN_SCALAR</span> <span class="n">Text</span>

<span class="n">table_create</span> <span class="n">Terms</span> <span class="n">TABLE_PAT_KEY</span> <span class="n">ShortText</span> \
  <span class="o">--</span><span class="n">default_tokenizer</span> <span class="s1">&#39;TokenNgram(&quot;unify_alphabet&quot;, false, </span><span class="se">\</span>
<span class="s1">                                  &quot;unify_digit&quot;, false)&#39;</span> \
  <span class="o">--</span><span class="n">normalizer</span> <span class="n">NormalizerNFKC121</span>
<span class="n">column_create</span> <span class="n">Terms</span> <span class="n">entries_content</span> <span class="n">COLUMN_INDEX</span><span class="o">|</span><span class="n">WITH_POSITION</span> <span class="n">Entries</span> <span class="n">content</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Entries</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;abcXYZdef&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;abebcdXYZdef&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;abcdef&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;defXYZabc&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;XYZabc&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;abc123456789def&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;abc12345678def&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;abc1de2def&quot;</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">select</span> <span class="n">Entries</span> <span class="o">--</span><span class="nb">filter</span> <span class="s1">&#39;content *ONP &quot;abc def&quot;&#39;</span> <span class="o">--</span><span class="n">output_columns</span> <span class="s1">&#39;_score, content&#39;</span>
<span class="p">[</span>
  <span class="p">[</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mf">0.0</span><span class="p">,</span>
    <span class="mf">0.0</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="p">[</span>
      <span class="p">[</span>
        <span class="mi">4</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="p">[</span>
          <span class="s2">&quot;_score&quot;</span><span class="p">,</span>
          <span class="s2">&quot;Int32&quot;</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;content&quot;</span><span class="p">,</span>
          <span class="s2">&quot;Text&quot;</span>
        <span class="p">]</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;abcXYZdef&quot;</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;abcdef&quot;</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;abc12345678def&quot;</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;abc1de2def&quot;</span>
      <span class="p">]</span>
    <span class="p">]</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
</li>
<li><p>If we use query syntax, this feature use as below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">Entries</span> <span class="o">--</span><span class="n">query</span> <span class="s1">&#39;content:*ONP &quot;abc def&quot;&#39;</span> <span class="o">--</span><span class="n">output_columns</span> <span class="s1">&#39;_score, content&#39;</span>
<span class="p">[</span>
  <span class="p">[</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mf">0.0</span><span class="p">,</span>
    <span class="mf">0.0</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="p">[</span>
      <span class="p">[</span>
        <span class="mi">4</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="p">[</span>
          <span class="s2">&quot;_score&quot;</span><span class="p">,</span>
          <span class="s2">&quot;Int32&quot;</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;content&quot;</span><span class="p">,</span>
          <span class="s2">&quot;Text&quot;</span>
        <span class="p">]</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;abcXYZdef&quot;</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;abcdef&quot;</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;abc12345678def&quot;</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;abc1de2def&quot;</span>
      <span class="p">]</span>
    <span class="p">]</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>[httpd] Updated bundled nginx to 1.19.5.</p></li>
</ul>
</div>
<div class="section" id="id62">
<h2>Fixes<a class="headerlink" href="#id62" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>[<a class="reference internal" href="reference/executables/groonga-server-http.html"><span class="doc">Groonga HTTP server</span></a>] Fixed that Groonga HTTP server finished without waiting all woker threads finished completely.</p>
<ul>
<li><p>Until now, Groonga HTTP server had started the process of finish after worker threads finished itself process.
However, worker threads may not finish completely at this timing. Therefore, Groonga HTTP server may crashed according to timing. Because Groonga HTTP server may free area of memory that worker threads are using them yet.</p></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="release-10-0-8-2020-10-29">
<span id="release-10-0-8"></span><h1>Release 10.0.8 - 2020-10-29<a class="headerlink" href="#release-10-0-8-2020-10-29" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id63">
<h2>Improvements<a class="headerlink" href="#id63" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] Added support for large drilldown keys.</p>
<ul>
<li><p>The maximum on the key size of Groonga’s tables are 4KiB.
However, if we specify multiple keys in drilldown, the size of drilldown keys may be larger than 4KiB.</p>
<ul class="simple">
<li><p>For example, if the total size for <code class="docutils literal notranslate"><span class="pre">tag</span></code> key and <code class="docutils literal notranslate"><span class="pre">n_like</span></code> key is lager than 4KiB in the following case,
the drilldown had failed.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">Entries</span> \
  <span class="o">--</span><span class="n">limit</span> <span class="o">-</span><span class="mi">1</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="n">tag</span><span class="p">,</span><span class="n">n_likes</span> \
  <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">tag</span><span class="o">.</span><span class="n">n_likes</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span> <span class="n">tag</span><span class="p">,</span><span class="n">n_likes</span> \
  <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">tag</span><span class="o">.</span><span class="n">n_likes</span><span class="p">]</span><span class="o">.</span><span class="n">output_columns</span> <span class="n">_value</span><span class="o">.</span><span class="n">tag</span><span class="p">,</span><span class="n">_value</span><span class="o">.</span><span class="n">n_likes</span><span class="p">,</span><span class="n">_nsubrecs</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Because the drilldown packes specifying all keys for drilldown. So, if each the size of drilldown key is large,
the size of the packed drilldown keys is larger than 4KiB.</p></li>
</ul>
</li>
<li><p>This feature requires <a class="reference external" href="https://github.com/Cyan4973/xxHash">xxHash</a> .</p>
<ul class="simple">
<li><p>However, if we install Groonga from package, we can use this feature without doing anything special.
Because Groonga’s package already include <a class="reference external" href="https://github.com/Cyan4973/xxHash">xxHash</a> .</p></li>
</ul>
</li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] Added support for handling as the same dynamic column even if columns refer to different tables.</p>
<ul>
<li><p>We can’t have handled the same dynamic column if columns refer to different tables until now.
Because the type of columns is different.</p></li>
<li><p>However, from this version, we can handle the same dynamic column even if columns refer to different tables by casting to built-in types as below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Store_A</span> <span class="n">TABLE_HASH_KEY</span> <span class="n">ShortText</span>
<span class="n">table_create</span> <span class="n">Store_B</span> <span class="n">TABLE_HASH_KEY</span> <span class="n">ShortText</span>

<span class="n">table_create</span> <span class="n">Customers</span> <span class="n">TABLE_HASH_KEY</span> <span class="n">Int32</span>
<span class="n">column_create</span> <span class="n">Customers</span> <span class="n">customers_A</span> <span class="n">COLUMN_VECTOR</span> <span class="n">Store_A</span>
<span class="n">column_create</span> <span class="n">Customers</span> <span class="n">customers_B</span> <span class="n">COLUMN_VECTOR</span> <span class="n">Store_B</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Customers</span>
<span class="p">[</span>
  <span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="mi">1604020694</span><span class="p">,</span> <span class="s2">&quot;customers_A&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="s2">&quot;C&quot;</span><span class="p">]},</span>
  <span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="mi">1602724694</span><span class="p">,</span> <span class="s2">&quot;customers_B&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Z&quot;</span><span class="p">,</span> <span class="s2">&quot;V&quot;</span><span class="p">,</span> <span class="s2">&quot;Y&quot;</span><span class="p">,</span> <span class="s2">&quot;T&quot;</span><span class="p">]},</span>
<span class="p">]</span>

<span class="n">select</span> <span class="n">Customers</span> \
  <span class="o">--</span><span class="nb">filter</span> <span class="s1">&#39;_key == 1604020694&#39;</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">customers</span><span class="p">]</span><span class="o">.</span><span class="n">stage</span> <span class="n">output</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">customers</span><span class="p">]</span><span class="o">.</span><span class="n">flags</span> <span class="n">COLUMN_VECTOR</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">customers</span><span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="n">ShortText</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">customers</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="s1">&#39;customers_A&#39;</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="s1">&#39;_key, customers&#39;</span>
</pre></div>
</div>
</li>
<li><p>We have needed to set <code class="docutils literal notranslate"><span class="pre">Store_A</span></code> or <code class="docutils literal notranslate"><span class="pre">Store_B</span></code> in the <code class="docutils literal notranslate"><span class="pre">type</span></code> of <code class="docutils literal notranslate"><span class="pre">customers</span></code> column until now.</p></li>
<li><p>The type of <code class="docutils literal notranslate"><span class="pre">customers_A</span></code> column cast to <code class="docutils literal notranslate"><span class="pre">ShortText</span></code> in the above example.</p></li>
<li><p>By this, we can also set the value of <code class="docutils literal notranslate"><span class="pre">customers_B</span></code> in the value of <code class="docutils literal notranslate"><span class="pre">customers</span></code> column.
Because both the key of <code class="docutils literal notranslate"><span class="pre">customers_A</span></code> and <code class="docutils literal notranslate"><span class="pre">customers_B</span></code> are <code class="docutils literal notranslate"><span class="pre">ShortText</span></code> type.</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] Improved performance when the number of records for search result are huge.</p>
<ul class="simple">
<li><p>This optimization works when below cases.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">--filter</span> <span class="pre">'column</span> <span class="pre">&lt;=</span> <span class="pre">&quot;value&quot;'</span></code> or <code class="docutils literal notranslate"><span class="pre">--filter</span> <span class="pre">'column</span> <span class="pre">&gt;=</span> <span class="pre">&quot;value&quot;'</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--filter</span> <span class="pre">'column</span> <span class="pre">==</span> <span class="pre">&quot;value&quot;'</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--filter</span> <span class="pre">'between(...)'</span></code> or <code class="docutils literal notranslate"><span class="pre">--filter</span> <span class="pre">'between(_key,</span> <span class="pre">...)'</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--filter</span> <span class="pre">'sub_filter(reference_column,</span> <span class="pre">...)'</span></code></p></li>
<li><p>Comparing against <code class="docutils literal notranslate"><span class="pre">_key</span></code> such as <code class="docutils literal notranslate"><span class="pre">--filter</span> <span class="pre">'_key</span> <span class="pre">&gt;</span> <span class="pre">&quot;value&quot;'</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--filter</span> <span class="pre">'geo_in_circle(...)'</span></code></p></li>
</ul>
</li>
</ul>
</li>
<li><p>Updated bundled LZ4 to 1.9.2 from 1.8.2.</p></li>
<li><p>Added support xxHash 0.8</p></li>
<li><p>[httpd] Updated bundled nginx to 1.19.4.</p></li>
</ul>
</div>
<div class="section" id="id65">
<h2>Fixes<a class="headerlink" href="#id65" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Fixed the following bugs related the browser based administration tool. [GitHub#1139][Reported by sutamin]</p>
<ul>
<li><p>The problem that Groonga’s logo had not been displayed.</p></li>
<li><p>The problem that the throughput chart had not been displayed on the index page for Japanese.</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/functions/between.html"><span class="doc">between</span></a>] Fixed a bug that <code class="docutils literal notranslate"><span class="pre">between(_key,</span> <span class="pre">...)</span></code> is always evaluated by sequential search.</p></li>
</ul>
</div>
<div class="section" id="id66">
<h2>Thanks<a class="headerlink" href="#id66" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>sutamin</p></li>
</ul>
</div>
</div>
<div class="section" id="release-10-0-7-2020-09-29">
<span id="release-10-0-7"></span><h1>Release 10.0.7 - 2020-09-29<a class="headerlink" href="#release-10-0-7-2020-09-29" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id67">
<h2>Improvements<a class="headerlink" href="#id67" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>[highlight], [<a class="reference internal" href="reference/functions/highlight_full.html"><span class="doc">highlight_full</span></a>] Added support for normalizer options.</p></li>
<li><p>[<a class="reference internal" href="reference/command/return_code.html"><span class="doc">Return code</span></a>] Added a new return code <code class="docutils literal notranslate"><span class="pre">GRN_CONNECTION_RESET</span></code> for resetting connection.</p>
<ul>
<li><p>it is returned when an existing connection was forcibly close by the remote host.</p></li>
</ul>
</li>
<li><p>Dropped Ubuntu 19.10 (Eoan Ermine).</p>
<ul>
<li><p>Because this version has been EOL.</p></li>
</ul>
</li>
<li><p>[httpd] Updated bundled nginx to 1.19.2.</p></li>
<li><p>[<a class="reference internal" href="reference/executables/grndb.html"><span class="doc">grndb</span></a>] Added support for detecting duplicate keys.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">grndb</span> <span class="pre">check</span></code> is also able to detect duplicate keys since this release.</p></li>
<li><p>This check valid except a table of <code class="docutils literal notranslate"><span class="pre">TABLE_NO_KEY</span></code>.</p></li>
<li><p>If the table that was detected duplicate keys by <code class="docutils literal notranslate"><span class="pre">grndb</span> <span class="pre">check</span></code> has only index columns, we can recover by <code class="docutils literal notranslate"><span class="pre">grndb</span> <span class="pre">recover</span></code>.</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/table_create.html"><span class="doc">table_create</span></a>], [<a class="reference internal" href="reference/commands/column_create.html"><span class="doc">column_create</span></a>] Added a new option <code class="docutils literal notranslate"><span class="pre">--path</span></code></p>
<ul>
<li><p>We can store specified a table or a column to any path using this option.</p></li>
<li><p>This option is useful if we want to store a table or a column that
we often use to fast storage (e.g. SSD) and store them that we don’t often
use to slow storage (e.g. HDD).</p></li>
<li><p>We can specify both relative path and absolute path in this option.</p>
<ul>
<li><p>If we specify relative path in this option, the path is resolved the path of <code class="docutils literal notranslate"><span class="pre">groonga</span></code> process as the origin.</p></li>
</ul>
</li>
<li><p>However, if we specify <code class="docutils literal notranslate"><span class="pre">--path</span></code>, the result of <code class="docutils literal notranslate"><span class="pre">dump</span></code> command includes <code class="docutils literal notranslate"><span class="pre">--path</span></code> informations.</p>
<ul>
<li><p>Therefore, if we specify <code class="docutils literal notranslate"><span class="pre">--path</span></code>, we can’t restore to host in different enviroment.</p>
<ul>
<li><p>Because the directory configuration and the location of <code class="docutils literal notranslate"><span class="pre">groonga</span></code> process in different by each enviroment.</p></li>
</ul>
</li>
<li><p>If we don’t want include <code class="docutils literal notranslate"><span class="pre">--path</span></code> informations to a dump, we need specify <code class="docutils literal notranslate"><span class="pre">--dump_paths</span> <span class="pre">no</span></code> in <code class="docutils literal notranslate"><span class="pre">dump</span></code> command.</p></li>
</ul>
</li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/dump.html"><span class="doc">dump</span></a>] Added a new option <code class="docutils literal notranslate"><span class="pre">--dump_paths</span></code>.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">--dump_paths</span></code> option control whether <code class="docutils literal notranslate"><span class="pre">--path</span></code> is dumped or not.</p></li>
<li><p>The default value of it is <code class="docutils literal notranslate"><span class="pre">yes</span></code>.</p></li>
<li><p>If we specify <code class="docutils literal notranslate"><span class="pre">--path</span></code> when we create tables or columns and we don’t want include <code class="docutils literal notranslate"><span class="pre">--path</span></code> informations to a dump, we specify <code class="docutils literal notranslate"><span class="pre">no</span></code> into <code class="docutils literal notranslate"><span class="pre">--dump_paths</span></code> when we execute <code class="docutils literal notranslate"><span class="pre">dump</span></code> command.</p></li>
</ul>
</li>
<li><p>[functions] Added a new function <code class="docutils literal notranslate"><span class="pre">string_toknize()</span></code>.</p>
<ul>
<li><p>It tokenizes the column value that is specified in the second argument with the tokenizer that is specified in the first argument.</p></li>
</ul>
</li>
<li><p>[tokenizers] Added a new tokenizer <code class="docutils literal notranslate"><span class="pre">TokenDocumentVectorTFIDF</span></code> (experimental).</p>
<ul>
<li><p>It generates automatically document vector by TF-IDF.</p></li>
</ul>
</li>
<li><p>[tokenizers] Added a new tokenizer <code class="docutils literal notranslate"><span class="pre">TokenDocumentVectorBM25</span></code> (experimental).</p>
<ul>
<li><p>It generates automatically document vector by BM25.</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] Added support for near search in same sentence.</p></li>
</ul>
</div>
<div class="section" id="id68">
<h2>Fixes<a class="headerlink" href="#id68" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>[<a class="reference internal" href="reference/commands/load.html"><span class="doc">load</span></a>] Fixed a bug that <code class="docutils literal notranslate"><span class="pre">load</span></code> didn’t a return response when we executed it against 257 columns.</p>
<ul>
<li><p>This bug may occur from 10.0.4 or later.</p></li>
<li><p>This bug only occur when we load data by using <code class="docutils literal notranslate"><span class="pre">[a,</span> <span class="pre">b,</span> <span class="pre">c,</span> <span class="pre">...]</span></code> format.</p>
<ul>
<li><p>If we load data by using <code class="docutils literal notranslate"><span class="pre">[{...}]</span></code>, this bug doesn’t occur.</p></li>
</ul>
</li>
</ul>
</li>
<li><p>[MessagePack] Fixed a bug that float32 value wasn’t unpacked correctly.</p></li>
<li><p>Fixed the following bugs related multi column index.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">_score</span></code> may be broken with full text search.</p></li>
<li><p>The records that couldn’t hit might hit.</p></li>
<li><p>Please refer to the following URL for the details about occurrence conditionin of this bug.</p>
<ul>
<li><p><a class="reference external" href="https://groonga.org/en/blog/2020/09/29/groonga-10.0.7.html#multi-column-index">https://groonga.org/en/blog/2020/09/29/groonga-10.0.7.html#multi-column-index</a></p></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="release-10-0-6-2020-08-29">
<span id="release-10-0-6"></span><h1>Release 10.0.6 - 2020-08-29<a class="headerlink" href="#release-10-0-6-2020-08-29" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id69">
<h2>Improvements<a class="headerlink" href="#id69" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>[<a class="reference internal" href="reference/commands/logical_range_filter.html"><span class="doc">logical_range_filter</span></a>] Improved search plan for large data.</p>
<ul>
<li><p>Normally, <code class="docutils literal notranslate"><span class="pre">logical_range_filter</span></code> is faster than <code class="docutils literal notranslate"><span class="pre">logical_select</span></code>.
However, it had been slower than <code class="docutils literal notranslate"><span class="pre">logical_select</span></code> in the below case.</p>
<ul>
<li><p>If Groonga can’t get the number of required records easily, it has the feature that switches index search from sequential search. (Normally, <code class="docutils literal notranslate"><span class="pre">logical_range_filter</span></code> uses a sequential search when records of search target are many.)</p></li>
<li><p>The search process for it is almost the same as <code class="docutils literal notranslate"><span class="pre">logical_select</span></code> if the above switching occurred.
So, <code class="docutils literal notranslate"><span class="pre">logical_range_filter</span></code> is severalfold slower than <code class="docutils literal notranslate"><span class="pre">logical_select</span></code> in the above case if the search target is large data.
Because <code class="docutils literal notranslate"><span class="pre">logical_range_filter</span></code> executes sort after the search.</p></li>
</ul>
</li>
<li><p>If we search for large data, Groonga easily use sequential search than until now since this release.</p></li>
<li><p>Therefore, <code class="docutils literal notranslate"><span class="pre">logical_range_filter</span></code> will improve performance. Because the case of the search process almost the same as <code class="docutils literal notranslate"><span class="pre">logical_select</span></code> decreases.</p></li>
</ul>
</li>
<li><p>[httpd] Updated bundled nginx to 1.19.1.</p></li>
<li><p>Modify how to install into Debian GNU/Linux.</p>
<ul>
<li><p>We modify to use <code class="docutils literal notranslate"><span class="pre">groonga-apt-source</span></code> instead of <code class="docutils literal notranslate"><span class="pre">groonga-archive-keyring</span></code>. Because the <code class="docutils literal notranslate"><span class="pre">lintian</span></code> command recommends using <code class="docutils literal notranslate"><span class="pre">apt-source</span></code> if a package that it puts files under the <code class="docutils literal notranslate"><span class="pre">/etc/apt/sources.lists.d/</span></code>.</p>
<ul>
<li><p>The <code class="docutils literal notranslate"><span class="pre">lintian</span></code> command is the command which checks for many common packaging errors.</p></li>
<li><p>Please also refer to the following URL for the details about installation procedures.</p>
<ul>
<li><p><a class="reference external" href="https://groonga.org/docs/install/debian.html">https://groonga.org/docs/install/debian.html</a></p></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/logical_select.html"><span class="doc">logical_select</span></a>] Added a support for <code class="docutils literal notranslate"><span class="pre">highlight_html</span></code> and <code class="docutils literal notranslate"><span class="pre">highlight_full</span></code> .</p></li>
<li><p>Added support for recycling the IDs of records that are deleted when an array without value space delete.[GitHub#mroonga/mroonga#327][Reported by gaeeyo]</p>
<ul>
<li><p>If an array that doesn’t have value space is deleted, deleted IDs are never recycled.</p></li>
<li><p>Groonga had used large storage space by large ID. Because it uses large storage space by itself.</p>
<ul>
<li><p>For example, large ID is caused after many adds and deletes like Mroonga’s <code class="docutils literal notranslate"><span class="pre">mroonga_operations</span></code></p></li>
</ul>
</li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] Improved performance of full-text-search without index.</p></li>
<li><p>[<a class="reference internal" href="reference/function.html"><span class="doc">Function</span></a>] Improved performance for calling of function that all arguments a variable reference or literal.</p></li>
<li><p>[<a class="reference internal" href="reference/indexing.html"><span class="doc">Indexing</span></a>] Improved performance of offline index construction by using token column. [GitHub#1126][Patched by naoa]</p></li>
<li><p>Improved performance for <code class="docutils literal notranslate"><span class="pre">&quot;_score</span> <span class="pre">=</span> <span class="pre">func(...)&quot;</span></code>.</p>
<ul>
<li><p>The performance when the <code class="docutils literal notranslate"><span class="pre">_score</span></code> value calculate by using only function like <code class="docutils literal notranslate"><span class="pre">&quot;_score</span> <span class="pre">=</span> <span class="pre">func(...)&quot;</span></code> improved.</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id70">
<h2>Fixes<a class="headerlink" href="#id70" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Fixed a bug that garbage may be included in response after response send error.</p>
<ul>
<li><p>It may occur if a client didn’t read all responses and closed the connection.</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id71">
<h2>Thanks<a class="headerlink" href="#id71" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>gaeeyo</p></li>
<li><p>naoa</p></li>
</ul>
</div>
</div>
<div class="section" id="release-10-0-5-2020-07-30">
<span id="release-10-0-5"></span><h1>Release 10.0.5 - 2020-07-30<a class="headerlink" href="#release-10-0-5-2020-07-30" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id72">
<h2>Improvements<a class="headerlink" href="#id72" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] Added support for storing reference in table that we specify with <code class="docutils literal notranslate"><span class="pre">--load_table</span></code>.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">--load_table</span></code> is a feature that stores search results to the table in a prepared.</p>
<ul class="simple">
<li><p>If the searches are executed multiple times, we can cache the search results by storing them to this table.</p></li>
<li><p>We can shorten the search times that the search after the first time by using this table.</p></li>
</ul>
</li>
<li><p>We can store a reference to other tables into the key of this table as below since this release.</p>
<ul class="simple">
<li><p>We can make a smaller size of this table. Because we only store references without store column values.</p></li>
<li><p>If we search against this table, we can search by using indexes for reference destination.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Logs</span> <span class="n">TABLE_HASH_KEY</span> <span class="n">ShortText</span>
<span class="n">column_create</span> <span class="n">Logs</span> <span class="n">timestamp</span> <span class="n">COLUMN_SCALAR</span> <span class="n">Time</span>

<span class="n">table_create</span> <span class="n">Times</span> <span class="n">TABLE_PAT_KEY</span> <span class="n">Time</span>
<span class="n">column_create</span> <span class="n">Times</span> <span class="n">logs_timestamp</span> <span class="n">COLUMN_INDEX</span> <span class="n">Logs</span> <span class="n">timestamp</span>

<span class="n">table_create</span> <span class="n">LoadedLogs</span> <span class="n">TABLE_HASH_KEY</span> <span class="n">Logs</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Logs</span>
<span class="p">[</span>
<span class="p">{</span>
  <span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;2015-02-03:1&quot;</span><span class="p">,</span>
  <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2015-02-03 10:49:00&quot;</span>
<span class="p">},</span>
<span class="p">{</span>
  <span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;2015-02-03:2&quot;</span><span class="p">,</span>
  <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2015-02-03 12:49:00&quot;</span>
<span class="p">},</span>
<span class="p">{</span>
  <span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;2015-02-04:1&quot;</span><span class="p">,</span>
  <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2015-02-04 00:00:00&quot;</span>
<span class="p">}</span>
<span class="p">]</span>

<span class="n">select</span> \
  <span class="n">Logs</span> \
  <span class="o">--</span><span class="n">load_table</span> <span class="n">LoadedLogs</span> \
  <span class="o">--</span><span class="n">load_columns</span> <span class="s2">&quot;_key&quot;</span> \
  <span class="o">--</span><span class="n">load_values</span> <span class="s2">&quot;_key&quot;</span> \
  <span class="o">--</span><span class="n">limit</span> <span class="mi">0</span>

<span class="n">select</span> \
  <span class="o">--</span><span class="n">table</span> <span class="n">LoadedLogs</span> \
  <span class="o">--</span><span class="nb">filter</span> <span class="s1">&#39;timestamp &gt;= &quot;2015-02-03 12:49:00&quot;&#39;</span>
<span class="p">[</span>
  <span class="p">[</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mf">0.0</span><span class="p">,</span>
    <span class="mf">0.0</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="p">[</span>
      <span class="p">[</span>
        <span class="mi">2</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="p">[</span>
          <span class="s2">&quot;_id&quot;</span><span class="p">,</span>
          <span class="s2">&quot;UInt32&quot;</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;_key&quot;</span><span class="p">,</span>
          <span class="s2">&quot;ShortText&quot;</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;timestamp&quot;</span><span class="p">,</span>
          <span class="s2">&quot;Time&quot;</span>
        <span class="p">]</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">2</span><span class="p">,</span>
        <span class="s2">&quot;2015-02-03:2&quot;</span><span class="p">,</span>
        <span class="mf">1422935340.0</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">3</span><span class="p">,</span>
        <span class="s2">&quot;2015-02-04:1&quot;</span><span class="p">,</span>
        <span class="mf">1422975600.0</span>
      <span class="p">]</span>
    <span class="p">]</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] Improved sort performance on below cases.</p>
<ul class="simple">
<li><p>When many sort keys need ID resolution.</p>
<ul>
<li><p>For example, the following expression needs ID resolution.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">--filter</span> <span class="pre">true</span> <span class="pre">--sort_keys</span> <span class="pre">column</span></code></p></li>
</ul>
</li>
<li><p>For example, the following expression doesn’t need ID resolution.
Because the <code class="docutils literal notranslate"><span class="pre">_score</span></code> pseudo column exists in the result table not the source table.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">--filter</span> <span class="pre">true</span> <span class="pre">--sort_keys</span> <span class="pre">_score</span></code></p></li>
</ul>
</li>
</ul>
</li>
<li><p>When a sort target table has a key.</p>
<ul>
<li><p>Therefore, <code class="docutils literal notranslate"><span class="pre">TABLE_NO_KEY</span></code> isn’t supported this improvement.</p></li>
</ul>
</li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] Improved performance a bit on below cases.</p>
<ul class="simple">
<li><p>A case of searching for many records matches.</p></li>
<li><p>A case of drilldown for many records.</p></li>
</ul>
</li>
<li><p>[aggregator] Added support for score accessor for target. [GitHub#1120][Patched by naoa]</p>
<ul>
<li><p>For example, we can <code class="docutils literal notranslate"><span class="pre">_score</span></code> subject to <code class="docutils literal notranslate"><span class="pre">aggregator_*</span></code> as below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Items</span> <span class="n">TABLE_HASH_KEY</span> <span class="n">ShortText</span>
<span class="n">column_create</span> <span class="n">Items</span> <span class="n">price</span> <span class="n">COLUMN_SCALAR</span> <span class="n">UInt32</span>
<span class="n">column_create</span> <span class="n">Items</span> <span class="n">tag</span> <span class="n">COLUMN_SCALAR</span> <span class="n">ShortText</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Items</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;Book&quot;</span><span class="p">,</span>  <span class="s2">&quot;price&quot;</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span> <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="s2">&quot;A&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;Note&quot;</span><span class="p">,</span>  <span class="s2">&quot;price&quot;</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span> <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="s2">&quot;B&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;Box&quot;</span><span class="p">,</span>   <span class="s2">&quot;price&quot;</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span>  <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="s2">&quot;B&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;Pen&quot;</span><span class="p">,</span>   <span class="s2">&quot;price&quot;</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span>  <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="s2">&quot;A&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;Food&quot;</span><span class="p">,</span>  <span class="s2">&quot;price&quot;</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span>  <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="s2">&quot;C&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;Drink&quot;</span><span class="p">,</span> <span class="s2">&quot;price&quot;</span><span class="p">:</span> <span class="mi">300</span><span class="p">,</span>  <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="s2">&quot;B&quot;</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">select</span> <span class="n">Items</span> \
  <span class="o">--</span><span class="nb">filter</span> <span class="n">true</span> \
  <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">tag</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span> <span class="n">tag</span> \
  <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">tag</span><span class="p">]</span><span class="o">.</span><span class="n">output_columns</span> <span class="n">_key</span><span class="p">,</span><span class="n">_nsubrecs</span><span class="p">,</span><span class="n">score_mean</span> \
  <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">tag</span><span class="p">]</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">score_mean</span><span class="p">]</span><span class="o">.</span><span class="n">stage</span> <span class="n">group</span> \
  <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">tag</span><span class="p">]</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">score_mean</span><span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="n">Float</span> \
  <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">tag</span><span class="p">]</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">score_mean</span><span class="p">]</span><span class="o">.</span><span class="n">flags</span> <span class="n">COLUMN_SCALAR</span> \
  <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">tag</span><span class="p">]</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">score_mean</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="s1">&#39;aggregator_mean(_score)&#39;</span>
<span class="p">[</span>
  <span class="p">[</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mf">0.0</span><span class="p">,</span>
    <span class="mf">0.0</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="p">[</span>
      <span class="p">[</span>
        <span class="mi">6</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="p">[</span>
          <span class="s2">&quot;_id&quot;</span><span class="p">,</span>
          <span class="s2">&quot;UInt32&quot;</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;_key&quot;</span><span class="p">,</span>
          <span class="s2">&quot;ShortText&quot;</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;price&quot;</span><span class="p">,</span>
          <span class="s2">&quot;UInt32&quot;</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;tag&quot;</span><span class="p">,</span>
          <span class="s2">&quot;ShortText&quot;</span>
        <span class="p">]</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;Book&quot;</span><span class="p">,</span>
        <span class="mi">1000</span><span class="p">,</span>
        <span class="s2">&quot;A&quot;</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">2</span><span class="p">,</span>
        <span class="s2">&quot;Note&quot;</span><span class="p">,</span>
        <span class="mi">1000</span><span class="p">,</span>
        <span class="s2">&quot;B&quot;</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">3</span><span class="p">,</span>
        <span class="s2">&quot;Box&quot;</span><span class="p">,</span>
        <span class="mi">500</span><span class="p">,</span>
        <span class="s2">&quot;B&quot;</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">4</span><span class="p">,</span>
        <span class="s2">&quot;Pen&quot;</span><span class="p">,</span>
        <span class="mi">500</span><span class="p">,</span>
        <span class="s2">&quot;A&quot;</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">5</span><span class="p">,</span>
        <span class="s2">&quot;Food&quot;</span><span class="p">,</span>
        <span class="mi">500</span><span class="p">,</span>
        <span class="s2">&quot;C&quot;</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">6</span><span class="p">,</span>
        <span class="s2">&quot;Drink&quot;</span><span class="p">,</span>
        <span class="mi">300</span><span class="p">,</span>
        <span class="s2">&quot;B&quot;</span>
      <span class="p">]</span>
    <span class="p">],</span>
    <span class="p">{</span>
      <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">[</span>
          <span class="mi">3</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="p">[</span>
            <span class="s2">&quot;_key&quot;</span><span class="p">,</span>
            <span class="s2">&quot;ShortText&quot;</span>
          <span class="p">],</span>
          <span class="p">[</span>
            <span class="s2">&quot;_nsubrecs&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Int32&quot;</span>
          <span class="p">],</span>
          <span class="p">[</span>
            <span class="s2">&quot;score_mean&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Float&quot;</span>
          <span class="p">]</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;A&quot;</span><span class="p">,</span>
          <span class="mi">2</span><span class="p">,</span>
          <span class="mf">1.0</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;B&quot;</span><span class="p">,</span>
          <span class="mi">3</span><span class="p">,</span>
          <span class="mf">1.0</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;C&quot;</span><span class="p">,</span>
          <span class="mi">1</span><span class="p">,</span>
          <span class="mf">1.0</span>
        <span class="p">]</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/indexing.html"><span class="doc">Indexing</span></a>] Improved performance of offline index construction on VC++ version.</p></li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] Use <code class="docutils literal notranslate"><span class="pre">null</span></code> instead <code class="docutils literal notranslate"><span class="pre">NaN</span></code>, <code class="docutils literal notranslate"><span class="pre">Infinity</span></code>, and <code class="docutils literal notranslate"><span class="pre">-Infinity</span></code> when Groonga outputs result for JSON format.</p>
<ul class="simple">
<li><p>Because JSON doesn’t support them.</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] Add support fot aggregating standard deviation value.</p>
<ul>
<li><p>For example, we can calculate a standard deviation for every group as below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Items</span> <span class="n">TABLE_HASH_KEY</span> <span class="n">ShortText</span>
<span class="n">column_create</span> <span class="n">Items</span> <span class="n">price</span> <span class="n">COLUMN_SCALAR</span> <span class="n">UInt32</span>
<span class="n">column_create</span> <span class="n">Items</span> <span class="n">tag</span> <span class="n">COLUMN_SCALAR</span> <span class="n">ShortText</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Items</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;Book&quot;</span><span class="p">,</span>  <span class="s2">&quot;price&quot;</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span> <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="s2">&quot;A&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;Note&quot;</span><span class="p">,</span>  <span class="s2">&quot;price&quot;</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span> <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="s2">&quot;B&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;Box&quot;</span><span class="p">,</span>   <span class="s2">&quot;price&quot;</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span>  <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="s2">&quot;B&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;Pen&quot;</span><span class="p">,</span>   <span class="s2">&quot;price&quot;</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span>  <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="s2">&quot;A&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;Food&quot;</span><span class="p">,</span>  <span class="s2">&quot;price&quot;</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span>  <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="s2">&quot;C&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;Drink&quot;</span><span class="p">,</span> <span class="s2">&quot;price&quot;</span><span class="p">:</span> <span class="mi">300</span><span class="p">,</span>  <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="s2">&quot;B&quot;</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">select</span> <span class="n">Items</span> \
  <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">tag</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span> <span class="n">tag</span> \
  <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">tag</span><span class="p">]</span><span class="o">.</span><span class="n">output_columns</span> <span class="n">_key</span><span class="p">,</span><span class="n">_nsubrecs</span><span class="p">,</span><span class="n">price_sd</span> \
  <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">tag</span><span class="p">]</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">price_sd</span><span class="p">]</span><span class="o">.</span><span class="n">stage</span> <span class="n">group</span> \
  <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">tag</span><span class="p">]</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">price_sd</span><span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="n">Float</span> \
  <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">tag</span><span class="p">]</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">price_sd</span><span class="p">]</span><span class="o">.</span><span class="n">flags</span> <span class="n">COLUMN_SCALAR</span> \
  <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">tag</span><span class="p">]</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">price_sd</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="s1">&#39;aggregator_sd(price)&#39;</span> \
  <span class="o">--</span><span class="n">output_pretty</span> <span class="n">yes</span>
<span class="p">[</span>
  <span class="p">[</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mf">1594339851.924836</span><span class="p">,</span>
    <span class="mf">0.002813816070556641</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="p">[</span>
      <span class="p">[</span>
        <span class="mi">6</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="p">[</span>
          <span class="s2">&quot;_id&quot;</span><span class="p">,</span>
          <span class="s2">&quot;UInt32&quot;</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;_key&quot;</span><span class="p">,</span>
          <span class="s2">&quot;ShortText&quot;</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;price&quot;</span><span class="p">,</span>
          <span class="s2">&quot;UInt32&quot;</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;tag&quot;</span><span class="p">,</span>
          <span class="s2">&quot;ShortText&quot;</span>
        <span class="p">]</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;Book&quot;</span><span class="p">,</span>
        <span class="mi">1000</span><span class="p">,</span>
        <span class="s2">&quot;A&quot;</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">2</span><span class="p">,</span>
        <span class="s2">&quot;Note&quot;</span><span class="p">,</span>
        <span class="mi">1000</span><span class="p">,</span>
        <span class="s2">&quot;B&quot;</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">3</span><span class="p">,</span>
        <span class="s2">&quot;Box&quot;</span><span class="p">,</span>
        <span class="mi">500</span><span class="p">,</span>
        <span class="s2">&quot;B&quot;</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">4</span><span class="p">,</span>
        <span class="s2">&quot;Pen&quot;</span><span class="p">,</span>
        <span class="mi">500</span><span class="p">,</span>
        <span class="s2">&quot;A&quot;</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">5</span><span class="p">,</span>
        <span class="s2">&quot;Food&quot;</span><span class="p">,</span>
        <span class="mi">500</span><span class="p">,</span>
        <span class="s2">&quot;C&quot;</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">6</span><span class="p">,</span>
        <span class="s2">&quot;Drink&quot;</span><span class="p">,</span>
        <span class="mi">300</span><span class="p">,</span>
        <span class="s2">&quot;B&quot;</span>
      <span class="p">]</span>
    <span class="p">],</span>
    <span class="p">{</span>
      <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">[</span>
          <span class="mi">3</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="p">[</span>
            <span class="s2">&quot;_key&quot;</span><span class="p">,</span>
            <span class="s2">&quot;ShortText&quot;</span>
          <span class="p">],</span>
          <span class="p">[</span>
            <span class="s2">&quot;_nsubrecs&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Int32&quot;</span>
          <span class="p">],</span>
          <span class="p">[</span>
            <span class="s2">&quot;price_sd&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Float&quot;</span>
          <span class="p">]</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;A&quot;</span><span class="p">,</span>
          <span class="mi">2</span><span class="p">,</span>
          <span class="mf">250.0</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;B&quot;</span><span class="p">,</span>
          <span class="mi">3</span><span class="p">,</span>
          <span class="mf">294.3920288775949</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;C&quot;</span><span class="p">,</span>
          <span class="mi">1</span><span class="p">,</span>
          <span class="mf">0.0</span>
        <span class="p">]</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
<ul class="simple">
<li><p>We can also calculate sample standard deviation to specifing <code class="docutils literal notranslate"><span class="pre">aggregate_sd(target,</span> <span class="pre">{&quot;unbiased&quot;:</span> <span class="pre">true})</span></code>.</p></li>
</ul>
</li>
</ul>
</li>
<li><p>[Windows] Dropped Visual Studio 2013 support.</p></li>
</ul>
</div>
<div class="section" id="id73">
<h2>Fixes<a class="headerlink" href="#id73" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>[<a class="reference internal" href="reference/executables/groonga-server-http.html"><span class="doc">Groonga HTTP server</span></a>] Fixed a bug that a request can’t halt even if we execute <code class="docutils literal notranslate"><span class="pre">shutdown?mode=immediate</span></code> when the response was halted by error occurrence.</p></li>
<li><p>Fixed a crash bug when an error occurs while a request.</p>
<ul>
<li><p>It only occurs when we use Apache Arrow Format.</p></li>
<li><p>Groonga crashes when we send request to Groonga again after the previous request was halted by error occurrence.</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/functions/between.html"><span class="doc">between</span></a>] Fixed a crash bug when temporary table is used.</p>
<ul>
<li><p>For example, if we specify a dynamic column in the first argument for <code class="docutils literal notranslate"><span class="pre">between</span></code>, Groonga had crashed.</p></li>
</ul>
</li>
<li><p>Fixed a bug that procedure created by plugin is freed unexpectedly.</p>
<ul>
<li><p>It’s only occurred in reference count mode.</p></li>
<li><p>It’s not occurred if we don’t use <code class="docutils literal notranslate"><span class="pre">plugin_register</span></code>.</p></li>
<li><p>It’s not occurred in the process that executes <code class="docutils literal notranslate"><span class="pre">plugin_register</span></code>.</p></li>
<li><p>It’s occurred in the process that doesn’t execute <code class="docutils literal notranslate"><span class="pre">plugin_register</span></code>.</p></li>
</ul>
</li>
<li><p>Fixed a bug that normalization error occurred while static index construction by <code class="docutils literal notranslate"><span class="pre">token_column</span></code>. [GitHub#1122][Reported by naoa]</p></li>
</ul>
</div>
<div class="section" id="id74">
<h2>Thanks<a class="headerlink" href="#id74" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>naoa</p></li>
</ul>
</div>
</div>
<div class="section" id="release-10-0-4-2020-06-29">
<span id="release-10-0-4"></span><h1>Release 10.0.4 - 2020-06-29<a class="headerlink" href="#release-10-0-4-2020-06-29" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id75">
<h2>Improvements<a class="headerlink" href="#id75" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>[<a class="reference internal" href="reference/tables.html"><span class="doc">Tables</span></a>] Added support for registering 400M records into a hash table.</p></li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] Improve scorer performance when the <code class="docutils literal notranslate"><span class="pre">_score</span></code> doesn’t get recursively values.</p>
<ul class="simple">
<li><p>Groonga get recursively value of <code class="docutils literal notranslate"><span class="pre">_score</span></code> when search result is search target.</p></li>
<li><p>For example, the search targets of <code class="docutils literal notranslate"><span class="pre">slices</span></code> are search result. Therefore, if we use <code class="docutils literal notranslate"><span class="pre">slice</span></code> in a query, this improvement doesn’t ineffective.</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/log.html"><span class="doc">Log</span></a>] Improved that we output drilldown keys in query-log.</p></li>
<li><p>[<a class="reference internal" href="reference/commands/reference_acquire.html"><span class="doc">reference_acquire</span></a>], [<a class="reference internal" href="reference/commands/reference_release.html"><span class="doc">reference_release</span></a>] Added new commands for reference count mode.</p>
<ul class="simple">
<li><p>If we need to call multiple <code class="docutils literal notranslate"><span class="pre">load</span></code> in a short time, auto close by the reference count mode will degrade performance.</p></li>
<li><p>We can avoid the performance degrading by calling <code class="docutils literal notranslate"><span class="pre">reference_acquire</span></code> before multiple <code class="docutils literal notranslate"><span class="pre">load</span></code> and calling <code class="docutils literal notranslate"><span class="pre">reference_release</span></code> after multiple <code class="docutils literal notranslate"><span class="pre">load</span></code>.
Between <code class="docutils literal notranslate"><span class="pre">reference_acquire</span></code> and <code class="docutils literal notranslate"><span class="pre">reference_release</span></code>, auto close is disabled.</p>
<ul>
<li><p>Because <code class="docutils literal notranslate"><span class="pre">reference_acquire</span></code> acquires a reference of target objects.</p></li>
</ul>
</li>
<li><p>We can must call <code class="docutils literal notranslate"><span class="pre">reference_release</span></code> after you finish performance impact operations.</p></li>
<li><p>If we don’t call <code class="docutils literal notranslate"><span class="pre">reference_release</span></code>, the reference count mode doesn’t work.</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] Added support for aggregating multiple groups on one time <code class="docutils literal notranslate"><span class="pre">drilldown</span></code>.</p>
<ul>
<li><p>We came to be able to calculate sum or arithmetic mean every different multiple groups on one time <code class="docutils literal notranslate"><span class="pre">drilldown</span></code> as below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Items</span> <span class="n">TABLE_HASH_KEY</span> <span class="n">ShortText</span>
<span class="n">column_create</span> <span class="n">Items</span> <span class="n">price</span> <span class="n">COLUMN_SCALAR</span> <span class="n">UInt32</span>
<span class="n">column_create</span> <span class="n">Items</span> <span class="n">quantity</span> <span class="n">COLUMN_SCALAR</span> <span class="n">UInt32</span>
<span class="n">column_create</span> <span class="n">Items</span> <span class="n">tag</span> <span class="n">COLUMN_SCALAR</span> <span class="n">ShortText</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Items</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;Book&quot;</span><span class="p">,</span>  <span class="s2">&quot;price&quot;</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span> <span class="s2">&quot;quantity&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="s2">&quot;A&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;Note&quot;</span><span class="p">,</span>  <span class="s2">&quot;price&quot;</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span> <span class="s2">&quot;quantity&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>  <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="s2">&quot;B&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;Box&quot;</span><span class="p">,</span>   <span class="s2">&quot;price&quot;</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span>  <span class="s2">&quot;quantity&quot;</span><span class="p">:</span> <span class="mi">15</span><span class="p">,</span>  <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="s2">&quot;B&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;Pen&quot;</span><span class="p">,</span>   <span class="s2">&quot;price&quot;</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span>  <span class="s2">&quot;quantity&quot;</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span>  <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="s2">&quot;A&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;Food&quot;</span><span class="p">,</span>  <span class="s2">&quot;price&quot;</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span>  <span class="s2">&quot;quantity&quot;</span><span class="p">:</span> <span class="mi">111</span><span class="p">,</span> <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="s2">&quot;C&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;Drink&quot;</span><span class="p">,</span> <span class="s2">&quot;price&quot;</span><span class="p">:</span> <span class="mi">300</span><span class="p">,</span>  <span class="s2">&quot;quantity&quot;</span><span class="p">:</span> <span class="mi">22</span><span class="p">,</span>  <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="s2">&quot;B&quot;</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">select</span> <span class="n">Items</span> \
  <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">tag</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span> <span class="n">tag</span> \
  <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">tag</span><span class="p">]</span><span class="o">.</span><span class="n">output_columns</span> <span class="n">_key</span><span class="p">,</span><span class="n">_nsubrecs</span><span class="p">,</span><span class="n">price_sum</span><span class="p">,</span><span class="n">quantity_sum</span> \
  <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">tag</span><span class="p">]</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">price_sum</span><span class="p">]</span><span class="o">.</span><span class="n">stage</span> <span class="n">group</span> \
  <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">tag</span><span class="p">]</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">price_sum</span><span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="n">UInt32</span> \
  <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">tag</span><span class="p">]</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">price_sum</span><span class="p">]</span><span class="o">.</span><span class="n">flags</span> <span class="n">COLUMN_SCALAR</span> \
  <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">tag</span><span class="p">]</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">price_sum</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="s1">&#39;aggregator_sum(price)&#39;</span> \
  <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">tag</span><span class="p">]</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">quantity_sum</span><span class="p">]</span><span class="o">.</span><span class="n">stage</span> <span class="n">group</span> \
  <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">tag</span><span class="p">]</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">quantity_sum</span><span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="n">UInt32</span> \
  <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">tag</span><span class="p">]</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">quantity_sum</span><span class="p">]</span><span class="o">.</span><span class="n">flags</span> <span class="n">COLUMN_SCALAR</span> \
  <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">tag</span><span class="p">]</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">quantity_sum</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="s1">&#39;aggregator_sum(quantity)&#39;</span>
<span class="p">[</span>
  <span class="p">[</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mf">0.0</span><span class="p">,</span>
    <span class="mf">0.0</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="p">[</span>
      <span class="p">[</span>
        <span class="mi">6</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="p">[</span>
          <span class="s2">&quot;_id&quot;</span><span class="p">,</span>
          <span class="s2">&quot;UInt32&quot;</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;_key&quot;</span><span class="p">,</span>
          <span class="s2">&quot;ShortText&quot;</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;price&quot;</span><span class="p">,</span>
          <span class="s2">&quot;UInt32&quot;</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;quantity&quot;</span><span class="p">,</span>
          <span class="s2">&quot;UInt32&quot;</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;tag&quot;</span><span class="p">,</span>
          <span class="s2">&quot;ShortText&quot;</span>
        <span class="p">]</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;Book&quot;</span><span class="p">,</span>
        <span class="mi">1000</span><span class="p">,</span>
        <span class="mi">100</span><span class="p">,</span>
        <span class="s2">&quot;A&quot;</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">2</span><span class="p">,</span>
        <span class="s2">&quot;Note&quot;</span><span class="p">,</span>
        <span class="mi">1000</span><span class="p">,</span>
        <span class="mi">10</span><span class="p">,</span>
        <span class="s2">&quot;B&quot;</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">3</span><span class="p">,</span>
        <span class="s2">&quot;Box&quot;</span><span class="p">,</span>
        <span class="mi">500</span><span class="p">,</span>
        <span class="mi">15</span><span class="p">,</span>
        <span class="s2">&quot;B&quot;</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">4</span><span class="p">,</span>
        <span class="s2">&quot;Pen&quot;</span><span class="p">,</span>
        <span class="mi">500</span><span class="p">,</span>
        <span class="mi">12</span><span class="p">,</span>
        <span class="s2">&quot;A&quot;</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">5</span><span class="p">,</span>
        <span class="s2">&quot;Food&quot;</span><span class="p">,</span>
        <span class="mi">500</span><span class="p">,</span>
        <span class="mi">111</span><span class="p">,</span>
        <span class="s2">&quot;C&quot;</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">6</span><span class="p">,</span>
        <span class="s2">&quot;Drink&quot;</span><span class="p">,</span>
        <span class="mi">300</span><span class="p">,</span>
        <span class="mi">22</span><span class="p">,</span>
        <span class="s2">&quot;B&quot;</span>
      <span class="p">]</span>
    <span class="p">],</span>
    <span class="p">{</span>
      <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">[</span>
          <span class="mi">3</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="p">[</span>
            <span class="s2">&quot;_key&quot;</span><span class="p">,</span>
            <span class="s2">&quot;ShortText&quot;</span>
          <span class="p">],</span>
          <span class="p">[</span>
            <span class="s2">&quot;_nsubrecs&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Int32&quot;</span>
          <span class="p">],</span>
          <span class="p">[</span>
            <span class="s2">&quot;price_sum&quot;</span><span class="p">,</span>
            <span class="s2">&quot;UInt32&quot;</span>
          <span class="p">],</span>
          <span class="p">[</span>
            <span class="s2">&quot;quantity_sum&quot;</span><span class="p">,</span>
            <span class="s2">&quot;UInt32&quot;</span>
          <span class="p">]</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;A&quot;</span><span class="p">,</span>
          <span class="mi">2</span><span class="p">,</span>
          <span class="mi">1500</span><span class="p">,</span>
          <span class="mi">112</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;B&quot;</span><span class="p">,</span>
          <span class="mi">3</span><span class="p">,</span>
          <span class="mi">1800</span><span class="p">,</span>
          <span class="mi">47</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;C&quot;</span><span class="p">,</span>
          <span class="mi">1</span><span class="p">,</span>
          <span class="mi">500</span><span class="p">,</span>
          <span class="mi">111</span>
        <span class="p">]</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/executables/groonga.html"><span class="doc">groonga executable file</span></a>] Added support for <code class="docutils literal notranslate"><span class="pre">--pid-path</span></code> in standalone mode.</p>
<ul class="simple">
<li><p>Because <code class="docutils literal notranslate"><span class="pre">--pid-path</span></code> had been ignored in standalone mode in before version.</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/io_flush.html"><span class="doc">io_flush</span></a>] Added support for reference count mode.</p></li>
<li><p>[<a class="reference internal" href="reference/commands/logical_range_filter.html"><span class="doc">logical_range_filter</span></a>], [<a class="reference internal" href="reference/commands/logical_count.html"><span class="doc">logical_count</span></a>] Added support for reference count mode.</p></li>
<li><p>[<a class="reference internal" href="reference/executables/groonga-server-http.html"><span class="doc">Groonga HTTP server</span></a>] We didn’t add header after the last chunk.</p>
<ul class="simple">
<li><p>Because there is a possibility to exist that the HTTP client ignores header after the last chunk.</p></li>
</ul>
</li>
<li><p>[vector_slice] Added support for a vector that has the value of the <code class="docutils literal notranslate"><span class="pre">Float32</span></code> type. [GitHub#1112 patched by naoa]</p></li>
<li><p>Added support for parallel offline index construction using token column.</p>
<ul class="simple">
<li><p>We came to be able to construct an offline index on parallel threads from data that are tokenized in advance.</p></li>
<li><p>We can tune parameters of parallel offline construction by the following environment variables</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">GRN_TOKEN_COLUMN_PARALLEL_CHUNK_SIZE</span></code> : We specify how many records are processed per thread.</p>
<ul>
<li><p>The default value is <code class="docutils literal notranslate"><span class="pre">1024</span></code> records.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">GRN_TOKEN_COLUMN_PARALLEL_TABLE_SIZE_THRESHOLD</span></code> : We specify how many source records are required for parallel offline construction.</p>
<ul>
<li><p>The default value is <code class="docutils literal notranslate"><span class="pre">102400</span></code> records.</p></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] Improved performance for <code class="docutils literal notranslate"><span class="pre">load_table</span></code> on the reference count mode.</p></li>
</ul>
</div>
<div class="section" id="id76">
<h2>Fixes<a class="headerlink" href="#id76" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Fixed a bug that the database of Groonga was broken when we search by using the dynamic columns that don’t specify a <code class="docutils literal notranslate"><span class="pre">--filter</span></code> and stridden over shard.</p></li>
<li><p>Fixed a bug that <code class="docutils literal notranslate"><span class="pre">Float32</span></code> type had not displayed on a result of <code class="docutils literal notranslate"><span class="pre">schema</span></code> command.</p></li>
<li><p>Fixed a bug that we count in surplus to <code class="docutils literal notranslate"><span class="pre">_nsubrecs</span></code> when the reference <code class="docutils literal notranslate"><span class="pre">uvector</span></code> hasn’t element.</p></li>
</ul>
</div>
<div class="section" id="id77">
<h2>Thanks<a class="headerlink" href="#id77" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>naoa</p></li>
</ul>
</div>
</div>
<div class="section" id="release-10-0-3-2020-05-29">
<span id="release-10-0-3"></span><h1>Release 10.0.3 - 2020-05-29<a class="headerlink" href="#release-10-0-3-2020-05-29" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id78">
<h2>Improvements<a class="headerlink" href="#id78" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>We came to be able to construct an inverted index from data that are tokenized in advance.</p>
<ul>
<li><p>The construct of an index is speeded up from this.</p></li>
<li><p>We need to prepare token column to use this improvement.</p></li>
<li><p>token column is an auto generated value column like an index column.</p></li>
<li><p>token column value is generated from source column value by tokenizing the source column value.</p></li>
<li><p>We can create a token column by setting the source column as below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Terms</span> <span class="n">TABLE_PAT_KEY</span> <span class="n">ShortText</span> \
  <span class="o">--</span><span class="n">normalizer</span> <span class="n">NormalizerNFKC121</span> \
  <span class="o">--</span><span class="n">default_tokenizer</span> <span class="n">TokenNgram</span>

<span class="n">table_create</span> <span class="n">Notes</span> <span class="n">TABLE_NO_KEY</span>
<span class="n">column_create</span> <span class="n">Notes</span> <span class="n">title</span> <span class="n">COLUMN_SCALAR</span> <span class="n">Text</span>

<span class="c1"># The last &quot;title&quot; is the source column.</span>
<span class="n">column_create</span> <span class="n">Notes</span> <span class="n">title_terms</span> <span class="n">COLUMN_VECTOR</span> <span class="n">Terms</span> <span class="n">title</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] We came to be able to specify a <code class="docutils literal notranslate"><span class="pre">vector</span></code> for the argument of a function.</p>
<ul>
<li><p>For example, <code class="docutils literal notranslate"><span class="pre">flags</span></code> options of <code class="docutils literal notranslate"><span class="pre">query</span></code> can describe by a <code class="docutils literal notranslate"><span class="pre">vector</span></code> as below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> \
  <span class="o">--</span><span class="n">table</span> <span class="n">Memos</span> \
  <span class="o">--</span><span class="nb">filter</span> <span class="s1">&#39;query(&quot;content&quot;, &quot;-content:@mroonga&quot;, </span><span class="se">\</span>
<span class="s1">                  { </span><span class="se">\</span>
<span class="s1">                    &quot;expander&quot;: &quot;QueryExpanderTSV&quot;, </span><span class="se">\</span>
<span class="s1">                    &quot;flags&quot;: [&quot;ALLOW_LEADING_NOT&quot;, &quot;ALLOW_COLUMN&quot;] </span><span class="se">\</span>
<span class="s1">                  })&#39;</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] Added a new stage <code class="docutils literal notranslate"><span class="pre">result_set</span></code> for dynamic columns.</p>
<ul class="simple">
<li><p>This stage generates a column into a result set table. Therefore, it is not generated if <code class="docutils literal notranslate"><span class="pre">query</span></code> or <code class="docutils literal notranslate"><span class="pre">filter</span></code> doesn’t exist</p>
<ul>
<li><p>Because if <code class="docutils literal notranslate"><span class="pre">query</span></code> or <code class="docutils literal notranslate"><span class="pre">filter</span></code> doesn’t exist, Groonga doesn’t make a result set table.</p></li>
</ul>
</li>
<li><p>We can’t use <code class="docutils literal notranslate"><span class="pre">_value</span></code> for the stage. The <code class="docutils literal notranslate"><span class="pre">result_set</span></code> stage is for storing value by <code class="docutils literal notranslate"><span class="pre">score_column</span></code>.</p></li>
</ul>
</li>
<li><p>[vector_slice] Added support for weight vector that has weight of <code class="docutils literal notranslate"><span class="pre">Float32</span></code> type. [GitHub#1106 patched by naoa]</p></li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] Added support for <code class="docutils literal notranslate"><span class="pre">filtered</span></code> stage and <code class="docutils literal notranslate"><span class="pre">output</span></code> stage of dynamic columns on drilldowns. [GitHub#1101 patched by naoa][GitHub#1100 patched by naoa]</p>
<ul class="simple">
<li><p>We can use <code class="docutils literal notranslate"><span class="pre">filtered</span></code> and <code class="docutils literal notranslate"><span class="pre">output</span></code> stage of dynamic columns on drilldowns as with <code class="docutils literal notranslate"><span class="pre">drilldowns[Label].stage</span> <span class="pre">filtered</span></code> and <code class="docutils literal notranslate"><span class="pre">drilldowns[Label].stage</span> <span class="pre">output</span></code>.</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] Added support for <code class="docutils literal notranslate"><span class="pre">Float</span></code> type value in aggregating on drilldown.</p>
<ul class="simple">
<li><p>We can aggregate max value, min value, and sum value for <code class="docutils literal notranslate"><span class="pre">Float</span></code> type value using <code class="docutils literal notranslate"><span class="pre">MAX</span></code>, <code class="docutils literal notranslate"><span class="pre">MIN</span></code>, and <code class="docutils literal notranslate"><span class="pre">SUM</span></code>.</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/functions/query.html"><span class="doc">query</span></a>] [<a class="reference internal" href="reference/functions/geo_in_rectangle.html"><span class="doc">geo_in_rectangle</span></a>] [<a class="reference internal" href="reference/functions/geo_in_circle.html"><span class="doc">geo_in_circle</span></a>] Added a new option <code class="docutils literal notranslate"><span class="pre">score_column</span></code> for <code class="docutils literal notranslate"><span class="pre">query()</span></code>, <code class="docutils literal notranslate"><span class="pre">geo_in_rectangle()</span></code>, and <code class="docutils literal notranslate"><span class="pre">geo_in_circle()</span></code>.</p>
<ul class="simple">
<li><p>We can store a score value by condition using <code class="docutils literal notranslate"><span class="pre">score_column</span></code>.</p></li>
<li><p>Normally, Groonga calculate a score by adding scores of all conditions. However, we sometimes want to get a score value by condition.</p></li>
<li><p>For example, if we want to only use how near central coordinate as score as below, we use <code class="docutils literal notranslate"><span class="pre">score_column</span></code>.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">LandMarks</span> <span class="n">TABLE_NO_KEY</span>
<span class="n">column_create</span> <span class="n">LandMarks</span> <span class="n">name</span> <span class="n">COLUMN_SCALAR</span> <span class="n">ShortText</span>
<span class="n">column_create</span> <span class="n">LandMarks</span> <span class="n">category</span> <span class="n">COLUMN_SCALAR</span> <span class="n">ShortText</span>
<span class="n">column_create</span> <span class="n">LandMarks</span> <span class="n">point</span> <span class="n">COLUMN_SCALAR</span> <span class="n">WGS84GeoPoint</span>

<span class="n">table_create</span> <span class="n">Points</span> <span class="n">TABLE_PAT_KEY</span> <span class="n">WGS84GeoPoint</span>
<span class="n">column_create</span> <span class="n">Points</span> <span class="n">land_mark_index</span> <span class="n">COLUMN_INDEX</span> <span class="n">LandMarks</span> <span class="n">point</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">LandMarks</span>
<span class="p">[</span>
  <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Aries&quot;</span>      <span class="p">,</span> <span class="s2">&quot;category&quot;</span><span class="p">:</span> <span class="s2">&quot;Tower&quot;</span>     <span class="p">,</span> <span class="s2">&quot;point&quot;</span><span class="p">:</span> <span class="s2">&quot;11x11&quot;</span><span class="p">},</span>
  <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Taurus&quot;</span>     <span class="p">,</span> <span class="s2">&quot;category&quot;</span><span class="p">:</span> <span class="s2">&quot;Lighthouse&quot;</span><span class="p">,</span> <span class="s2">&quot;point&quot;</span><span class="p">:</span> <span class="s2">&quot;9x10&quot;</span> <span class="p">},</span>
  <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Gemini&quot;</span>     <span class="p">,</span> <span class="s2">&quot;category&quot;</span><span class="p">:</span> <span class="s2">&quot;Lighthouse&quot;</span><span class="p">,</span> <span class="s2">&quot;point&quot;</span><span class="p">:</span> <span class="s2">&quot;8x8&quot;</span>  <span class="p">},</span>
  <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Cancer&quot;</span>     <span class="p">,</span> <span class="s2">&quot;category&quot;</span><span class="p">:</span> <span class="s2">&quot;Tower&quot;</span>     <span class="p">,</span> <span class="s2">&quot;point&quot;</span><span class="p">:</span> <span class="s2">&quot;12x12&quot;</span><span class="p">},</span>
  <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Leo&quot;</span>        <span class="p">,</span> <span class="s2">&quot;category&quot;</span><span class="p">:</span> <span class="s2">&quot;Tower&quot;</span>     <span class="p">,</span> <span class="s2">&quot;point&quot;</span><span class="p">:</span> <span class="s2">&quot;11x13&quot;</span><span class="p">},</span>
  <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Virgo&quot;</span>      <span class="p">,</span> <span class="s2">&quot;category&quot;</span><span class="p">:</span> <span class="s2">&quot;Temple&quot;</span>    <span class="p">,</span> <span class="s2">&quot;point&quot;</span><span class="p">:</span> <span class="s2">&quot;22x10&quot;</span><span class="p">},</span>
  <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Libra&quot;</span>      <span class="p">,</span> <span class="s2">&quot;category&quot;</span><span class="p">:</span> <span class="s2">&quot;Tower&quot;</span>     <span class="p">,</span> <span class="s2">&quot;point&quot;</span><span class="p">:</span> <span class="s2">&quot;14x14&quot;</span><span class="p">},</span>
  <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Scorpio&quot;</span>    <span class="p">,</span> <span class="s2">&quot;category&quot;</span><span class="p">:</span> <span class="s2">&quot;Temple&quot;</span>    <span class="p">,</span> <span class="s2">&quot;point&quot;</span><span class="p">:</span> <span class="s2">&quot;21x9&quot;</span> <span class="p">},</span>
  <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Sagittarius&quot;</span><span class="p">,</span> <span class="s2">&quot;category&quot;</span><span class="p">:</span> <span class="s2">&quot;Temple&quot;</span>    <span class="p">,</span> <span class="s2">&quot;point&quot;</span><span class="p">:</span> <span class="s2">&quot;43x12&quot;</span><span class="p">},</span>
  <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Capricorn&quot;</span>  <span class="p">,</span> <span class="s2">&quot;category&quot;</span><span class="p">:</span> <span class="s2">&quot;Tower&quot;</span>     <span class="p">,</span> <span class="s2">&quot;point&quot;</span><span class="p">:</span> <span class="s2">&quot;33x12&quot;</span><span class="p">},</span>
  <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Aquarius&quot;</span>   <span class="p">,</span> <span class="s2">&quot;category&quot;</span><span class="p">:</span> <span class="s2">&quot;mountain&quot;</span>  <span class="p">,</span> <span class="s2">&quot;point&quot;</span><span class="p">:</span> <span class="s2">&quot;55x11&quot;</span><span class="p">},</span>
  <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Pisces&quot;</span>     <span class="p">,</span> <span class="s2">&quot;category&quot;</span><span class="p">:</span> <span class="s2">&quot;Tower&quot;</span>     <span class="p">,</span> <span class="s2">&quot;point&quot;</span><span class="p">:</span> <span class="s2">&quot;9x9&quot;</span>  <span class="p">},</span>
  <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Ophiuchus&quot;</span>  <span class="p">,</span> <span class="s2">&quot;category&quot;</span><span class="p">:</span> <span class="s2">&quot;mountain&quot;</span>  <span class="p">,</span> <span class="s2">&quot;point&quot;</span><span class="p">:</span> <span class="s2">&quot;21x21&quot;</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">select</span> <span class="n">LandMarks</span> \
  <span class="o">--</span><span class="n">sort_keys</span> <span class="s1">&#39;distance&#39;</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">distance</span><span class="p">]</span><span class="o">.</span><span class="n">stage</span> <span class="n">initial</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">distance</span><span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="n">Float</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">distance</span><span class="p">]</span><span class="o">.</span><span class="n">flags</span> <span class="n">COLUMN_SCALAR</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">distance</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="mf">0.0</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="s1">&#39;name, category, point, distance, _score&#39;</span> \
  <span class="o">--</span><span class="n">limit</span> <span class="o">-</span><span class="mi">1</span> \
  <span class="o">--</span><span class="nb">filter</span> <span class="s1">&#39;geo_in_circle(point, &quot;11x11&quot;, &quot;11x1&quot;, {&quot;score_column&quot;: distance}) &amp;&amp; category == &quot;Tower&quot;&#39;</span>
<span class="p">[</span>
  <span class="p">[</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mf">1590647445.406149</span><span class="p">,</span>
    <span class="mf">0.0002503395080566406</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="p">[</span>
      <span class="p">[</span>
        <span class="mi">5</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="p">[</span>
          <span class="s2">&quot;name&quot;</span><span class="p">,</span>
          <span class="s2">&quot;ShortText&quot;</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;category&quot;</span><span class="p">,</span><span class="s2">&quot;ShortText&quot;</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;point&quot;</span><span class="p">,</span>
          <span class="s2">&quot;WGS84GeoPoint&quot;</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;distance&quot;</span><span class="p">,</span>
          <span class="s2">&quot;Float&quot;</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;_score&quot;</span><span class="p">,</span>
          <span class="s2">&quot;Int32&quot;</span>
        <span class="p">]</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="s2">&quot;Aries&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Tower&quot;</span><span class="p">,</span>
        <span class="s2">&quot;11x11&quot;</span><span class="p">,</span>
        <span class="mf">0.0</span><span class="p">,</span>
        <span class="mi">1</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="s2">&quot;Cancer&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Tower&quot;</span><span class="p">,</span>
        <span class="s2">&quot;12x12&quot;</span><span class="p">,</span>
        <span class="mf">0.0435875803232193</span><span class="p">,</span>
        <span class="mi">1</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="s2">&quot;Leo&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Tower&quot;</span><span class="p">,</span>
        <span class="s2">&quot;11x13&quot;</span><span class="p">,</span>
        <span class="mf">0.06164214760065079</span><span class="p">,</span>
        <span class="mi">1</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="s2">&quot;Pisces&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Tower&quot;</span><span class="p">,</span>
        <span class="s2">&quot;9x9&quot;</span><span class="p">,</span>
        <span class="mf">0.0871751606464386</span><span class="p">,</span>
        <span class="mi">1</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="s2">&quot;Libra&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Tower&quot;</span><span class="p">,</span>
        <span class="s2">&quot;14x14&quot;</span><span class="p">,</span>
        <span class="mf">0.1307627409696579</span><span class="p">,</span>
        <span class="mi">1</span>
      <span class="p">]</span>
    <span class="p">]</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
<ul class="simple">
<li><p>The sort by <code class="docutils literal notranslate"><span class="pre">_score</span></code> is meaningless in the above example. Because the value of <code class="docutils literal notranslate"><span class="pre">_score</span></code> is all <code class="docutils literal notranslate"><span class="pre">1</span></code> by <code class="docutils literal notranslate"><span class="pre">category</span> <span class="pre">==</span> <span class="pre">&quot;Tower&quot;</span></code>.
However, we can sort distance from central coordinate using <code class="docutils literal notranslate"><span class="pre">score_column</span></code>.</p></li>
</ul>
</li>
<li><p>[Windows] Groonga came to be able to output backtrace when it occurs error even if it doesn’t crash.</p></li>
<li><p>[Windows] Dropped support for old Windows.</p>
<ul class="simple">
<li><p>Groonga for Windows come to require Windows 8 (Windows Server 2012) or later from 10.0.3.</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] Improved sort performance when sort keys were mixed referable sort keys and the other sort keys.</p>
<ul class="simple">
<li><p>We improved sort performance if mixed referable sort keys and the other and there are referable keys two or more.</p>
<ul>
<li><p>Referable sort keys are sort keys that except below them.</p>
<ul>
<li><p>Compressed columns</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_value</span></code> against the result of drilldown that is specified multiple values to the key of drilldown.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_key</span></code> against patricia trie table that has not the key of <code class="docutils literal notranslate"><span class="pre">ShortText</span></code> type.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_score</span></code></p></li>
</ul>
</li>
</ul>
</li>
<li><p>The more sort keys that except string, a decrease in the usage of memory for sort.</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] Improved sort performance when sort keys are all referable keys case.</p></li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] Improve scorer performance as a <code class="docutils literal notranslate"><span class="pre">_socre</span> <span class="pre">=</span> <span class="pre">column1*X</span> <span class="pre">+</span> <span class="pre">column2*Y</span> <span class="pre">+</span> <span class="pre">...</span></code> case.</p>
<ul class="simple">
<li><p>This optimization effective when there are many <code class="docutils literal notranslate"><span class="pre">+</span></code> or <code class="docutils literal notranslate"><span class="pre">*</span></code> in <code class="docutils literal notranslate"><span class="pre">_score</span></code>.</p></li>
<li><p>At the moment, it has only effective against <code class="docutils literal notranslate"><span class="pre">+</span></code> and <code class="docutils literal notranslate"><span class="pre">*</span></code>.</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] Added support for phrase near search.</p>
<ul>
<li><p>We can search phrase by phrase by a near search.</p>
<ul>
<li><p>Query syntax for near phrase search is <code class="docutils literal notranslate"><span class="pre">*NP&quot;Phrase1</span> <span class="pre">phrase2</span> <span class="pre">...&quot;</span></code>.</p></li>
<li><p>Script syntax for near phrase search is <code class="docutils literal notranslate"><span class="pre">column</span> <span class="pre">*NP</span> <span class="pre">&quot;phrase1</span> <span class="pre">phrase2</span> <span class="pre">...&quot;</span></code>.</p></li>
<li><p>If the search target phrase includes space, we can search for it by surrounding it with <code class="docutils literal notranslate"><span class="pre">&quot;</span></code> as below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Entries</span> <span class="n">TABLE_NO_KEY</span>
<span class="n">column_create</span> <span class="n">Entries</span> <span class="n">content</span> <span class="n">COLUMN_SCALAR</span> <span class="n">Text</span>

<span class="n">table_create</span> <span class="n">Terms</span> <span class="n">TABLE_PAT_KEY</span> <span class="n">ShortText</span> \
  <span class="o">--</span><span class="n">default_tokenizer</span> <span class="s1">&#39;TokenNgram(&quot;unify_alphabet&quot;, false, </span><span class="se">\</span>
<span class="s1">                                  &quot;unify_digit&quot;, false)&#39;</span> \
  <span class="o">--</span><span class="n">normalizer</span> <span class="n">NormalizerNFKC121</span>
<span class="n">column_create</span> <span class="n">Terms</span> <span class="n">entries_content</span> <span class="n">COLUMN_INDEX</span><span class="o">|</span><span class="n">WITH_POSITION</span> <span class="n">Entries</span> <span class="n">content</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Entries</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;I started to use Groonga. It&#39;s very fast!&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;I also started to use Groonga. It&#39;s also very fast! Really fast!&quot;</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">select</span> <span class="n">Entries</span> <span class="o">--</span><span class="nb">filter</span> <span class="s1">&#39;content *NP &quot;</span><span class="se">\\</span><span class="s1">&quot;I started</span><span class="se">\\</span><span class="s1">&quot; </span><span class="se">\\</span><span class="s1">&quot;use Groonga</span><span class="se">\\</span><span class="s1">&quot;&quot;&#39;</span> <span class="o">--</span><span class="n">output_columns</span> <span class="s1">&#39;content&#39;</span>
<span class="p">[</span>
  <span class="p">[</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mf">1590469700.715882</span><span class="p">,</span>
    <span class="mf">0.03997230529785156</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="p">[</span>
      <span class="p">[</span>
        <span class="mi">1</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="p">[</span>
          <span class="s2">&quot;content&quot;</span><span class="p">,</span>
          <span class="s2">&quot;Text&quot;</span>
        <span class="p">]</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="s2">&quot;I started to use Groonga. It&#39;s very fast!&quot;</span>
      <span class="p">]</span>
    <span class="p">]</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
</li>
</ul>
</li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/columns/vector.html"><span class="doc">Vector column</span></a>] Added support for <code class="docutils literal notranslate"><span class="pre">float32</span></code> weight vector.</p>
<ul>
<li><p>We can store weight as <code class="docutils literal notranslate"><span class="pre">float32</span></code> instead of <code class="docutils literal notranslate"><span class="pre">uint32</span></code>.</p></li>
<li><p>We need to add <code class="docutils literal notranslate"><span class="pre">WEIGHT_FLOAT32</span></code> flag when execute <code class="docutils literal notranslate"><span class="pre">column_create</span></code> to use this feature.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">column_create</span> <span class="n">Records</span> <span class="n">tags</span> <span class="n">COLUMN_VECTOR</span><span class="o">|</span><span class="n">WITH_WEIGHT</span><span class="o">|</span><span class="n">WEIGHT_FLOAT32</span> <span class="n">Tags</span>
</pre></div>
</div>
</li>
<li><p>However, <code class="docutils literal notranslate"><span class="pre">WEIGHT_FLOAT32</span></code> flag isn’t available with <code class="docutils literal notranslate"><span class="pre">COLUMN_INDEX</span></code> flag for now.</p></li>
</ul>
</li>
<li><p>Added following APIs</p>
<ul>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">grn_obj_is_xxx</span></code> functions. For more information as below.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">grn_obj_is_weight_vector(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_obj</span> <span class="pre">*obj)</span></code></p>
<ul>
<li><p>It returns as a <code class="docutils literal notranslate"><span class="pre">bool</span></code> whether the object is a weight vector.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_obj_is_uvector(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_obj</span> <span class="pre">*obj)</span></code></p>
<ul>
<li><p>It returns as a <code class="docutils literal notranslate"><span class="pre">bool</span></code> whether the object is a <code class="docutils literal notranslate"><span class="pre">uvector</span></code>.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">uvector</span></code> is a <code class="docutils literal notranslate"><span class="pre">vector</span></code> that size of elements for <code class="docutils literal notranslate"><span class="pre">vector</span></code> are fixed.</p></li>
</ul>
</li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_obj_is_weight_uvector(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_obj</span> <span class="pre">*obj)</span></code></p>
<ul>
<li><p>It returns as a <code class="docutils literal notranslate"><span class="pre">bool</span></code> whether the object is a weight uvector.</p></li>
</ul>
</li>
</ul>
</li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">grn_type_id_size(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_id</span> <span class="pre">id)</span></code>.</p>
<ul class="simple">
<li><p>It returns the size of Groonga data type as a <code class="docutils literal notranslate"><span class="pre">size_t</span></code>.</p></li>
</ul>
</li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">grn_selector_data_get_xxx</span></code> functions. For more information as below.</p>
<ul class="simple">
<li><p>These functions return selector related data.</p>
<ul>
<li><p>These functions are supposed to call in selector. If they are called except in selector, they return <code class="docutils literal notranslate"><span class="pre">NULL</span></code>.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_selector_data_get(grn_ctx</span> <span class="pre">*ctx)</span></code></p>
<ul>
<li><p>It returns all information that relating calling selector as <code class="docutils literal notranslate"><span class="pre">grn_selector_data</span> <span class="pre">*</span></code> structure.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_selector_data_get_selector(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_selector_data</span> <span class="pre">*data)</span></code></p>
<ul>
<li><p>It returns selector itself as <code class="docutils literal notranslate"><span class="pre">grn_obj</span> <span class="pre">*</span></code>.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_selector_data_get_expr(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_selector_data</span> <span class="pre">*data)</span></code></p>
<ul>
<li><p>It returns selector is used <code class="docutils literal notranslate"><span class="pre">--filter</span></code> condition and <code class="docutils literal notranslate"><span class="pre">--query</span></code> condition as <code class="docutils literal notranslate"><span class="pre">grn_obj</span> <span class="pre">*</span></code>.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_selector_data_get_table(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_selector_data</span> <span class="pre">*data)</span></code></p>
<ul>
<li><p>It returns target table as <code class="docutils literal notranslate"><span class="pre">grn_obj</span> <span class="pre">*</span></code></p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_selector_data_get_index(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_selector_data</span> <span class="pre">*data)</span></code></p>
<ul>
<li><p>It returns index is used by selector as <code class="docutils literal notranslate"><span class="pre">grn_obj</span> <span class="pre">*</span></code>.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_selector_data_get_args(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_selector_data</span> <span class="pre">*data,</span> <span class="pre">size_t</span> <span class="pre">*n_args)</span></code></p>
<ul>
<li><p>It returns arguments of function that called selector as <code class="docutils literal notranslate"><span class="pre">grn_obj</span> <span class="pre">**</span></code>.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_selector_data_get_result_set(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_selector_data</span> <span class="pre">*data)</span></code></p>
<ul>
<li><p>It returns result table as <code class="docutils literal notranslate"><span class="pre">grn_obj</span> <span class="pre">*</span></code>.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_selector_data_get_op(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_selector_data</span> <span class="pre">*data)</span></code></p>
<ul>
<li><p>It returns how to perform the set operation on existing result set as <code class="docutils literal notranslate"><span class="pre">grn_operator</span></code>.</p></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">grn_plugin_proc_xxx</span></code> functions. For more information as below.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_plugin_proc_get_value_operator(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_obj</span> <span class="pre">*value,</span> <span class="pre">grn_operator</span> <span class="pre">default_operator,</span> <span class="pre">const</span> <span class="pre">char</span> <span class="pre">*context)</span></code></p>
<ul class="simple">
<li><p>It returns the operator of a query as a <code class="docutils literal notranslate"><span class="pre">grn_operator</span></code>.</p>
<ul>
<li><p>For example, <code class="docutils literal notranslate"><span class="pre">&amp;&amp;</span></code> is returned as a <code class="docutils literal notranslate"><span class="pre">GRN_OP_AND</span></code>.</p></li>
</ul>
</li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_plugin_proc_get_value_bool(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_obj</span> <span class="pre">*value,</span> <span class="pre">bool</span> <span class="pre">default_value,</span> <span class="pre">const</span> <span class="pre">char</span> <span class="pre">*tag)</span></code></p>
<ul>
<li><p>It returns the value that is specified <code class="docutils literal notranslate"><span class="pre">true</span></code> or <code class="docutils literal notranslate"><span class="pre">false</span></code> like <code class="docutils literal notranslate"><span class="pre">with_transposition</span></code> argument of the below function as a <code class="docutils literal notranslate"><span class="pre">bool</span></code> (<code class="docutils literal notranslate"><span class="pre">bool</span></code> is the data type of C language).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fuzzy_search</span><span class="p">(</span><span class="n">column</span><span class="p">,</span> <span class="n">query</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;max_distance&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;prefix_length&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;max_expansion&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;with_transposition&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">})</span>
</pre></div>
</div>
</li>
</ul>
</li>
</ul>
</li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">grn_proc_options_xxx</span></code> functions. For more information as below.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">query()</span></code> only uses them for now.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_proc_options_parsev(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_obj</span> <span class="pre">*options,</span> <span class="pre">const</span> <span class="pre">char</span> <span class="pre">*tag,</span> <span class="pre">const</span> <span class="pre">char</span> <span class="pre">*name,</span> <span class="pre">va_list</span> <span class="pre">args)</span></code></p>
<ul>
<li><p>This function execute parse options.</p></li>
<li><p>We had to implement parsing to options ourselves until now, however, we can parse them by just call this function from this version.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_proc_options_parse(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_obj</span> <span class="pre">*options,</span> <span class="pre">const</span> <span class="pre">char</span> <span class="pre">*tag,</span> <span class="pre">const</span> <span class="pre">char</span> <span class="pre">*name,</span> <span class="pre">...)</span></code></p>
<ul>
<li><p>It calls <code class="docutils literal notranslate"><span class="pre">grn_proc_options_parsev()</span></code>. Therefore, features of this function same <code class="docutils literal notranslate"><span class="pre">grn_proc_options_parsev()</span></code>.</p></li>
<li><p>It only differs in the interface compare with <code class="docutils literal notranslate"><span class="pre">grn_proc_options_parsev()</span></code>.</p></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">grn_text_printfv(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_obj</span> <span class="pre">*bulk,</span> <span class="pre">const</span> <span class="pre">char</span> <span class="pre">*format,</span> <span class="pre">va_list</span> <span class="pre">args)</span></code></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">grn_text_vprintf</span></code> is deprecated from 10.0.3. We use <code class="docutils literal notranslate"><span class="pre">grn_text_printfv</span></code> instead.</p></li>
</ul>
</li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">grn_type_id_is_float_family(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_id</span> <span class="pre">id)</span></code>.</p>
<ul class="simple">
<li><p>It returns whether <code class="docutils literal notranslate"><span class="pre">grn_type_id</span></code> is <code class="docutils literal notranslate"><span class="pre">GRN_DB_FLOAT32</span></code> or <code class="docutils literal notranslate"><span class="pre">GRN_DB_FLOAT</span></code> or not as a <code class="docutils literal notranslate"><span class="pre">bool</span></code>.</p></li>
</ul>
</li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">grn_dat_cursor_get_max_n_records(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_dat_cursor</span> <span class="pre">*c)</span></code>.</p>
<ul class="simple">
<li><p>It returns the number of max records the cursor can have as a <code class="docutils literal notranslate"><span class="pre">size_t</span></code>. (This API is for the DAT table)</p></li>
</ul>
</li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">grn_table_cursor_get_max_n_records(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_table_cursor</span> <span class="pre">*cursor)</span></code>.</p>
<ul class="simple">
<li><p>It returns the number of max records the cursor can have as a <code class="docutils literal notranslate"><span class="pre">size_t</span></code>.</p></li>
<li><p>It can use against all table type (<code class="docutils literal notranslate"><span class="pre">TABLE_NO_KEY</span></code>, <code class="docutils literal notranslate"><span class="pre">TABLE_HASH_KEY</span></code>, <code class="docutils literal notranslate"><span class="pre">TABLE_DAT_KEY</span></code>, and <code class="docutils literal notranslate"><span class="pre">TABLE_PAT_KEY</span></code>).</p></li>
</ul>
</li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">grn_result_set_add_xxx</span></code> functions. For more information as below.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">grn_result_set_add_record(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_hash</span> <span class="pre">*result_set,</span> <span class="pre">grn_posting</span> <span class="pre">*posting,</span> <span class="pre">grn_operator</span> <span class="pre">op)</span></code></p>
<ul>
<li><p>It adds a record into the table of result sets.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_ii_posting_add_float</span></code> is deprecated from 10.0.3. We use <code class="docutils literal notranslate"><span class="pre">grn_rset_add_records()</span></code> instead.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_result_set_add_table(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_hash</span> <span class="pre">*result_set,</span> <span class="pre">grn_obj</span> <span class="pre">*table,</span> <span class="pre">double</span> <span class="pre">score,</span> <span class="pre">grn_operator</span> <span class="pre">op)</span></code></p>
<ul>
<li><p>It adds a table into the result sets.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_result_set_add_table_cursor(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_hash</span> <span class="pre">*result_set,</span> <span class="pre">grn_table_cursor</span> <span class="pre">*cursor,</span> <span class="pre">double</span> <span class="pre">score,</span> <span class="pre">grn_operator</span> <span class="pre">op)</span></code></p>
<ul>
<li><p>It adds records that a table cursor has into the result sets.</p></li>
</ul>
</li>
</ul>
</li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">grn_vector_copy(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_obj</span> <span class="pre">*src,</span> <span class="pre">grn_obj</span> <span class="pre">*dest)</span></code>.</p>
<ul class="simple">
<li><p>It copies a <code class="docutils literal notranslate"><span class="pre">vector</span></code> object. It returns whether success copy a <code class="docutils literal notranslate"><span class="pre">vector</span></code> object.</p></li>
</ul>
</li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">grn_obj_have_source(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_obj</span> <span class="pre">*obj)</span></code>.</p>
<ul class="simple">
<li><p>It returns whether the column has a source column as a <code class="docutils literal notranslate"><span class="pre">bool</span></code>.</p></li>
</ul>
</li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">grn_obj_is_token_column(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_obj</span> <span class="pre">*obj)</span></code>.</p>
<ul class="simple">
<li><p>It returns whether the column is a token column as a <code class="docutils literal notranslate"><span class="pre">bool</span></code>.</p></li>
</ul>
</li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">grn_hash_add_table_cursor(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_hash</span> <span class="pre">*hash,</span> <span class="pre">grn_table_cursor</span> <span class="pre">*cursor,</span> <span class="pre">double</span> <span class="pre">score)</span></code>.</p>
<ul class="simple">
<li><p>It’s for bulk result set insert. It’s faster than inserting records by <code class="docutils literal notranslate"><span class="pre">grn_ii_posting_add()</span></code>.</p></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id79">
<h2>Fixes<a class="headerlink" href="#id79" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Fixed a crash bug if the modules (tokenizers, normalizers, and token filters) are used at the same time from multiple threads.</p></li>
<li><p>Fixed precision of <code class="docutils literal notranslate"><span class="pre">Float32</span></code> value when it outputted.</p>
<ul>
<li><p>The precision of it changes to  8-digit to 7-digit from 10.0.3.</p></li>
</ul>
</li>
<li><p>Fixed a bug that Groonga used the wrong cache when the query that just the parameters of dynamic column different was executed. [GitHub#1102 patched by naoa]</p></li>
</ul>
</div>
<div class="section" id="id80">
<h2>Thanks<a class="headerlink" href="#id80" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>naoa</p></li>
</ul>
</div>
</div>
<div class="section" id="release-10-0-2-2020-04-29">
<span id="release-10-0-2"></span><h1>Release 10.0.2 - 2020-04-29<a class="headerlink" href="#release-10-0-2-2020-04-29" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id81">
<h2>Improvements<a class="headerlink" href="#id81" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>Added support for <code class="docutils literal notranslate"><span class="pre">uvector</span></code> for <code class="docutils literal notranslate"><span class="pre">time_classify_*</span></code> functions. [GitHub#1089][Patched by naoa]</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">uvector</span></code> is a vector that size of elements for vector are fixed.</p></li>
<li><p>For example, a vector that has values of Time type as elements is a <code class="docutils literal notranslate"><span class="pre">uvector</span></code>.</p></li>
</ul>
</li>
<li><p>Improve sort performance if sort key that can’t refer value with zero-copy is mixed.</p>
<ul class="simple">
<li><p>Some sort key (e.g. <code class="docutils literal notranslate"><span class="pre">_score</span></code>) values can’t be referred with zero-copy.</p></li>
<li><p>If there is at least one sort key that can’t be referable is included, all sort keys are copied before.</p></li>
<li><p>With this change, we just copy sort keys that can’t be referred. Referable sort keys are just referred without a copy.</p></li>
<li><p>However, this change may have performance regression when all sort keys are referable.</p></li>
</ul>
</li>
<li><p>Added support for loading weight vector as a JSON string.</p>
<ul>
<li><p>We can load weight vector as a JSON string as below example.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Tags</span> <span class="n">TABLE_PAT_KEY</span> <span class="n">ShortText</span>
<span class="n">table_create</span> <span class="n">Data</span> <span class="n">TABLE_NO_KEY</span>
<span class="n">column_create</span> <span class="n">Data</span> <span class="n">tags</span> <span class="n">COLUMN_VECTOR</span><span class="o">|</span><span class="n">WITH_WEIGHT</span> <span class="n">Tags</span>
<span class="n">column_create</span> <span class="n">Tags</span> <span class="n">data_tags</span> <span class="n">COLUMN_INDEX</span><span class="o">|</span><span class="n">WITH_WEIGHT</span> <span class="n">Data</span> <span class="n">tags</span>
<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Data</span>
<span class="p">[</span>
  <span class="p">{</span><span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="s2">&quot;{</span><span class="se">\&quot;</span><span class="s2">fruit</span><span class="se">\&quot;</span><span class="s2">: 10, </span><span class="se">\&quot;</span><span class="s2">apple</span><span class="se">\&quot;</span><span class="s2">: 100}&quot;</span><span class="p">},</span>
  <span class="p">{</span><span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="s2">&quot;{</span><span class="se">\&quot;</span><span class="s2">fruit</span><span class="se">\&quot;</span><span class="s2">: 200}&quot;</span><span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>Added support for <code class="docutils literal notranslate"><span class="pre">Float32</span></code> type.</p>
<ul class="simple">
<li><p>Groonga already has a <code class="docutils literal notranslate"><span class="pre">Float</span></code> type. However, it is double precision floating point number. Therefore if we only use single precision floating point number, it is not efficient.</p></li>
<li><p>We can select more suitable type by adding a <code class="docutils literal notranslate"><span class="pre">Float32</span></code> type.</p></li>
</ul>
</li>
<li><p>Added following APIs</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_obj_unref(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_obj</span> <span class="pre">*obj)</span></code></p>
<ul>
<li><p>This API is only used on the reference count mode (The reference count mode is a state of <code class="docutils literal notranslate"><span class="pre">GRN_ENABLE_REFERENCE_COUNT=yes</span></code>.).</p>
<ul>
<li><p>It calls <code class="docutils literal notranslate"><span class="pre">grn_obj_unlink()</span></code> only on the reference count mode. It doesn’t do anything except when the reference count mode.</p></li>
<li><p>We useful it when we need only call <code class="docutils literal notranslate"><span class="pre">grn_obj_unlink()</span></code> on the referece count mode.</p></li>
<li><p>Because as the following example, we don’t write condition that whether the reference count mode or not.</p>
<ul>
<li><p>The example if we don’t use <code class="docutils literal notranslate"><span class="pre">grn_obj_unref()</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="n">grn_enable_reference_count</span><span class="p">)</span> <span class="p">{</span>
 <span class="n">grn_obj_unlink</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">obj</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>The example if we use <code class="docutils literal notranslate"><span class="pre">grn_obj_unref()</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">grn_obj_ubref</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">obj</span><span class="p">);</span>
</pre></div>
</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_get_version_major(void)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_get_version_minor(void)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_get_version_micro(void)</span></code></p>
<ul class="simple">
<li><p>They return Groonga’s major, minor, and micor version numbers as a <code class="docutils literal notranslate"><span class="pre">uint32_t</span></code>.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_posting_get_record_id(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_posting</span> <span class="pre">*posting)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_posting_get_section_id(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_posting</span> <span class="pre">*posting)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_posting_get_position(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_posting</span> <span class="pre">*posting)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_posting_get_tf(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_posting</span> <span class="pre">*posting)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_posting_get_weight(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_posting</span> <span class="pre">*posting)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_posting_get_weight_float(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_posting</span> <span class="pre">*posting)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_posting_get_rest(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_posting</span> <span class="pre">*posting)</span></code></p>
<ul class="simple">
<li><p>They return information on the posting list.</p></li>
<li><p>These APIs return value as a <code class="docutils literal notranslate"><span class="pre">uint32_t</span></code> except <code class="docutils literal notranslate"><span class="pre">grn_posting_get_weight_float</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_posting_get_weight_float</span></code> returns value as a <code class="docutils literal notranslate"><span class="pre">float</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_posting_get_section_id(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_posting</span> <span class="pre">*posting)</span></code></p>
<ul>
<li><p>Section id is the internal representation of the column name.</p></li>
<li><p>If column name store in posting list as a string, it is a large amount of information and it use waste capacity.</p></li>
<li><p>Therefore, Groonga compresses the amount of information and use storage capacity is small by storing column name in the posting list as a number called section id.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_posting_get_tf(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_posting</span> <span class="pre">*posting)</span></code></p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">tf</span></code> of <code class="docutils literal notranslate"><span class="pre">grn_posting_get_tf</span></code> is Term Frequency score.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_posting_get_weight_float(grn_ctx</span> <span class="pre">*ctx,</span> <span class="pre">grn_posting</span> <span class="pre">*posting)</span></code></p>
<ul>
<li><p>It returns weight of token as a <code class="docutils literal notranslate"><span class="pre">float</span></code>.</p></li>
<li><p>We suggest using this API when we get a weight of token after this.</p>
<ul>
<li><p>Because we modify the internal representation of the weight from <code class="docutils literal notranslate"><span class="pre">uint32_t</span></code> to <code class="docutils literal notranslate"><span class="pre">float</span></code> in the near future.</p></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id82">
<h2>Fixes<a class="headerlink" href="#id82" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Fixed a bug that Groonga for 32bit on GNU/Linux may crash.</p></li>
<li><p>Fixed a bug that unrelated column value may be cleared. [GtiHub#1087][Reported by sutamin]</p></li>
<li><p>Fixed a memory leak when we dumped records with <code class="docutils literal notranslate"><span class="pre">dump</span></code> command.</p></li>
<li><p>Fixed a memory leak when we specified invalid value into <code class="docutils literal notranslate"><span class="pre">output_columns</span></code>.</p></li>
<li><p>Fixed a memory leak when we executed <code class="docutils literal notranslate"><span class="pre">snippet</span></code> function.</p></li>
<li><p>Fixed a memory leak when we filled the below conditions.</p>
<ul>
<li><p>If we used dynamic columns on the <code class="docutils literal notranslate"><span class="pre">initial</span></code> stage.</p></li>
<li><p>If we used <code class="docutils literal notranslate"><span class="pre">slices</span></code> argument with <code class="docutils literal notranslate"><span class="pre">select</span></code> command.</p></li>
</ul>
</li>
<li><p>Fixed a memory leak when we deleted tables with <code class="docutils literal notranslate"><span class="pre">logical_table_remove</span></code>.</p></li>
<li><p>Fixed a memory leak when we use the reference count mode.</p>
<ul>
<li><p>The reference count mode is a <code class="docutils literal notranslate"><span class="pre">GRN_ENABLE_REFERENCE_COUNT=yes</span></code> state.</p></li>
<li><p>This mode is experimental. Performance may degrade by this mode.</p></li>
</ul>
</li>
<li><p>Fixed a bug that Groonga too much unlink <code class="docutils literal notranslate"><span class="pre">_key</span></code> accessor when we load data for apache arrow format.</p></li>
</ul>
</div>
<div class="section" id="id83">
<h2>Thanks<a class="headerlink" href="#id83" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>sutamin</p></li>
<li><p>naoa</p></li>
</ul>
</div>
</div>
<div class="section" id="release-10-0-1-2020-03-30">
<span id="release-10-0-1"></span><h1>Release 10.0.1 - 2020-03-30<a class="headerlink" href="#release-10-0-1-2020-03-30" title="Permalink to this headline">¶</a></h1>
<p>We have been released Groonga 10.0.1.
Because Ubuntu and Windows(VC++ version) package in Groonga 10.0.0 were mistaken.</p>
<p>If we have already used Groonga 10.0.0 for CentOS, Debian, Windows(MinGW version), no problem with continued use it.</p>
<div class="section" id="id84">
<h2>Fixes<a class="headerlink" href="#id84" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Added a missing runtime(vcruntime140_1.dll) in package for Windows VC++ version.</p></li>
</ul>
</div>
</div>
<div class="section" id="release-10-0-0-2020-03-29">
<span id="release-10-0-0"></span><h1>Release 10.0.0 - 2020-03-29<a class="headerlink" href="#release-10-0-0-2020-03-29" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id85">
<h2>Improvements<a class="headerlink" href="#id85" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>[httpd] Updated bundled nginx to 1.17.9.</p></li>
<li><p>[httpd] Added support for specifying output type as an extension.</p>
<ul class="simple">
<li><p>For example, we can write <code class="docutils literal notranslate"><span class="pre">load.json</span></code> instead of <code class="docutils literal notranslate"><span class="pre">load?output_type=json</span></code>.</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/log.html"><span class="doc">Log</span></a>] Outputted a path of opened or closed file into a log of dump level on Linux.</p></li>
<li><p>[<a class="reference internal" href="reference/log.html"><span class="doc">Log</span></a>] Outputted a path of closed file into a log of debug level on Windows.</p></li>
<li><p>Added following API and macros</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">grn_timeval_from_double(grn_ctx,</span> <span class="pre">double)</span></code></p>
<ul>
<li><p>This API converts <code class="docutils literal notranslate"><span class="pre">double</span></code> type to <code class="docutils literal notranslate"><span class="pre">grn_timeval</span></code> type.</p></li>
<li><p>It returns value of <code class="docutils literal notranslate"><span class="pre">grn_timeval</span></code> type.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">GRN_TIMEVAL_TO_NSEC(timeval)</span></code></p>
<ul>
<li><p>This macro converts value of <code class="docutils literal notranslate"><span class="pre">grn_timeval</span></code> type to nanosecond as the value of <code class="docutils literal notranslate"><span class="pre">uint64_t</span></code> type.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">GRN_TIME_USEC_TO_SEC(usec)</span></code></p>
<ul>
<li><p>This macro converts microsecond to second.</p></li>
</ul>
</li>
</ul>
</li>
<li><p>Deprecated the following macro.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">GRN_OBJ_FORMAT_FIN(grn_ctx,</span> <span class="pre">grn_obj_format)</span></code></p>
<ul>
<li><p>We <code class="docutils literal notranslate"><span class="pre">grn_obj_format_fin(grn_ctx,</span> <span class="pre">grn_obj_format)</span></code> use instead since 10.0.0.</p></li>
</ul>
</li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/logical_range_filter.html"><span class="doc">logical_range_filter</span></a>],[<a class="reference internal" href="reference/commands/dump.html"><span class="doc">dump</span></a>] Added support for stream output.</p>
<ul>
<li><p>This feature requires <code class="docutils literal notranslate"><span class="pre">command_version</span> <span class="pre">3</span></code> or later. The header content is outputted after the body content.</p></li>
<li><p>Currently, this feature support only <code class="docutils literal notranslate"><span class="pre">dump</span></code> and <code class="docutils literal notranslate"><span class="pre">logical_range_filter</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">logical_range_filter</span></code> always returns the output as a stream on <code class="docutils literal notranslate"><span class="pre">command_version</span> <span class="pre">3</span></code> or later.</p></li>
<li><p>This feature has the following limitations.</p>
<ul class="simple">
<li><p>-1 is only allowed for negative <code class="docutils literal notranslate"><span class="pre">limit</span></code></p></li>
<li><p>MessagePack output isn’t supported</p></li>
</ul>
</li>
<li><p>We a little changed the response contents of JSON by this modify.</p>
<ul>
<li><p>The key order differs from before versions as below.</p>
<ul>
<li><p>The key order in before versions.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;header&quot;</span><span class="p">:</span> <span class="p">{</span><span class="o">...</span><span class="p">},</span>
  <span class="s2">&quot;body&quot;</span><span class="p">:</span> <span class="p">{</span><span class="o">...</span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>The key order in this version(10.0.0).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;body&quot;</span><span class="p">:</span> <span class="p">{</span><span class="o">...</span><span class="p">},</span>
  <span class="s2">&quot;header&quot;</span><span class="p">:</span> <span class="p">{</span><span class="o">...</span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
</ul>
</li>
</ul>
</li>
<li><p>Disabled caches of <code class="docutils literal notranslate"><span class="pre">dump</span></code> and <code class="docutils literal notranslate"><span class="pre">logical_range_filter</span></code> when they execute on <code class="docutils literal notranslate"><span class="pre">command_version</span> <span class="pre">3</span></code>.</p>
<ul class="simple">
<li><p>Because of <code class="docutils literal notranslate"><span class="pre">dump</span></code> and <code class="docutils literal notranslate"><span class="pre">logical_range_filter</span></code> on <code class="docutils literal notranslate"><span class="pre">command_version</span> <span class="pre">3</span></code> returns stream since 10.0.0, Groonga can not cache the whole response.</p></li>
</ul>
</li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/logical_range_filter.html"><span class="doc">logical_range_filter</span></a>] Added support for outputting response as Apache Arrow format.</p>
<ul class="simple">
<li><p>Supported data type as below.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">UInt8</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Int8</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">UInt16</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Int16</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">UInt32</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Int32</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">UInt64</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Int64</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Time</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ShortText</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Text</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LongText</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Vector</span></code> of <code class="docutils literal notranslate"><span class="pre">Int32</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Reference</span> <span class="pre">vector</span></code></p></li>
</ul>
</li>
</ul>
</li>
<li><p>Supported Ubuntu 20.04 (Focal Fossa).</p></li>
<li><p>Dropped Ubuntu 19.04 (Disco Dingo).</p>
<ul class="simple">
<li><p>Because this version has been EOL.</p></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="release-9-1-2-2020-01-29">
<span id="release-9-1-2"></span><h1>Release 9.1.2 - 2020-01-29<a class="headerlink" href="#release-9-1-2-2020-01-29" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id86">
<h2>Improvements<a class="headerlink" href="#id86" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>[tools] Added a script for copying only files of specify tables or columns.</p>
<ul>
<li><p>This script name is copy-related-files.rb.</p></li>
<li><p>This script is useful if we want to extract specifying tables or columns from a huge database.</p></li>
<li><p>Related files of specific tables or columns may need for reproducing fault.</p></li>
<li><p>If we difficult to offer a database whole, we can extract related files of target tables or columns by this tool.</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/shutdown.html"><span class="doc">shutdown</span></a>] Accept <code class="docutils literal notranslate"><span class="pre">/d/shutdown?mode=immediate</span></code> immediately even when all threads are used.</p>
<ul>
<li><p>This feature can only use on the Groonga HTTP server.</p></li>
</ul>
</li>
<li><p>Unused objects free immediately by using <code class="docutils literal notranslate"><span class="pre">GRN_ENABLE_REFERENCE_COUNT=yes</span></code>.</p>
<ul>
<li><p>This feature is experimental. Performance degrade by this feature.</p></li>
<li><p>If we load to span many tables, we can expect to keep in the usage of memory by this feature.</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="install/centos.html"><span class="doc">CentOS</span></a>] We prepare <code class="docutils literal notranslate"><span class="pre">groonga-release</span></code> by version.</p>
<ul>
<li><p>Note that the little modification how to install.</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="install/debian.html"><span class="doc">Debian GNU/Linux</span></a>] We use <code class="docutils literal notranslate"><span class="pre">groonga-archive-keyring</span></code> for adding the Groonga apt repository.</p>
<ul>
<li><p>We can easy to add the Groonga apt repository to our system by this improvement.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">groonga-archive-keyring</span></code> includes all information for using the Groonga apt repository. Thus, we need not be conscious of changing of repository information or PGP key by installing this package.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">groonga-archive-keyring</span></code> is deb package. Thus, we can easy to update by <code class="docutils literal notranslate"><span class="pre">apt</span> <span class="pre">update</span></code>.</p></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="release-9-1-1-2020-01-07">
<span id="release-9-1-1"></span><h1>Release 9.1.1 - 2020-01-07<a class="headerlink" href="#release-9-1-1-2020-01-07" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id87">
<h2>Improvements<a class="headerlink" href="#id87" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>[<a class="reference internal" href="reference/commands/load.html"><span class="doc">load</span></a>] Added support for Apache Arrow format data.</p>
<ul>
<li><p>If we use Apache Arrow format data, we may reduce parse cost. Therefore, data might be loading faster than other formats.</p></li>
<li><p>Groonga can also directly input data for Apache Arrow format from other data analysis systems by this improvement.</p></li>
<li><p>However, Apache Arrow format can use in the HTTP interface only. We can’t use it in the command line interface.</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/load.html"><span class="doc">load</span></a>] Added how to load Apache Arrow format data in the document.</p></li>
<li><p>[<a class="reference internal" href="reference/commands/load.html"><span class="doc">load</span></a>] Improve error message.</p>
<ul>
<li><p>Response of <code class="docutils literal notranslate"><span class="pre">load</span></code> command includes error message also.</p></li>
<li><p>If we faile data load, Groonga output error detail of <code class="docutils literal notranslate"><span class="pre">load</span></code> command by this Improvement.</p></li>
</ul>
</li>
<li><p>[httpd] Updated bundled nginx to 1.17.7.</p></li>
<li><p>[<a class="reference internal" href="reference/executables/groonga-server-http.html"><span class="doc">Groonga HTTP server</span></a>] Added support for sending command parameters by body of HTTP request.</p>
<ul>
<li><p>We must set <code class="docutils literal notranslate"><span class="pre">application/x-www-form-urlencoded</span></code> to <code class="docutils literal notranslate"><span class="pre">Content-Type</span></code> for this case.</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/executables/groonga-server-http.html"><span class="doc">Groonga HTTP server</span></a>] Added how to use HTTP POST in the document.</p></li>
</ul>
</div>
</div>
<div class="section" id="release-9-1-0-2019-11-29">
<span id="release-9-1-0"></span><h1>Release 9.1.0 - 2019-11-29<a class="headerlink" href="#release-9-1-0-2019-11-29" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id88">
<h2>Improvements<a class="headerlink" href="#id88" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Improved the performance of the “&amp;&amp;” operation.</p>
<ul>
<li><p>For example, the performance of condition expression such as the following is increased.</p></li>
<li><p>( A || B ) &amp;&amp; ( C || D ) &amp;&amp; ( E || F) …</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/tokenizers/token_mecab.html"><span class="doc">TokenMecab</span></a>] Added a new option <code class="docutils literal notranslate"><span class="pre">use_base_form</span></code></p>
<ul>
<li><p>We can search using the base form of a token by this option.</p></li>
<li><p>For example, if we search “支えた” using this option, “支える” is hit also.</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id89">
<h2>Fixes<a class="headerlink" href="#id89" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Fix a bug that when the accessor is index, performance decreases.</p>
<ul>
<li><p>For example, it occurs with the query include the following conditions.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">accessor</span> <span class="pre">&#64;</span> <span class="pre">query</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">accessor</span> <span class="pre">==</span> <span class="pre">query</span></code></p></li>
</ul>
</li>
</ul>
</li>
<li><p>Fixed a bug the estimated size of a search result was overflow when the buffer is big enough. [PGroonga#GitHub#115][Reported by Albert Song]</p></li>
<li><p>Improved a test(1) portability. [GitHub#1065][Patched by OBATA Akio]</p></li>
<li><p>Added missing tools.</p>
<ul>
<li><p>Because <code class="docutils literal notranslate"><span class="pre">index-column-diff-all.sh</span></code> and <code class="docutils literal notranslate"><span class="pre">object-inspect-all.sh</span></code> had not bundled in before version.</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id90">
<h2>Thanks<a class="headerlink" href="#id90" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Albert Song</p></li>
<li><p>OBATA Akio</p></li>
</ul>
</div>
</div>
<div class="section" id="release-9-0-9-2019-10-30">
<span id="release-9-0-9"></span><h1>Release 9.0.9 - 2019-10-30<a class="headerlink" href="#release-9-0-9-2019-10-30" title="Permalink to this headline">¶</a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Maybe performance decreases from this version.
Therefore, If performance decreases than before, please report us with reproducible steps.</p>
</div>
<div class="section" id="id91">
<h2>Improvements<a class="headerlink" href="#id91" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>[<a class="reference internal" href="reference/log.html"><span class="doc">Log</span></a>] Improved that output the sending time of response into query-log.</p></li>
<li><p>[<a class="reference internal" href="reference/commands/status.html"><span class="doc">status</span></a>] Added that the number of current jobs in the <code class="docutils literal notranslate"><span class="pre">status</span></code> command response.</p></li>
<li><p>[<a class="reference internal" href="reference/executables/groonga-httpd.html"><span class="doc">groonga-httpd</span></a>] Added support for <code class="docutils literal notranslate"><span class="pre">$request_time</span></code> in log.</p>
<ul>
<li><p>In the previous version, even if we specified the <code class="docutils literal notranslate"><span class="pre">$request_time</span></code> in the <code class="docutils literal notranslate"><span class="pre">log_format</span></code> directive, it was always 0.00.</p></li>
<li><p>If we specify the <code class="docutils literal notranslate"><span class="pre">$request_time</span></code>, groonga-httpd output the correct time form this version.</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/executables/groonga-httpd.html"><span class="doc">groonga-httpd</span></a>] Added how to set the <code class="docutils literal notranslate"><span class="pre">$request_time</span></code> in the document.</p></li>
<li><p>Supported Ubuntu 19.10 (Eoan Ermine)</p></li>
<li><p>Supported CentOS 8 (experimental)</p>
<ul>
<li><p>The package for CentOS 8 can’t use a part of features(e.g. we can’t use <code class="docutils literal notranslate"><span class="pre">TokenMecab</span></code> and can’t cast to int32 vector from JSON string) for lacking some packages for development.</p></li>
</ul>
</li>
<li><p>[tools] Added a script for executing the <code class="docutils literal notranslate"><span class="pre">index_column_diff</span></code> command simply.</p>
<ul>
<li><p>This script name is index-column-diff-all.sh.</p></li>
<li><p>This script extracts index columns form Groonga’s database and execute the <code class="docutils literal notranslate"><span class="pre">index_column_diff</span></code> command to them.</p></li>
</ul>
</li>
<li><p>[tools] Added a script for executing <code class="docutils literal notranslate"><span class="pre">object_inspect</span></code> against
all objects.</p>
<ul>
<li><p>This script name is object-inspect-all.sh.</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id92">
<h2>Fixes<a class="headerlink" href="#id92" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Fixed a bug that Groonga crash when we specify the value as the first argument of between.[GitHub#1045][Reported by yagisumi]</p></li>
</ul>
</div>
<div class="section" id="id93">
<h2>Thanks<a class="headerlink" href="#id93" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>yagisumi</p></li>
</ul>
</div>
</div>
<div class="section" id="release-9-0-8-2019-09-27">
<span id="release-9-0-8"></span><h1>Release 9.0.8 - 2019-09-27<a class="headerlink" href="#release-9-0-8-2019-09-27" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id94">
<h2>Improvements<a class="headerlink" href="#id94" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>[<a class="reference internal" href="reference/commands/log_reopen.html"><span class="doc">log_reopen</span></a>] Added a supplementary explanation when we use <code class="docutils literal notranslate"><span class="pre">groonga-httpd</span></code> with 2 or more workers.</p></li>
<li><p>Improved that Groonga ignores the index being built.</p>
<ul>
<li><p>We can get correct search results even if the index is under construction.</p></li>
<li><p>However, the search is slow because of Groonga out of use the index to search in this case.</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/functions/sub_filter.html"><span class="doc">sub_filter</span></a>] Added a feature that <code class="docutils literal notranslate"><span class="pre">sub_filter</span></code> executes a sequential search when Groonga is building indexes for the target column or the target column hasn’t indexed.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">sub_filter</span></code> was an error if the above situation in before
version.</p></li>
<li><p>From this version, <code class="docutils literal notranslate"><span class="pre">sub_filter</span></code> returns search results if the above situation.</p></li>
<li><p>However if the above situation, <code class="docutils literal notranslate"><span class="pre">sub_filter</span></code> is slow. Because it is executed as a sequential search.</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="install/centos.html"><span class="doc">CentOS</span></a>] Dropped 32-bit package support on CentOS 6.</p></li>
</ul>
</div>
<div class="section" id="id95">
<h2>Fixes<a class="headerlink" href="#id95" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>[<a class="reference internal" href="reference/commands/logical_range_filter.html"><span class="doc">logical_range_filter</span></a>] Fixed a bug that exception about closing the same object twice occurs when we have enough records and the number of records that unmatch filter search criteria is more than the estimated value of it.</p></li>
</ul>
</div>
</div>
<div class="section" id="release-9-0-7-2019-08-29">
<span id="release-9-0-7"></span><h1>Release 9.0.7 - 2019-08-29<a class="headerlink" href="#release-9-0-7-2019-08-29" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id96">
<h2>Improvements<a class="headerlink" href="#id96" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>[httpd] Updated bundled nginx to 1.17.3.</p>
<ul>
<li><p>Contains security fix for CVE-2019-9511, CVE-2019-9513, and CVE-2019-9516.</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id97">
<h2>Fixes<a class="headerlink" href="#id97" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Fixed a bug that Groonga crash when posting lists were huge.</p>
<ul>
<li><p>However, this bug almost doesn’t occur by general data. Because posting lists don’t grow bigger so much by them.</p></li>
</ul>
</li>
<li><p>Fixed a bug that returns an empty result when we specify <code class="docutils literal notranslate"><span class="pre">initial</span></code> into a stage of a dynamic column and search for using index. [GitHub#683]</p></li>
<li><p>Fixed a bug that the configure phase didn’t detect libedit despite installing it. [GitHub#1030][Patched by yu]</p></li>
<li><p>Fixed a bug that <code class="docutils literal notranslate"><span class="pre">--offset</span></code> and <code class="docutils literal notranslate"><span class="pre">--limit</span></code> options didn’t work
with <code class="docutils literal notranslate"><span class="pre">--sort_keys</span></code> and <code class="docutils literal notranslate"><span class="pre">--slices</span></code> options. [clear-code/redmine_full_text_search#70][Reported by a9zawa]</p></li>
<li><p>Fixed a bug that search result is empty when the result of <code class="docutils literal notranslate"><span class="pre">select</span></code> command is huge. [groonga-dev,04770][Reported by Yutaro Shimamura]</p></li>
<li><p>Fixed a bug that doesn’t use a suitable index when prefix search and suffix search. [GitHub#1007, PGroonga#GitHub#96][Reported by oknj]</p></li>
</ul>
</div>
<div class="section" id="id98">
<h2>Thanks<a class="headerlink" href="#id98" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>oknj</p></li>
<li><p>Yutaro Shimamura</p></li>
<li><p>yu</p></li>
<li><p>a9zawa</p></li>
</ul>
</div>
</div>
<div class="section" id="release-9-0-6-2019-08-05">
<span id="release-9-0-6"></span><h1>Release 9.0.6 - 2019-08-05<a class="headerlink" href="#release-9-0-6-2019-08-05" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id99">
<h2>Improvements<a class="headerlink" href="#id99" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Added support for Debian 10 (buster).</p></li>
</ul>
</div>
<div class="section" id="id100">
<h2>Fixes<a class="headerlink" href="#id100" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] Fixed a bug that search is an error when occurring search escalation.</p></li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] Fixed a bug that may return wrong search results when we use nested equal condition.</p></li>
<li><p>[geo_distance_location_rectangle] Fixed an example that has wrong <code class="docutils literal notranslate"><span class="pre">load</span></code> format. [GitHub#1023][Patched by yagisumi]</p></li>
<li><p>[<a class="reference internal" href="tutorial/micro_blog.html"><span class="doc">Let’s create micro-blog</span></a>] Fixed an example that has wrong search results. [GutHub#1024][Patched by yagisumi]</p></li>
</ul>
</div>
<div class="section" id="id101">
<h2>Thanks<a class="headerlink" href="#id101" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>yagisumi</p></li>
</ul>
</div>
</div>
<div class="section" id="release-9-0-5-2019-07-30">
<span id="release-9-0-5"></span><h1>Release 9.0.5 - 2019-07-30<a class="headerlink" href="#release-9-0-5-2019-07-30" title="Permalink to this headline">¶</a></h1>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>There are some critical bugs are found in this release. <code class="docutils literal notranslate"><span class="pre">select</span></code> command returns wrong search results.
We will release the new version (9.0.6) which fixes the issues.
Please do not use Groonga 9.0.5, and recommends to upgrade to 9.0.6 in the future.
The detail of this issues are explained at <a class="reference external" href="http://groonga.org/en/blog/2019/07/30/groonga-9.0.5.html">http://groonga.org/en/blog/2019/07/30/groonga-9.0.5.html</a>.</p>
</div>
<div class="section" id="id102">
<h2>Improvements<a class="headerlink" href="#id102" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>[<a class="reference internal" href="reference/commands/logical_range_filter.html"><span class="doc">logical_range_filter</span></a>] Improved that only apply an optimization when the search target shard is large enough.</p>
<ul>
<li><p>This feature reduces that duplicate search result between offset when we use same sort key.</p></li>
<li><p>Large enough threshold is 10000 records by default.</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/normalizers.html"><span class="doc">Normalizers</span></a>] Added new option <code class="docutils literal notranslate"><span class="pre">unify_to_katakana</span></code> for <code class="docutils literal notranslate"><span class="pre">NormalizerNFKC100</span></code>.</p>
<ul>
<li><p>This option normalize hiragana to katakana.</p></li>
<li><p>For example, <code class="docutils literal notranslate"><span class="pre">ゔぁゔぃゔゔぇゔぉ</span></code> is normalized to <code class="docutils literal notranslate"><span class="pre">ヴァヴィヴヴェヴォ</span></code>.</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] Added drilldowns support as a slices parameter.</p></li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] Added columns support as a slices parameter.</p></li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] Improved that we can refer <code class="docutils literal notranslate"><span class="pre">_score</span></code> in the initial stage for slices parameter.</p></li>
<li><p>[<a class="reference internal" href="reference/functions/highlight_html.html"><span class="doc">highlight_html</span></a>], [<a class="reference internal" href="reference/functions/snippet_html.html"><span class="doc">snippet_html</span></a>] Improved that extract a keyword also from an expression of before executing a slices when we specify the slices parameter.</p></li>
<li><p>Improved that collect scores also from an expression of before executing a slices when we specify the slices parameter.</p></li>
<li><p>Stopped add 1 in score automatically when add posting to posting list.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_ii_posting_add</span></code> is backward incompatible changed by this change.
* Caller must increase the score to maintain compatibility.</p></li>
</ul>
</li>
<li><p>Added support for index search for nested equal like <code class="docutils literal notranslate"><span class="pre">XXX.YYY.ZZZ</span> <span class="pre">==</span> <span class="pre">AAA</span></code>.</p></li>
<li><p>Reduce rehash interval when we use hash table.</p>
<ul>
<li><p>This feature improve performance for output result.</p></li>
</ul>
</li>
<li><p>Improved to we can add tag prefix in the query log.</p>
<ul>
<li><p>We become easy to understand that it is filtered which the condition.</p></li>
</ul>
</li>
<li><p>Added support for Apache Arrow 1.0.0.</p>
<ul>
<li><p>However, It’s not released this version yet.</p></li>
</ul>
</li>
<li><p>Added support for Amazon Linux 2.</p></li>
</ul>
</div>
<div class="section" id="id103">
<h2>Fixes<a class="headerlink" href="#id103" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Fixed a bug that vector values of JSON like <code class="docutils literal notranslate"><span class="pre">&quot;[1,</span> <span class="pre">2,</span> <span class="pre">3]&quot;</span></code> are not indexed.</p></li>
<li><p>Fixed wrong parameter name in <code class="docutils literal notranslate"><span class="pre">table_create</span></code> tests. [GitHub#1000][Patch by yagisumi]</p></li>
<li><p>Fixed a bug that drilldown label is empty when a drilldown command is executed by <code class="docutils literal notranslate"><span class="pre">command_version=3</span></code>. [GitHub#1001][Reported by yagisumi]</p></li>
<li><p>Fixed build error for Windows package on MinGW.</p></li>
<li><p>Fixed install missing COPYING for Windows package on MinGW.</p></li>
<li><p>Fixed a bug that don’t highlight when specifing non-text query as highlight target keyword.</p></li>
<li><p>Fixed a bug that broken output of MessagePack format of [<a class="reference internal" href="reference/commands/object_inspect.html"><span class="doc">object_inspect</span></a>]. [GitHub#1009][Reported by yagisumi]</p></li>
<li><p>Fixed a bug that broken output of MessagePack format of <code class="docutils literal notranslate"><span class="pre">index_column_diff</span></code>. [GitHub#1010][Reported by yagisumi]</p></li>
<li><p>Fixed a bug that broken output of MessagePack format of [<a class="reference internal" href="reference/commands/suggest.html"><span class="doc">suggest</span></a>]. [GitHub#1011][Reported by yagisumi]</p></li>
<li><p>Fixed a bug that allocate size by realloc isn’t enough when a search for a table of patricia trie and so on. [Reported by Shimadzu Corporation]</p>
<ul>
<li><p>Groonga may be crashed by this bug.</p></li>
</ul>
</li>
<li><p>Fix a bug that <code class="docutils literal notranslate"><span class="pre">groonga.repo</span></code> is removed when updating 1.5.0 from <code class="docutils literal notranslate"><span class="pre">groonga-release</span></code> version before 1.5.0-1. [groonga-talk:429][Reported by Josep Sanz]</p></li>
</ul>
</div>
<div class="section" id="id104">
<h2>Thanks<a class="headerlink" href="#id104" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>yagisumi</p></li>
<li><p>Shimadzu Corporation</p></li>
<li><p>Josep Sanz</p></li>
</ul>
</div>
</div>
<div class="section" id="release-9-0-4-2019-06-29">
<span id="release-9-0-4"></span><h1>Release 9.0.4 - 2019-06-29<a class="headerlink" href="#release-9-0-4-2019-06-29" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id105">
<h2>Improvements<a class="headerlink" href="#id105" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Added support for array literal with multiple elements.</p></li>
<li><p>Added support equivalence operation of a vector.</p></li>
<li><p>[<a class="reference internal" href="reference/commands/logical_range_filter.html"><span class="doc">logical_range_filter</span></a>] Increase outputting logs into query log.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">logical_range_filter</span></code> command comes to output a log for below timing.</p>
<ul>
<li><p>After filtering by <code class="docutils literal notranslate"><span class="pre">logical_range_filter</span></code>.</p></li>
<li><p>After sorting by <code class="docutils literal notranslate"><span class="pre">logical_range_filter</span></code>.</p></li>
<li><p>After applying dynamic column.</p></li>
<li><p>After output results.</p></li>
</ul>
</li>
<li><p>We can see how much has been finished this command by this feature.</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/tokenizers.html"><span class="doc">Tokenizers</span></a>] Added document for <code class="docutils literal notranslate"><span class="pre">TokenPattern</span></code> description.</p></li>
<li><p>[<a class="reference internal" href="reference/tokenizers.html"><span class="doc">Tokenizers</span></a>] Added document for <code class="docutils literal notranslate"><span class="pre">TokenTable</span></code> description.</p></li>
<li><p>[<a class="reference internal" href="reference/tokenizers.html"><span class="doc">Tokenizers</span></a>] Added document for <code class="docutils literal notranslate"><span class="pre">TokenNgram</span></code> description.</p></li>
<li><p>[<a class="reference internal" href="reference/executables/grndb.html"><span class="doc">grndb</span></a>] Added output operation log into groonga.log</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">grndb</span></code> command comes to output execution result and execution process.</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/executables/grndb.html"><span class="doc">grndb</span></a>] Added support for checking empty files.</p>
<ul>
<li><p>We can check if the empty files exist by this feature.</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/executables/grndb.html"><span class="doc">grndb</span></a>] Added support new option <code class="docutils literal notranslate"><span class="pre">--since</span></code></p>
<ul>
<li><p>We can specify a scope of an inspection.</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/executables/grndb.html"><span class="doc">grndb</span></a>] Added document about new option <code class="docutils literal notranslate"><span class="pre">--since</span></code></p></li>
<li><p>Bundle RapidJSON</p>
<ul>
<li><p>We can use RapidJson as Groonga’s JSON parser partly. (This feature is partly yet)</p></li>
<li><p>We can more exactly parse JSON by using this.</p></li>
</ul>
</li>
<li><p>Added support for casting to int32 vector from JSON string.</p>
<ul>
<li><p>This feature requires RapidJSON.</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/functions/query.html"><span class="doc">query</span></a>] Added <code class="docutils literal notranslate"><span class="pre">default_operator</span></code>.</p>
<ul>
<li><p>We can customize operator when “keyword1 keyword2”.</p></li>
<li><p>“keyword1 Keyword2” is AND operation in default.</p></li>
<li><p>We can change “keyword1 keyword2“‘s operator except AND.</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id106">
<h2>Fixes<a class="headerlink" href="#id106" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>[optimizer] Fix a bug that execution error when specified multiple filter conditions and like <code class="docutils literal notranslate"><span class="pre">xxx.yyy==&quot;keyword&quot;</span></code>.</p></li>
<li><p>Added missing LICENSE files in Groonga package for Windows(VC++ version).</p></li>
<li><p>Added UCRT runtime into Groonga package for Windows(VC++ version).</p></li>
<li><p>[<a class="reference internal" href="reference/window_function.html"><span class="doc">Window function</span></a>] Fix a memory leak.</p>
<ul>
<li><p>This occurs when multiple windows with sort keys are used. [Patched by Takashi Hashida]</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id107">
<h2>Thanks<a class="headerlink" href="#id107" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Takashi Hashida</p></li>
</ul>
</div>
</div>
<div class="section" id="release-9-0-3-2019-05-29">
<span id="release-9-0-3"></span><h1>Release 9.0.3 - 2019-05-29<a class="headerlink" href="#release-9-0-3-2019-05-29" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id108">
<h2>Improvements<a class="headerlink" href="#id108" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] Added more query logs.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">select</span></code> command comes to output a log for below timing.</p>
<ul>
<li><p>After sorting by drilldown.</p></li>
<li><p>After filter by drilldown.</p></li>
</ul>
</li>
<li><p>We can see how much has been finished this command by this feature.</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/logical_select.html"><span class="doc">logical_select</span></a>] Added more query logs.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">logical_select</span></code> command comes to output a log for below timing.</p>
<ul>
<li><p>After making dynamic columns.</p></li>
<li><p>After grouping by drilldown.</p></li>
<li><p>After sorting by drilldown.</p></li>
<li><p>After filter by drilldown.</p></li>
<li><p>After sorting by <code class="docutils literal notranslate"><span class="pre">logical_select</span></code>.</p></li>
</ul>
</li>
<li><p>We can see how much has been finished this command by this feature.</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/logical_select.html"><span class="doc">logical_select</span></a>] Improved performance of sort a little when we use <code class="docutils literal notranslate"><span class="pre">limit</span></code> option.</p></li>
<li><p>[index_column_diff] Improved performance.</p>
<ul>
<li><p>We have greatly shortened the execution speed of this command.</p></li>
</ul>
</li>
<li><p>[index_column_diff] Improved ignore invalid reference.</p></li>
<li><p>[index_column_diff] Added support for duplicated vector element case.</p></li>
<li><p>[Normalizers] Added a new Normalizer <code class="docutils literal notranslate"><span class="pre">NormalizerNFKC121</span></code> based on Unicode NFKC (Normalization Form Compatibility Composition) for Unicode 12.1.</p></li>
<li><p>[TokenFilters] Added a new TokenFilter <code class="docutils literal notranslate"><span class="pre">TokenFilterNFKC121</span></code> based on Unicode NFKC (Normalization Form Compatibility Composition) for Unicode 12.1.</p></li>
<li><p>[<a class="reference internal" href="reference/executables/grndb.html"><span class="doc">grndb</span></a>] Added a new option <code class="docutils literal notranslate"><span class="pre">--log-flags</span></code></p>
<ul>
<li><p>We can specify output items of a log as with groonga executable file.</p></li>
<li><p>See [<a class="reference internal" href="reference/executables/groonga.html"><span class="doc">groonga executable file</span></a>] to know about supported log flags.</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/functions/snippet_html.html"><span class="doc">snippet_html</span></a>] Added a new option for changing a return value when no match by search.</p></li>
<li><p>[<a class="reference internal" href="reference/commands/plugin_unregister.html"><span class="doc">plugin_unregister</span></a>] Added support full path of Windows.</p></li>
<li><p>Added support for multiline log message.</p>
<ul>
<li><p>The multiline log message is easy to read by this feature.</p></li>
</ul>
</li>
<li><p>Output key in Groonga’s log when we search by index.</p></li>
<li><p>[<a class="reference internal" href="tutorial/match_columns.html"><span class="doc">match_columns parameter</span></a>] Added a document for indexes with weight.</p></li>
<li><p>[<a class="reference internal" href="reference/commands/logical_range_filter.html"><span class="doc">logical_range_filter</span></a>] Added a explanation for <code class="docutils literal notranslate"><span class="pre">order</span></code> parameter.</p></li>
<li><p>[<a class="reference internal" href="reference/commands/object_inspect.html"><span class="doc">object_inspect</span></a>] Added an explanation for new statistics <code class="docutils literal notranslate"><span class="pre">INDEX_COLUMN_VALUE_STATISTICS_NEXT_PHYSICAL_SEGMENT_ID</span></code> and <code class="docutils literal notranslate"><span class="pre">INDEX_COLUMN_VALUE_STATISTICS_N_PHYSICAL_SEGMENTS</span></code>.</p></li>
<li><p>Dropped Ubuntu 14.04 support.</p></li>
</ul>
</div>
<div class="section" id="id109">
<h2>Fixes<a class="headerlink" href="#id109" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>[index_column_diff] Fixed a bug that too much <code class="docutils literal notranslate"><span class="pre">remains</span></code> are reported.</p></li>
<li><p>Fixed a build error when we use <code class="docutils literal notranslate"><span class="pre">--without-onigmo</span></code> option. [GitHub#951] [Reported by Tomohiro KATO]</p></li>
<li><p>Fixed a vulnerability of “CVE: 2019-11675”. [Reported by Wolfgang Hotwagner]</p></li>
<li><p>Removed extended path prefix <code class="docutils literal notranslate"><span class="pre">\\?\</span></code> at Windows version of Groonga. [GitHub#958] [Reported by yagisumi]</p>
<ul>
<li><p>This extended prefix causes a bug that plugin can’t be found correctly.</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id110">
<h2>Thanks<a class="headerlink" href="#id110" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Tomohiro KATO</p></li>
<li><p>Wolfgang Hotwagner</p></li>
<li><p>yagisumi</p></li>
</ul>
</div>
</div>
<div class="section" id="release-9-0-2-2019-04-29">
<span id="release-9-0-2"></span><h1>Release 9.0.2 - 2019-04-29<a class="headerlink" href="#release-9-0-2-2019-04-29" title="Permalink to this headline">¶</a></h1>
<p>We provide a package for Windows made from VC++ from this release.</p>
<p>We also provide a package for Windows made form MinGW as in the past.
However, we will provide it made from VC++ instead of making from MinGW sooner or later.</p>
<div class="section" id="id111">
<h2>Improvements<a class="headerlink" href="#id111" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>[<a class="reference internal" href="reference/commands/column_create.html"><span class="doc">column_create</span></a>] Added a new flag <code class="docutils literal notranslate"><span class="pre">INDEX_LARGE</span></code> for index column.</p>
<ul>
<li><p>We can make an index column has space that two times of default by this flag.</p></li>
<li><p>However, note that it also uses two times of memory usage.</p></li>
<li><p>This flag useful when index target data are large.</p></li>
<li><p>Large data must have many records (normally at least 10 millions records) and at least one of the following features.</p>
<ul>
<li><p>Index targets are multiple columns</p></li>
<li><p>Index table has tokenizer</p></li>
</ul>
</li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/object_inspect.html"><span class="doc">object_inspect</span></a>] Added a new statistics <code class="docutils literal notranslate"><span class="pre">next_physical_segment_id</span></code> and <code class="docutils literal notranslate"><span class="pre">max_n_physical_segments</span></code> for physical segment information.</p>
<ul>
<li><p>We can confirm usage of index column space and max value of index column space by this information.</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/logical_select.html"><span class="doc">logical_select</span></a>] Added support for window function over shard.</p></li>
<li><p>[<a class="reference internal" href="reference/commands/logical_range_filter.html"><span class="doc">logical_range_filter</span></a>] Added support for window function over shard.</p></li>
<li><p>[<a class="reference internal" href="reference/commands/logical_count.html"><span class="doc">logical_count</span></a>] Added support for window function over shard.</p></li>
<li><p>We provided a package for Windows made from VC++.</p></li>
<li><p>[<a class="reference internal" href="reference/commands/io_flush.html"><span class="doc">io_flush</span></a>] Added a new option <code class="docutils literal notranslate"><span class="pre">--recursive</span> <span class="pre">dependent</span></code></p>
<ul>
<li><p>We can all of the specified flush target object, child objects, corresponding table of an index column and corresponding index column are flush target objects.</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id112">
<h2>Fixes<a class="headerlink" href="#id112" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Fixed “unknown type name ‘bool’” compilation error in some environments.</p></li>
<li><p>Fixed a bug that incorrect output number over Int32 by command of execute via mruby (e.g. <code class="docutils literal notranslate"><span class="pre">logical_select</span></code>, <code class="docutils literal notranslate"><span class="pre">logical_range_filter</span></code>, <code class="docutils literal notranslate"><span class="pre">logical_count</span></code>, etc.). [GitHub#936] [Patch by HashidaTKS]</p></li>
</ul>
</div>
<div class="section" id="id113">
<h2>Thanks<a class="headerlink" href="#id113" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>HashidaTKS</p></li>
</ul>
</div>
</div>
<div class="section" id="release-9-0-1-2019-03-29">
<span id="release-9-0-1"></span><h1>Release 9.0.1 - 2019-03-29<a class="headerlink" href="#release-9-0-1-2019-03-29" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id114">
<h2>Improvements<a class="headerlink" href="#id114" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Added support to acccept null for vector value.</p>
<ul>
<li><p>You can use <cite>select … –columns[vector].flags COLUMN_VECTOR –columns[vector].value “null”</cite></p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/dump.html"><span class="doc">dump</span></a>] Translated document into English.</p></li>
<li><p>Added more checks and logging for invalid indexes. It helps to clarify the index related bugs.</p></li>
<li><p>Improved an explanation about <code class="docutils literal notranslate"><span class="pre">GRN_TABLE_SELECT_ENOUGH_FILTERED_RATIO</span></code> behavior in news at <a class="reference internal" href="#release-8-0-6"><span class="std std-ref">Release 8.0.6 - 2018-08-29</span></a>.</p></li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] Added new argument <code class="docutils literal notranslate"><span class="pre">--load_table</span></code>, <code class="docutils literal notranslate"><span class="pre">--load_columns</span></code> and <code class="docutils literal notranslate"><span class="pre">--load_values</span></code>.</p>
<ul>
<li><p>You can store a result of <code class="docutils literal notranslate"><span class="pre">select</span></code> in a table that specifying <code class="docutils literal notranslate"><span class="pre">--load_table</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--load_values</span></code> option specifies columns of result of <code class="docutils literal notranslate"><span class="pre">select</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--load_columns</span></code> options specifies columns of table that specifying <code class="docutils literal notranslate"><span class="pre">--load_table</span></code>.</p></li>
<li><p>In this way, you can store values of columns that specifying with <code class="docutils literal notranslate"><span class="pre">--load_values</span></code> into columns that specifying with <code class="docutils literal notranslate"><span class="pre">--load_columns</span></code>.</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] Added documentation about <code class="docutils literal notranslate"><span class="pre">load_table</span></code>, <code class="docutils literal notranslate"><span class="pre">load_columns</span></code> and <code class="docutils literal notranslate"><span class="pre">load_values</span></code>.</p></li>
<li><p>[<a class="reference internal" href="reference/commands/load.html"><span class="doc">load</span></a>] Added supoort to display a table of load destination in a query log.</p>
<ul>
<li><p>A name of table of load destination display as string in <code class="docutils literal notranslate"><span class="pre">[]</span></code> as below.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">:000000000000000</span> <span class="pre">load(3):</span> <span class="pre">[LoadedLogs][3]</span></code></p></li>
</ul>
</li>
<li><p>Added a new API:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_ii_get_flags()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_index_column_diff()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_memory_get_usage()</span></code></p></li>
</ul>
</li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">index_column_diff</span></code> command to check broken index column. If you want to log progress of command execution, set log level to debug.</p></li>
</ul>
</div>
<div class="section" id="id115">
<h2>Fixes<a class="headerlink" href="#id115" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>[<a class="reference internal" href="reference/functions/snippet_html.html"><span class="doc">snippet_html</span></a>] Changed to return an empty vector for no match.</p>
<ul>
<li><p>In such a case, an empty vector <code class="docutils literal notranslate"><span class="pre">[]</span></code> is returned instead of <code class="docutils literal notranslate"><span class="pre">null</span></code>.</p></li>
</ul>
</li>
<li><p>Fixed a warning about possibility of counting threads overflow.
In real world, it doesn’t affect user because enourmous number of threads is not used. [GitHub#904]</p></li>
<li><p>Fixed build error on macOS [GitHub#909] [Reported by shiro615]</p></li>
<li><p>Fixed a stop word handling bug.</p>
<ul>
<li><p>This bug occurs when we set the first token as a stop word in our query.</p></li>
<li><p>If this bug occurs, our search query isn’t hit.</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/api/global_configurations.html"><span class="doc">Global configurations</span></a>] Fixed a typo about parameter name of <code class="docutils literal notranslate"><span class="pre">grn_lock_set_timeout</span></code>.</p></li>
<li><p>Fixed a bug that deleted records may be matched because of updating indexes incorrectly.</p>
<ul>
<li><p>It may occure when large number of records is added or deleted.</p></li>
</ul>
</li>
<li><p>Fixed a memory leak when <code class="docutils literal notranslate"><span class="pre">logical_range_filter</span></code> returns no records. [GitHub#911] [Patch by HashidaTKS]</p></li>
<li><p>Fixed a bug that query will not match because of loading data is not normalized correctly.
[PGroonga#GitHub#93, GitHub#912,GitHub#913] [Reported by kamicup and dodaisuke]</p>
<ul>
<li><p>This bug occurs when load data contains whitespace after KATAKANA and <code class="docutils literal notranslate"><span class="pre">unify_kana</span></code> option is used for normalizer.</p></li>
</ul>
</li>
<li><p>Fixed a bug that an indexes is broken during updating indexes.</p>
<ul>
<li><p>It may occurs when repeating to add large number of records or delete them for a long term.</p></li>
</ul>
</li>
<li><p>Fixed a crash bug that allocated working area is not enough size when updating indexes.</p></li>
</ul>
</div>
<div class="section" id="id116">
<h2>Thanks<a class="headerlink" href="#id116" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>shiro615</p></li>
<li><p>HashidaTKS</p></li>
<li><p>kamicup</p></li>
<li><p>dodaisuke</p></li>
</ul>
</div>
</div>
<div class="section" id="release-9-0-0-2019-02-09">
<span id="release-9-0-0"></span><h1>Release 9.0.0 - 2019-02-09<a class="headerlink" href="#release-9-0-0-2019-02-09" title="Permalink to this headline">¶</a></h1>
<p>This is a major version up! But It keeps backward compatibility.
You can upgrade to 9.0.0 without rebuilding database.</p>
<div class="section" id="id117">
<h2>Improvements<a class="headerlink" href="#id117" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>[<a class="reference internal" href="reference/tokenizers.html"><span class="doc">Tokenizers</span></a>] Added a new tokenizer <code class="docutils literal notranslate"><span class="pre">TokenPattern</span></code>.</p>
<ul>
<li><p>You can extract tokens by regular expression.</p>
<ul>
<li><p>This tokenizer extracts only token that matches the regular expression.</p></li>
</ul>
</li>
<li><p>You can also specify multiple patterns of regular expression.</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/tokenizers.html"><span class="doc">Tokenizers</span></a>] Added a new tokenizer <code class="docutils literal notranslate"><span class="pre">TokenTable</span></code>.</p>
<ul>
<li><p>You can extract tokens by a value of columns of existing a table.</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/dump.html"><span class="doc">dump</span></a>] Added support for dumping binary data.</p></li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] Added support for similer search against index column.</p>
<ul>
<li><p>If you have used multi column index, you can similar search against all source columns by this feature.</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/normalizers.html"><span class="doc">Normalizers</span></a>] Added new option <code class="docutils literal notranslate"><span class="pre">remove_blank</span></code> for <code class="docutils literal notranslate"><span class="pre">NormalizerNFKC100</span></code>.</p>
<ul>
<li><p>This option remove white spaces.</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/executables/groonga.html"><span class="doc">groonga executable file</span></a>] Improve display of thread id in log.</p>
<ul>
<li><p>Because It was easy to confuse thread id and process id on Windows version, it made clear which is a thread id or a process id.</p></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="release-8-1-1-2019-01-29">
<span id="release-8-1-1"></span><h1>Release 8.1.1 - 2019-01-29<a class="headerlink" href="#release-8-1-1-2019-01-29" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id118">
<h2>Improvements<a class="headerlink" href="#id118" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>[<a class="reference internal" href="reference/commands/logical_select.html"><span class="doc">logical_select</span></a>] Added new argument <code class="docutils literal notranslate"><span class="pre">--load_table</span></code>, <code class="docutils literal notranslate"><span class="pre">--load_columns</span></code> and <code class="docutils literal notranslate"><span class="pre">--load_values</span></code>.</p>
<ul>
<li><p>You can store a result of <code class="docutils literal notranslate"><span class="pre">logical_select</span></code> in a table that specifying <code class="docutils literal notranslate"><span class="pre">--load_table</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--load_values</span></code> option specifies columns of result of <code class="docutils literal notranslate"><span class="pre">logical_select</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--load_columns</span></code> options specifies columns of table that specifying <code class="docutils literal notranslate"><span class="pre">--load_table</span></code>.</p></li>
<li><p>In this way, you can store values of columns that specifying with <code class="docutils literal notranslate"><span class="pre">--load_values</span></code> into columns that specifying with <code class="docutils literal notranslate"><span class="pre">--load_columns</span></code>.</p></li>
</ul>
</li>
<li><p>Improve error log when update error of index.</p>
<ul>
<li><p>Added more information in the log.</p>
<ul>
<li><p>For example, output source buffer and chunk when occur merge of posting lists error.</p></li>
<li><p>Also, outputting the log a free space size of a buffer and request size of a buffer when occurs error of allocating a buffer.</p></li>
</ul>
</li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/executables/groonga.html"><span class="doc">groonga executable file</span></a>] Added a new option <code class="docutils literal notranslate"><span class="pre">--log-flags</span></code>.</p>
<ul>
<li><p>We can specify output items of a log of the Groonga.</p></li>
<li><p>We can output as below items.</p>
<ul>
<li><p>Timestamp</p></li>
<li><p>Log message</p></li>
<li><p>Location(the location where the log was output)</p></li>
<li><p>Process id</p></li>
<li><p>Thread id</p></li>
</ul>
</li>
<li><p>We can specify prefix as below.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">+</span></code></p>
<ul>
<li><p>This prefix means that “add the flag”.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">-</span></code></p>
<ul>
<li><p>This prefix means that “remove the flag”.</p></li>
</ul>
</li>
<li><p>No prefix means that “replace existing flags”.</p></li>
</ul>
</li>
<li><p>Specifically, we can specify flags as below.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">none</span></code></p>
<ul>
<li><p>Output nothing into the log.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">time</span></code></p>
<ul>
<li><p>Output a timestamp into the log.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">message</span></code></p>
<ul>
<li><p>Output log messages into the log.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">location</span></code></p>
<ul>
<li><p>Output the location where the log was output( a file name, a line and a function name) and process id.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">process_id</span></code></p>
<ul>
<li><p>Output a process id into the log.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">pid</span></code></p>
<ul>
<li><p>This flag is an alias of <code class="docutils literal notranslate"><span class="pre">process_id</span></code>.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">thread_id</span></code></p>
<ul>
<li><p>Output thread id into the log.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">all</span></code></p>
<ul>
<li><p>This flag specifies all flags except <code class="docutils literal notranslate"><span class="pre">none</span></code> and <code class="docutils literal notranslate"><span class="pre">default</span></code> flags.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">default</span></code></p>
<ul>
<li><p>Output a timestamp and log messages into the log.</p></li>
</ul>
</li>
</ul>
</li>
<li><p>We can also specify multiple log flags by separating flags with <code class="docutils literal notranslate"><span class="pre">|</span></code>.</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id119">
<h2>Fixes<a class="headerlink" href="#id119" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>Fixed a memory leak when occurs index update error.</p></li>
<li><p>[<a class="reference internal" href="reference/normalizers.html"><span class="doc">Normalizers</span></a>] Fixed a bug that stateless normalizers and stateful normalizers return wrong results when we use them at the same time.</p>
<blockquote>
<div><ul class="simple">
<li><p>Stateless normalizers are below.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">unify_kana</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unify_kana_case</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unify_kana_voiced_sound_mark</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unify_hyphen</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unify_prolonged_sound_mark</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unify_hyphen_and_prolonged_sound_mark</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unify_middle_dot</span></code></p></li>
</ul>
</li>
<li><p>Stateful normalizers are below.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">unify_katakana_v_sounds</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unify_katakana_bu_sound</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unify_to_romaji</span></code></p></li>
</ul>
</li>
</ul>
</div></blockquote>
</li>
</ul>
</div>
</div>
<div class="section" id="release-8-1-0-2018-12-29">
<span id="release-8-1-0"></span><h1>Release 8.1.0 - 2018-12-29<a class="headerlink" href="#release-8-1-0-2018-12-29" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id120">
<h2>Improvements<a class="headerlink" href="#id120" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>[httpd] Updated bundled nginx to 1.15.8.</p></li>
</ul>
</div>
<div class="section" id="id121">
<h2>Fixes<a class="headerlink" href="#id121" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Fixed a bug that unlock against DB is always executed after flush when after execute a <code class="docutils literal notranslate"><span class="pre">io_flush</span></code> command.</p></li>
<li><p>Fixed a bug that <code class="docutils literal notranslate"><span class="pre">reindex</span></code> command doesn’t finish when execute a <code class="docutils literal notranslate"><span class="pre">reindex</span></code> command against table that has record that has not references.</p></li>
</ul>
</div>
</div>
<div class="section" id="release-8-0-9-2018-11-29">
<span id="release-8-0-9"></span><h1>Release 8.0.9 - 2018-11-29<a class="headerlink" href="#release-8-0-9-2018-11-29" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id122">
<h2>Improvements<a class="headerlink" href="#id122" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>[<a class="reference internal" href="reference/tokenizers.html"><span class="doc">Tokenizers</span></a>] Improved that output a tokenizer name in error message when create tokenizer fail.</p></li>
<li><p>[<a class="reference internal" href="reference/tokenizers.html"><span class="doc">Tokenizers</span></a>][TokenDelimit] Supported that customizing delimiter of a token.</p>
<ul>
<li><p>You can use token other than whitespace as a token of delimiter.</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/tokenizers.html"><span class="doc">Tokenizers</span></a>][TokenDelimit] Added new option <code class="docutils literal notranslate"><span class="pre">pattern</span></code>.</p>
<ul>
<li><p>You can specify delimiter with regular expression by this option.</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/tokenizers.html"><span class="doc">Tokenizers</span></a>] Added force_prefix_search value to each token information.</p>
<ul>
<li><p>“force_prefix” is kept for backward compatibility.</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/token_filters.html"><span class="doc">Token filters</span></a>] Added built-in token filter <code class="docutils literal notranslate"><span class="pre">TokenFilterNFKC100</span></code>.</p>
<ul>
<li><p>You can convert katakana to hiragana like NormalizerNFKC100 with a <code class="docutils literal notranslate"><span class="pre">unify_kana</span></code> option.</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/token_filters.html"><span class="doc">Token filters</span></a>][TokenFilterStem] Added new option <code class="docutils literal notranslate"><span class="pre">algorithm</span></code>.</p>
<ul>
<li><p>You can also stem language other than English(French, Spanish, Portuguese, Italian, Romanian, German, Dutch, Swedish, Norwegian, Danish, Russian, Finnish) by this option.</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/token_filters.html"><span class="doc">Token filters</span></a>][TokenFilterStopWord] Added new option <code class="docutils literal notranslate"><span class="pre">column</span></code>.</p>
<ul>
<li><p>You can specify stop word in a column other than is_stop_word column by this option.</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/dump.html"><span class="doc">dump</span></a>] Supported output options of token filter options.</p>
<ul>
<li><p>If you specify a tokenizer like <code class="docutils literal notranslate"><span class="pre">TokenNgram</span></code> or <code class="docutils literal notranslate"><span class="pre">TokenMecab</span></code> etc that has options, you can output these options with <code class="docutils literal notranslate"><span class="pre">table_list</span></code> command.</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/truncate.html"><span class="doc">truncate</span></a>] Supported a table that it has token filter option.</p>
<ul>
<li><p>You can <code class="docutils literal notranslate"><span class="pre">truncate</span></code> even a tabel that it has token filter like <code class="docutils literal notranslate"><span class="pre">TokenFilterStem</span></code> or <code class="docutils literal notranslate"><span class="pre">TokenStopWord</span></code> that has options.</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/schema.html"><span class="doc">schema</span></a>] Support output of options of token filter.</p></li>
<li><p>[<a class="reference internal" href="reference/normalizers.html"><span class="doc">Normalizers</span></a>] Added new option for <code class="docutils literal notranslate"><span class="pre">NormalizerNFKC100</span></code> that <code class="docutils literal notranslate"><span class="pre">unify_to_romaji</span></code> option.</p>
<ul>
<li><p>You can normalize hiragana and katakana to romaji by this option.</p></li>
</ul>
</li>
<li><p>[query-log][show-condition] Supported “func() &gt; 0” case.</p></li>
<li><p>[Windows] Improved that ensure flushing on unmap.</p></li>
<li><p>Improved error message on opening input file error.</p></li>
<li><p>[httpd] Updated bundled nginx to 1.15.7.</p>
<ul>
<li><p>contains security fix for CVE-2018-16843 and CVE-2018-16844.</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id123">
<h2>Fixes<a class="headerlink" href="#id123" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>Fixed a memory leak when evaluating window function.</p></li>
<li><p>[<a class="reference internal" href="reference/executables/groonga-httpd.html"><span class="doc">groonga-httpd</span></a>] Fixed bug that log content may be mixed.</p></li>
<li><p>Fixed a bug that generates invalid JSON when occurs error of slice on output_columns.</p></li>
<li><p>Fixed a memory leak when getting nested reference vector column value.</p></li>
<li><p>Fixed a crash bug when outputting warning logs of index corruption.</p></li>
<li><p>Fix a crash bug when temporary vector is reused in expression evaluation.</p>
<ul class="simple">
<li><p>For example, crash when evaluating an expression that uses a vector as below.</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">_score</span> <span class="pre">=</span> <span class="pre">_score</span> <span class="pre">+</span> <span class="pre">(vector_size(categories)</span> <span class="pre">&gt;</span> <span class="pre">0)</span></code></p>
</li>
<li><p>Fix a bug that hits a value of vector columns deleted by a delete command.[GitHub PGroonga#85][Reported by dodaisuke]</p></li>
</ul>
</div>
<div class="section" id="id124">
<h2>Thanks<a class="headerlink" href="#id124" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>dodaisuke</p></li>
</ul>
</div>
</div>
<div class="section" id="release-8-0-8-2018-10-29">
<span id="release-8-0-8"></span><h1>Release 8.0.8 - 2018-10-29<a class="headerlink" href="#release-8-0-8-2018-10-29" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id125">
<h2>Improvements<a class="headerlink" href="#id125" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>[<a class="reference internal" href="reference/commands/table_list.html"><span class="doc">table_list</span></a>] Supported output options of default tokenizer.</p>
<ul class="simple">
<li><p>If you specify a tokenizer like <code class="docutils literal notranslate"><span class="pre">TokenNgram</span></code> or <code class="docutils literal notranslate"><span class="pre">TokenMecab</span></code> etc that has options, you can output these options with <code class="docutils literal notranslate"><span class="pre">table_list</span></code> command.</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] Supported normalizer options in sequential match with <code class="docutils literal notranslate"><span class="pre">record</span> <span class="pre">&#64;</span> <span class="pre">'query'</span></code>.</p></li>
<li><p>[<a class="reference internal" href="reference/commands/truncate.html"><span class="doc">truncate</span></a>] Supported a table that it has tokenizer option.</p>
<ul class="simple">
<li><p>You can <code class="docutils literal notranslate"><span class="pre">truncate</span></code> even a tabel that it has tokenizer like <code class="docutils literal notranslate"><span class="pre">TokenNgram</span></code> or <code class="docutils literal notranslate"><span class="pre">TokenMecab</span></code> etc that has options.</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/tokenizers.html"><span class="doc">Tokenizers</span></a>][TokenMecab] Added new option <code class="docutils literal notranslate"><span class="pre">target_class</span></code></p>
<ul>
<li><p>This option searches a token of specifying a part-of-speech. For example, you can search only a noun.</p></li>
<li><p>This option can also specify subclasses and exclude or add specific part-of-speech of specific using <code class="docutils literal notranslate"><span class="pre">+</span></code> or <code class="docutils literal notranslate"><span class="pre">-</span></code>. So, you can also search except a pronoun as below.</p>
<p><code class="docutils literal notranslate"><span class="pre">'TokenMecab(&quot;target_class&quot;,</span> <span class="pre">&quot;-名詞/代名詞&quot;,</span> <span class="pre">&quot;target_class&quot;,</span> <span class="pre">&quot;+&quot;)'</span></code></p>
</li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/io_flush.html"><span class="doc">io_flush</span></a>] Supported locking of a database during a <code class="docutils literal notranslate"><span class="pre">io_flush</span></code>.</p>
<ul class="simple">
<li><p>Because Groonga had a problem taht is a crash when deleteing a table of a target of a <code class="docutils literal notranslate"><span class="pre">io_flush</span></code> during execution of a <code class="docutils literal notranslate"><span class="pre">io_flush</span></code>.</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/functions/cast_loose.html"><span class="doc">cast_loose</span></a>] Added a new function <code class="docutils literal notranslate"><span class="pre">cast_loose</span></code>.</p>
<ul class="simple">
<li><p>This function cast to a type to specify. If a value to specify can’t cast, it become to a default value to specify.</p></li>
</ul>
</li>
<li><p>Added optimize the order of evaluation of a conditional expression.(experimental)</p>
<ul>
<li><p>You can active this feature by setting environment value as below.</p>
<p><code class="docutils literal notranslate"><span class="pre">GRN_EXPR_OPTIMIZE=yes</span></code></p>
</li>
</ul>
</li>
<li><p>Supported <code class="docutils literal notranslate"><span class="pre">(?-mix:XXX)</span></code> form for index searchable regular expression. [groonga-dev,04683][Reported by Masatoshi SEKI]</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">(?-mix:XXX)</span></code> form treats the same as XXX.</p></li>
</ul>
</li>
<li><p>[httpd] Updated bundled nginx to 1.15.5.</p></li>
<li><p>Supported Ubuntu 18.10 (Cosmic Cuttlefish)</p></li>
</ul>
</div>
<div class="section" id="id126">
<h2>Fixes<a class="headerlink" href="#id126" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Fixed a bug that the Groonga GQTP server may fail to accept a new connection. [groonga-dev,04688][Reported by Yutaro Shimamura]</p>
<ul>
<li><p>It’s caused when interruption client process without using quit.</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id127">
<h2>Thanks<a class="headerlink" href="#id127" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Masatoshi SEKI</p></li>
<li><p>Yutaro Shimamura</p></li>
</ul>
</div>
</div>
<div class="section" id="release-8-0-7-2018-09-29">
<span id="release-8-0-7"></span><h1>Release 8.0.7 - 2018-09-29<a class="headerlink" href="#release-8-0-7-2018-09-29" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id128">
<h2>Improvements<a class="headerlink" href="#id128" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>[<a class="reference internal" href="reference/tokenizers.html"><span class="doc">Tokenizers</span></a>][TokenMecab] support outputting metadata of Mecab.</p>
<ul>
<li><p>Added new option <code class="docutils literal notranslate"><span class="pre">include_class</span></code> for <code class="docutils literal notranslate"><span class="pre">TokenMecab</span></code>.</p>
<p>This option outputs <code class="docutils literal notranslate"><span class="pre">class</span></code> and <code class="docutils literal notranslate"><span class="pre">subclass</span></code> in Mecab’s metadata.</p>
</li>
<li><p>Added new option <code class="docutils literal notranslate"><span class="pre">include_reading</span></code> for <code class="docutils literal notranslate"><span class="pre">TokenMecab</span></code>.</p>
<p>This option outputs <code class="docutils literal notranslate"><span class="pre">reading</span></code> in Mecab’s metadata.</p>
</li>
<li><p>Added new option <code class="docutils literal notranslate"><span class="pre">include_form</span></code> for <code class="docutils literal notranslate"><span class="pre">TokenMecab</span></code>.</p>
<p>This option outputs <code class="docutils literal notranslate"><span class="pre">inflected_type</span></code>, <code class="docutils literal notranslate"><span class="pre">inflected_form</span></code> and <code class="docutils literal notranslate"><span class="pre">base_form</span></code> in Mecab’s metadata.</p>
</li>
<li><p>Added new option <code class="docutils literal notranslate"><span class="pre">use_reading</span></code> for <code class="docutils literal notranslate"><span class="pre">TokenMecab</span></code>.</p>
<p>This option supports a search by kana.</p>
<p>This option is useful for countermeasure of orthographical variants because it searches with kana.</p>
</li>
</ul>
</li>
<li><p>[plugin] Groonga now can grab plugins from multiple directories.</p>
<p>You can specify multiple directories to <code class="docutils literal notranslate"><span class="pre">GRN_PLUGINS_PATH</span></code> separated with “:” on non Windows, “;” on Windows.</p>
<p><code class="docutils literal notranslate"><span class="pre">GRN_PLUGINS_PATH</span></code> has high priority than the existing <code class="docutils literal notranslate"><span class="pre">GRN_PLUGINS_DIR</span></code>.
Currently, this option is not supported Windows.</p>
</li>
<li><p>[<a class="reference internal" href="reference/tokenizers.html"><span class="doc">Tokenizers</span></a>][TokenNgram] Added new option <code class="docutils literal notranslate"><span class="pre">unify_alphabet</span></code> for <code class="docutils literal notranslate"><span class="pre">TokenNgram</span></code>.</p>
<p>If we use <code class="docutils literal notranslate"><span class="pre">unify_alphabet</span></code> as <code class="docutils literal notranslate"><span class="pre">false</span></code>, <code class="docutils literal notranslate"><span class="pre">TokenNgram</span></code> uses bigram tokenize method for ASCII character.</p>
</li>
<li><p>[<a class="reference internal" href="reference/tokenizers.html"><span class="doc">Tokenizers</span></a>][TokenNgram] Added new option <code class="docutils literal notranslate"><span class="pre">unify_symbol</span></code> for <code class="docutils literal notranslate"><span class="pre">TokenNgram</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">TokenNgram(&quot;unify_symbol&quot;,</span> <span class="pre">false)</span></code> is same behavior of <code class="docutils literal notranslate"><span class="pre">TokenBigramSplitSymbol</span></code>.</p>
</li>
<li><p>[<a class="reference internal" href="reference/tokenizers.html"><span class="doc">Tokenizers</span></a>][TokenNgram] Added new option <code class="docutils literal notranslate"><span class="pre">unify_digit</span></code> for <code class="docutils literal notranslate"><span class="pre">TokenNgram</span></code>.</p>
<p>If we use <code class="docutils literal notranslate"><span class="pre">unify_digit</span></code> as <code class="docutils literal notranslate"><span class="pre">false</span></code>, If we set false, <code class="docutils literal notranslate"><span class="pre">TokenNgram</span></code> uses bigram tokenize method for digits.</p>
</li>
<li><p>[httpd] Updated bundled nginx to 1.15.4.</p></li>
</ul>
</div>
<div class="section" id="id129">
<h2>Fixes<a class="headerlink" href="#id129" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Fixed wrong score calculations on some cases.</p>
<ul>
<li><p>It’s caused when adding, multiplication or division numeric to a bool value.</p></li>
<li><p>It’s caused when comparing a scalar and vector columns using <code class="docutils literal notranslate"><span class="pre">!=</span></code> or <code class="docutils literal notranslate"><span class="pre">==</span></code>.</p></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="release-8-0-6-2018-08-29">
<span id="release-8-0-6"></span><h1>Release 8.0.6 - 2018-08-29<a class="headerlink" href="#release-8-0-6-2018-08-29" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id130">
<h2>Improvements<a class="headerlink" href="#id130" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>[<a class="reference internal" href="reference/tokenizers.html"><span class="doc">Tokenizers</span></a>][TokenMecab] add <code class="docutils literal notranslate"><span class="pre">chunked_tokenize</span></code> and <code class="docutils literal notranslate"><span class="pre">chunk_size_threshold</span></code> options.</p></li>
<li><p>[optimizer] support estimation for query family expressions.
It will generate more effective execution plan with query family expressions such as <code class="docutils literal notranslate"><span class="pre">column</span> <span class="pre">&#64;</span> <span class="pre">query</span></code>, <code class="docutils literal notranslate"><span class="pre">column</span> <span class="pre">&#64;~</span> <span class="pre">pattern</span></code> and so on.</p></li>
<li><p>[optimizer] plug-in -&gt; built-in
It’s disabled by default for now.
We can enable it by defining <code class="docutils literal notranslate"><span class="pre">GRN_EXPR_OPTIMIZE=yes</span></code> environment variable or using <code class="docutils literal notranslate"><span class="pre">expression_rewriters</span></code> table as before.</p></li>
<li><p>Enable sequential search for enough filtered case by default.
If the current result is enough filtered, sequential search is faster than index search.
If the current result has only 1% records of all records in a table and less than 1000 records, sequential search is used even when index search is available.</p>
<p>Cullently, this optimization is applied when search by <code class="docutils literal notranslate"><span class="pre">==</span></code>, <code class="docutils literal notranslate"><span class="pre">&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&gt;=</span></code>, or <code class="docutils literal notranslate"><span class="pre">&lt;=</span></code>.</p>
<p>When a key of a table that has columns specified by the filter is <code class="docutils literal notranslate"><span class="pre">ShortText</span></code>, you must set <code class="docutils literal notranslate"><span class="pre">NormalizerAuto</span></code> to normalizer of the table to apply this optimization.</p>
<p>You can disable this feature by <code class="docutils literal notranslate"><span class="pre">GRN_TABLE_SELECT_ENOUGH_FILTERED_RATIO=0.0</span></code> environment variable.</p>
</li>
<li><p>[load] improve error message.
Table name is included.</p></li>
<li><p>[load] add <code class="docutils literal notranslate"><span class="pre">lock_table</span></code> option.
If <code class="docutils literal notranslate"><span class="pre">--lock_table</span> <span class="pre">yes</span></code> is specified, <code class="docutils literal notranslate"><span class="pre">load</span></code> locks the target table while updating columns and applying <code class="docutils literal notranslate"><span class="pre">--each</span></code>.
This option avoids <code class="docutils literal notranslate"><span class="pre">load</span></code> and <code class="docutils literal notranslate"><span class="pre">delete</span></code> conflicts but it’ll reduce load performance.</p></li>
<li><p>[vector_find] avoid to crash with unsupported modes</p></li>
</ul>
</div>
<div class="section" id="id131">
<h2>Fixes<a class="headerlink" href="#id131" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>[index] fix a bug that offline index construction for text vector with <code class="docutils literal notranslate"><span class="pre">HASH_KEY</span></code>.
It creates index with invalid section ID.</p></li>
<li><p>Fix a bug that <code class="docutils literal notranslate"><span class="pre">--match_columns</span> <span class="pre">'index[0]</span> <span class="pre">||</span> <span class="pre">index[9]'</span></code> uses wrong section.</p></li>
<li><p>[highlighter] fix a wrong highlight bug
It’s caused when lexicon is hash table and keyword is less than N of N-gram.</p></li>
<li><p>[mruby] fix a bug that real error is hidden.
mruby doesn’t support error propagation by no argument raise.
<a class="reference external" href="https://github.com/mruby/mruby/issues/290">https://github.com/mruby/mruby/issues/290</a></p></li>
<li><p>[<a class="reference internal" href="reference/tokenizers.html"><span class="doc">Tokenizers</span></a>][TokenNgram loose]: fix a not found bug when query has only loose types.
<code class="docutils literal notranslate"><span class="pre">highlight_html()</span></code> with lexicon was also broken.</p></li>
<li><p>Fix a bug that text-&gt;number cast ignores trailing garbage.
“0garbage” should be cast error.</p></li>
<li><p>Fix an optimization bug for <code class="docutils literal notranslate"><span class="pre">reference_column</span> <span class="pre">&gt;=</span> <span class="pre">'key_value'</span></code> case</p></li>
</ul>
</div>
</div>
<div class="section" id="release-8-0-5-2018-07-29">
<span id="release-8-0-5"></span><h1>Release 8.0.5 - 2018-07-29<a class="headerlink" href="#release-8-0-5-2018-07-29" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id132">
<h2>Improvements<a class="headerlink" href="#id132" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>[<a class="reference internal" href="reference/grn_expr/script_syntax.html"><span class="doc">Script syntax</span></a>] Added complementary explain about similar search against Japanese documents.
[GitHub#858][Patch by Yasuhiro Horimoto]</p></li>
<li><p>[<a class="reference internal" href="reference/functions/time_classify_day_of_week.html"><span class="doc">time_classify_day_of_week</span></a>] Added a new API: <code class="docutils literal notranslate"><span class="pre">time_classify_day_of_week()</span></code>.</p></li>
<li><p>Suppressed a warning with <code class="docutils literal notranslate"><span class="pre">-fstack-protector</span></code>.
Suggested by OBATA Akio.</p></li>
<li><p>Added a new API: <code class="docutils literal notranslate"><span class="pre">time_format_iso8601()</span></code>.</p></li>
<li><p>Exported a struct <code class="docutils literal notranslate"><span class="pre">grn_raw_string</span></code>.</p></li>
<li><p>Added a new API: <code class="docutils literal notranslate"><span class="pre">grn_obj_clear_option_values()</span></code>.
It allows you to clear option values on remove (for persistent) / close (for temporary.)</p></li>
<li><p>[log] Reported index column name for error message <code class="docutils literal notranslate"><span class="pre">[ii][update][one]</span></code>.</p></li>
<li><p>[httpd] Updated bundled nginx to 1.15.2.</p></li>
<li><p>[<a class="reference internal" href="install/ubuntu.html"><span class="doc">Ubuntu</span></a>] Dropped Ubuntu 17.10 (Artful Aardvark) support.
It has reached EOL at July 19, 2018.</p></li>
<li><p>[<a class="reference internal" href="install/debian.html"><span class="doc">Debian GNU/Linux</span></a>] Dropped jessie support.
Debian’s security and release team will no longer produce updates for jessie.</p></li>
</ul>
</div>
<div class="section" id="id133">
<h2>Fixes<a class="headerlink" href="#id133" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Fixed returning wrong result after unfinished <code class="docutils literal notranslate"><span class="pre">/d/load</span></code> data by POST.</p></li>
<li><p>Fixed wrong function call around KyTea.</p></li>
<li><p>[<a class="reference internal" href="reference/executables/grndb.html"><span class="doc">grndb</span></a>] Added a missing label for the <code class="docutils literal notranslate"><span class="pre">--force-truncate</span></code> option.</p></li>
<li><p>Fixed crash on closing of a database, when a normalizer provided by a plugin (ex. <code class="docutils literal notranslate"><span class="pre">groonga-normalizer-mysql</span></code>) is used with any option.</p></li>
<li><p>Fixed a bug that normalizer/tokenizer options may be ignored.
It’s occurred when the same object ID is reused.</p></li>
</ul>
</div>
</div>
<div class="section" id="release-8-0-4-2018-06-29">
<span id="release-8-0-4"></span><h1>Release 8.0.4 - 2018-06-29<a class="headerlink" href="#release-8-0-4-2018-06-29" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id134">
<h2>Improvements<a class="headerlink" href="#id134" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>[log] Add sub error for error message <code class="docutils literal notranslate"><span class="pre">[ii][update][one]</span></code>.</p></li>
<li><p>Added a new API: <code class="docutils literal notranslate"><span class="pre">grn_highlighter_clear_keywords()</span></code>.</p></li>
<li><p>Added a new predicate: <code class="docutils literal notranslate"><span class="pre">grn_obj_is_number_family_bulk()</span></code>.</p></li>
<li><p>Added a new API: <code class="docutils literal notranslate"><span class="pre">grn_plugin_proc_get_value_mode()</span></code>.</p></li>
<li><p>[<a class="reference internal" href="reference/functions/vector_find.html"><span class="doc">vector_find</span></a>] Added a new function <code class="docutils literal notranslate"><span class="pre">vector_find()</span></code>.</p></li>
<li><p>Suppress memcpy warnings in msgpack.</p></li>
<li><p>Updated mruby from 1.0.0 to 1.4.1.</p></li>
<li><p>[doc][<a class="reference internal" href="reference/api/grn_obj.html"><span class="doc">grn_obj</span></a>] Added API reference for <code class="docutils literal notranslate"><span class="pre">grn_obj_is_index_column()</span></code>.</p></li>
<li><p>[windows] Suppress printf format warnings.</p></li>
<li><p>[windows] Suppress warning by msgpack.</p></li>
<li><p>[<a class="reference internal" href="reference/api/grn_obj.html"><span class="doc">grn_obj</span></a>][<a class="reference internal" href="reference/api/plugin.html"><span class="doc">Plugin</span></a>] Added encoding converter.
rules:</p>
<ul>
<li><p>grn_ctx::errbuf: grn_encoding</p></li>
<li><p>grn_logger_put: grn_encoding</p></li>
<li><p>mruby: UTF-8</p></li>
<li><p>path: locale</p></li>
</ul>
</li>
<li><p>[mrb] Added <code class="docutils literal notranslate"><span class="pre">LocaleOutput</span></code>.</p></li>
<li><p>[windows] Supported converting image path to grn_encoding.</p></li>
<li><p>[<a class="reference internal" href="reference/tokenizers.html"><span class="doc">Tokenizers</span></a>][TokenMecab] Convert error message encoding.</p></li>
<li><p>[<a class="reference internal" href="reference/window_functions/window_sum.html"><span class="doc">window_sum</span></a>] Supported dynamic column as a target column.</p></li>
<li><p>[doc][<a class="reference internal" href="reference/api/grn_obj.html"><span class="doc">grn_obj</span></a>] Added API reference for <code class="docutils literal notranslate"><span class="pre">grn_obj_is_vector_column()</span></code>.</p></li>
<li><p>[<a class="reference internal" href="reference/commands/column_create.html"><span class="doc">column_create</span></a>] Added more validations.</p>
<ul>
<li><p>1: Full text search index for vector column must have <code class="docutils literal notranslate"><span class="pre">WITH_SECTION</span></code> flag.
(Note that TokenDelmit with <code class="docutils literal notranslate"><span class="pre">WITH_POSITION</span></code> without <code class="docutils literal notranslate"><span class="pre">WITH_SECTION</span></code> is permitted.
It’s useful pattern for tag search.)</p></li>
<li><p>2: Full text search index for vector column must not be multi column index.
detail: <a class="reference external" href="https://github.com/groonga/groonga/commit/08e2456ba35407e3d5172f71a0200fac2a770142">https://github.com/groonga/groonga/commit/08e2456ba35407e3d5172f71a0200fac2a770142</a></p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/executables/grndb.html"><span class="doc">grndb</span></a>] Disabled log check temporarily.
Because it’s not completed yet.</p></li>
</ul>
</div>
<div class="section" id="id135">
<h2>Fixes<a class="headerlink" href="#id135" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>[<a class="reference internal" href="reference/functions/sub_filter.html"><span class="doc">sub_filter</span></a>] Fixed too much score with a too filtered case.</p></li>
<li><p>Fixed build error if KyTea is installed.</p></li>
<li><p>[<a class="reference internal" href="reference/executables/grndb.html"><span class="doc">grndb</span></a>] Fixed output channel.</p></li>
<li><p>[query-log][show-condition] Maybe fixed a crash bug.</p></li>
<li><p>[highlighter][lexicon] Fixed a not highlighted bug.
The keyword wasn’t highlighted if keyword length is less than N (“N”-gram.
In many cases, it’s Bigram so “less than 2”).</p></li>
<li><p>[windows] Fixed a base path detection bug.
If system locale DLL path includes 0x5c (<code class="docutils literal notranslate"><span class="pre">\</span></code> in ASCII) such as “U+8868
CJK UNIFIED IDEOGRAPH-8868” in CP932, the base path detection is buggy.</p></li>
<li><p>[<a class="reference internal" href="reference/tokenizers.html"><span class="doc">Tokenizers</span></a>][TokenNgram] Fixed wrong first character length.
It’s caused for “PARENTHESIZED IDEOGRAPH” characters such as
“U+3231 PARENTHESIZED IDEOGRAPH STOCK”.</p></li>
</ul>
</div>
</div>
<div class="section" id="release-8-0-3-2018-05-29">
<span id="release-8-0-3"></span><h1>Release 8.0.3 - 2018-05-29<a class="headerlink" href="#release-8-0-3-2018-05-29" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id136">
<h2>Improvements<a class="headerlink" href="#id136" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>[<a class="reference internal" href="reference/functions/highlight_html.html"><span class="doc">highlight_html</span></a>] Support highlight of results of
the search by <code class="docutils literal notranslate"><span class="pre">NormalizerNFKC100</span></code> or <code class="docutils literal notranslate"><span class="pre">TokenNgram</span></code>.</p></li>
<li><p>[<a class="reference internal" href="reference/tokenizers.html"><span class="doc">Tokenizers</span></a>] Added new option for <code class="docutils literal notranslate"><span class="pre">TokenNgram</span></code> that
<code class="docutils literal notranslate"><span class="pre">report_source_location</span> <span class="pre">option</span></code> .
This option used when highlighting with <code class="docutils literal notranslate"><span class="pre">highlight_html</span></code> use a lexicon.</p></li>
<li><p>[<a class="reference internal" href="reference/normalizers.html"><span class="doc">Normalizers</span></a>] Added new option for <code class="docutils literal notranslate"><span class="pre">NormalizerNFKC100</span></code> that
<code class="docutils literal notranslate"><span class="pre">unify_middle_dot</span> <span class="pre">option</span></code>.
This option normalizes middle dot. You can search with or without <code class="docutils literal notranslate"><span class="pre">・</span></code>
(middle dot) and regardless of <code class="docutils literal notranslate"><span class="pre">・</span></code> position.</p></li>
<li><p>[<a class="reference internal" href="reference/normalizers.html"><span class="doc">Normalizers</span></a>] Added new option for <code class="docutils literal notranslate"><span class="pre">NormalizerNFKC100</span></code> that
<code class="docutils literal notranslate"><span class="pre">unify_katakana_v_sounds</span> <span class="pre">option</span></code>.
This option normalizes <code class="docutils literal notranslate"><span class="pre">ヴァヴィヴヴェヴォ</span></code> (katakana) to <code class="docutils literal notranslate"><span class="pre">バビブベボ</span></code> (katakana).
For example, you can search <code class="docutils literal notranslate"><span class="pre">バイオリン</span></code> (violin) in <code class="docutils literal notranslate"><span class="pre">ヴァイオリン</span></code> (violin).</p></li>
<li><p>[<a class="reference internal" href="reference/normalizers.html"><span class="doc">Normalizers</span></a>] Added new option for <code class="docutils literal notranslate"><span class="pre">NormalizerNFKC100</span></code> that
<code class="docutils literal notranslate"><span class="pre">unify_katakana_bu_sound</span> <span class="pre">option</span></code>.
This option normalizes <code class="docutils literal notranslate"><span class="pre">ヴァヴィヴゥヴェヴォ</span></code> (katakana) to <code class="docutils literal notranslate"><span class="pre">ブ</span></code> (katakana).
For example, you can search <code class="docutils literal notranslate"><span class="pre">セーブル</span></code> (katakana) and <code class="docutils literal notranslate"><span class="pre">セーヴル</span></code> in
<code class="docutils literal notranslate"><span class="pre">セーヴェル</span></code> (katakana).</p></li>
<li><p>[<a class="reference internal" href="reference/functions/sub_filter.html"><span class="doc">sub_filter</span></a>] Supported <code class="docutils literal notranslate"><span class="pre">sub_filter</span></code> optimization
for the too filter case.
this optimize is valid when records are enough narrowed down before
<code class="docutils literal notranslate"><span class="pre">sub_filter</span></code> execution as below.</p></li>
<li><p>[<a class="reference internal" href="reference/executables/groonga-httpd.html"><span class="doc">groonga-httpd</span></a>] Made all workers context address
to unique.
context address is <code class="docutils literal notranslate"><span class="pre">#{ID}</span></code> of below query log.</p>
<div class="line-block">
<div class="line">#{TIME_STAMP}|#{MESSAGE}</div>
<div class="line">#{TIME_STAMP}|#{ID}|&gt;#{QUERY}</div>
<div class="line">#{TIME_STAMP}|#{ID}|:#{ELAPSED_TIME} #{PROGRESS}</div>
<div class="line">#{TIME_STAMP}|#{ID}|&lt;#{ELAPSED_TIME} #{RETURN_CODE}</div>
</div>
</li>
<li><p>[<a class="reference internal" href="reference/commands/delete.html"><span class="doc">delete</span></a>] Added new options that <code class="docutils literal notranslate"><span class="pre">limit</span></code>.
You can limit the number of delete records as below example.
<code class="docutils literal notranslate"><span class="pre">delete</span> <span class="pre">--table</span> <span class="pre">Users</span> <span class="pre">--filter</span> <span class="pre">'_key</span> <span class="pre">&#64;^</span> <span class="pre">&quot;b&quot;'</span> <span class="pre">--limit</span> <span class="pre">4</span></code></p></li>
<li><p>[httpd] Updated bundled nginx to 1.14.0.</p></li>
</ul>
</div>
<div class="section" id="id137">
<h2>Fixes<a class="headerlink" href="#id137" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>[<a class="reference internal" href="reference/commands/logical_select.html"><span class="doc">logical_select</span></a>] Fixed memory leak when an error occurs
in filtered dynamic columns.</p></li>
<li><p>[<a class="reference internal" href="reference/commands/logical_count.html"><span class="doc">logical_count</span></a>] Fixed memory leak on initial dynamic
column error.</p></li>
<li><p>[<a class="reference internal" href="reference/commands/logical_range_filter.html"><span class="doc">logical_range_filter</span></a>] Fixed memory leak when an error
occurs in dynamic column evaluation.</p></li>
<li><p>[<a class="reference internal" href="reference/tokenizers.html"><span class="doc">Tokenizers</span></a>] Fixed a bug that the wrong <code class="docutils literal notranslate"><span class="pre">source_offset</span></code> when a
loose tokenizing such as <code class="docutils literal notranslate"><span class="pre">loose_symbol</span></code> option.</p></li>
<li><p>[<a class="reference internal" href="reference/normalizers.html"><span class="doc">Normalizers</span></a>] Fixed a bug that FULLWIDTH LATIN CAPITAL LETTERs
such as <code class="docutils literal notranslate"><span class="pre">U+FF21</span> <span class="pre">FULLWIDTH</span> <span class="pre">LATIN</span> <span class="pre">CAPITAL</span> <span class="pre">LETTER</span> <span class="pre">A</span></code> aren’t normalized to LATIN SMALL
LETTERs such as <code class="docutils literal notranslate"><span class="pre">U+0061</span> <span class="pre">LATIN</span> <span class="pre">SMALL</span> <span class="pre">LETTER</span> <span class="pre">A</span></code>.
If you have been used <code class="docutils literal notranslate"><span class="pre">NormalizerNFKC100</span></code> , you must recreate your indexes.</p></li>
</ul>
</div>
</div>
<div class="section" id="release-8-0-2-2018-04-29">
<span id="release-8-0-2"></span><h1>Release 8.0.2 - 2018-04-29<a class="headerlink" href="#release-8-0-2-2018-04-29" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id138">
<h2>Improvements<a class="headerlink" href="#id138" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>[<a class="reference internal" href="reference/executables/grndb.html"><span class="doc">grndb</span></a>][<a class="reference internal" href="reference/executables/grndb.html#grndb-force-truncate"><span class="std std-ref">--force-truncate</span></a>] Improved
<code class="docutils literal notranslate"><span class="pre">grndb</span> <span class="pre">recover</span> <span class="pre">--force-truncate</span></code> option that it can be truncated even if
locks are left on the table.</p></li>
<li><p>[<a class="reference internal" href="reference/commands/logical_range_filter.html"><span class="doc">logical_range_filter</span></a>] Added <code class="docutils literal notranslate"><span class="pre">sort_keys</span></code> option.</p></li>
<li><p>Added a new function <code class="docutils literal notranslate"><span class="pre">time_format()</span></code>.
You can specify time format against a column of <code class="docutils literal notranslate"><span class="pre">Time</span></code> type.
You can specify with use format of <code class="docutils literal notranslate"><span class="pre">strftime</span></code> .</p></li>
<li><p>[<a class="reference internal" href="reference/tokenizers.html"><span class="doc">Tokenizers</span></a>] Support new tokenizer <code class="docutils literal notranslate"><span class="pre">TokenNgram</span></code>.
You can change its behavior dynamically via options.
Here is a list of available options:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">n</span></code> : “N” of Ngram. For example, “3” for trigram.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">loose_symbol</span></code> : Tokenize keywords including symbols, to be searched
by both queries with/without symbols. For example, a keyword
“090-1111-2222” will be found by any of “09011112222”, “090”, “1111”,
“2222” and “090-1111-2222”.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">loose_blank</span></code> : Tokenize keywords including blanks, to be searched
by both queries with/without blanks. For example, a keyword
“090 1111 2222” will be found by any of “09011112222”, “090”, “1111”,
“2222” and “090 1111 2222”.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">remove_blank</span></code> : Tokenize keywords including blanks, to be searched
by queries without blanks. For example, a keyword “090 1111 2222” will
be found by any of “09011112222”, “090”, “1111” or “2222”. Note that
the keyword won’t be found by a query including blanks like
“090 1111 2222”.</p></li>
</ul>
</div></blockquote>
</li>
<li><p>[<a class="reference internal" href="reference/normalizers.html"><span class="doc">Normalizers</span></a>] Support new normalizer “NormalizerNFKC100” based on Unicode NFKC (Normalization Form Compatibility Composition) for Unicode 10.0.</p></li>
<li><p>[<a class="reference internal" href="reference/normalizers.html"><span class="doc">Normalizers</span></a>] Support options for “NormalizerNFKC51” and “NormalizerNFKC100” normalizers.
You can change their behavior dynamically.
Here is a list of available options:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">unify_kana</span></code> : Same pronounced characters in all of full-width
Hiragana, full-width Katakana and half-width Katakana are regarded as
the same character.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unify_kana_case</span></code> : Large and small versions of same letters in all of
full-width Hiragana, full-width Katakana and half-width Katakana are
regarded as the same character.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unify_kana_voiced_sound_mark</span></code> : Letters with/without voiced sound
mark and semi voiced sound mark in all of full-width Hiragana,
full-width Katakana and half-width Katakana are regarded as the same
character.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unify_hyphen</span></code> : The characters like hyphen are regarded as the hyphen.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unify_prolonged_sound_mark</span></code> : The characters like prolonged sound mark
are regarded as the prolonged sound mark.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unify_hyphen_and_prolonged_sound_mark</span></code> : The characters like hyphen
and prolonged sound mark are regarded as the hyphen.</p></li>
</ul>
</div></blockquote>
</li>
<li><p>[<a class="reference internal" href="reference/commands/dump.html"><span class="doc">dump</span></a>] Support output of tokenizer’s options and
normalizer’s options. Groonga 8.0.1 and earlier versions cannot import dump
including options for tokenizers or normalizers generated by Groonga 8.0.2
or later, and it will occurs error due to unsupported information.</p></li>
<li><p>[<a class="reference internal" href="reference/commands/schema.html"><span class="doc">schema</span></a>] Support output of tokenizer’s options and
normalizer’s options. Groonga 8.0.1 and earlier versions cannot import schema
including options for tokenizers or normalizers generated by Groonga 8.0.2
or later, and it will occurs error due to unsupported information.</p></li>
<li><p>Supported Ubuntu 18.04 (Bionic Beaver)</p></li>
</ul>
</div>
<div class="section" id="id139">
<h2>Fixes<a class="headerlink" href="#id139" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Fixed a bug that unexpected record is matched with space only query.
[groonga-dev,04609][Reported by satouyuzh]</p></li>
<li><p>Fixed a bug that wrong scorer may be used.
It’s caused when multiple scorers are used as below.
<code class="docutils literal notranslate"><span class="pre">--match_columns</span> <span class="pre">'title</span> <span class="pre">||</span> <span class="pre">scorer_tf_at_most(content,</span> <span class="pre">2.0)'</span></code>.</p></li>
<li><p>Fixed a bug that it may also take so much time to change “thread_limit”.</p></li>
</ul>
</div>
<div class="section" id="id140">
<h2>Thanks<a class="headerlink" href="#id140" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>satouyuzh</p></li>
</ul>
</div>
</div>
<div class="section" id="release-8-0-1-2018-03-29">
<span id="release-8-0-1"></span><h1>Release 8.0.1 - 2018-03-29<a class="headerlink" href="#release-8-0-1-2018-03-29" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id141">
<h2>Improvements<a class="headerlink" href="#id141" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>[<a class="reference internal" href="reference/log.html"><span class="doc">Log</span></a>] Show <code class="docutils literal notranslate"><span class="pre">filter</span></code> conditions in query log.
It’s disabled by default. To enable it, you need to set an environment
variable <code class="docutils literal notranslate"><span class="pre">GRN_QUERY_LOG_SHOW_CONDITION=yes</span></code>.</p></li>
<li><p>Install <code class="docutils literal notranslate"><span class="pre">*.pdb</span></code> into the directory where <code class="docutils literal notranslate"><span class="pre">*.dll</span></code> and <code class="docutils literal notranslate"><span class="pre">*.exe</span></code>
are installed.</p></li>
<li><p>[<a class="reference internal" href="reference/commands/logical_count.html"><span class="doc">logical_count</span></a>] Support <code class="docutils literal notranslate"><span class="pre">filtered</span></code>
stage dynamic columns.</p></li>
<li><p>[<a class="reference internal" href="reference/commands/logical_count.html"><span class="doc">logical_count</span></a>]
[<a class="reference internal" href="reference/commands/logical_count.html#logical-count-post-filter"><span class="std std-ref">post_filter</span></a>] Added a new filter timing.
It’s executed after <code class="docutils literal notranslate"><span class="pre">filtered</span></code> stage columns are generated.</p></li>
<li><p>[<a class="reference internal" href="reference/commands/logical_select.html"><span class="doc">logical_select</span></a>]
[<a class="reference internal" href="reference/commands/logical_select.html#logical-select-post-filter"><span class="std std-ref">post_filter</span></a>] Added a new filter timing.
It’s executed after <code class="docutils literal notranslate"><span class="pre">filtered</span></code> stage columns are generated.</p></li>
<li><p>Support LZ4/Zstd/zlib compression for vector data.</p></li>
<li><p>Support alias to accessor such as <code class="docutils literal notranslate"><span class="pre">_key</span></code>.</p></li>
<li><p>[<a class="reference internal" href="reference/commands/logical_range_filter.html"><span class="doc">logical_range_filter</span></a>] Optimize
window function for large result set.
If we find enough matched records, we don’t apply window function
to the remaining windows.</p>
<p>TODO: Disable this optimization for small result set if its overhead
is not negligible. The overhead is not evaluated yet.</p>
</li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] Added <code class="docutils literal notranslate"><span class="pre">match_escalation</span></code> parameter.
You can force to enable match escalation by <code class="docutils literal notranslate"><span class="pre">--match_escalation</span> <span class="pre">yes</span></code>.
It’s stronger than <code class="docutils literal notranslate"><span class="pre">--match_escalation_threshold</span> <span class="pre">99999....999</span></code>
because <code class="docutils literal notranslate"><span class="pre">--match_escalation</span> <span class="pre">yes</span></code> also works with
<code class="docutils literal notranslate"><span class="pre">SOME_CONDITIONS</span> <span class="pre">&amp;&amp;</span> <span class="pre">column</span> <span class="pre">&#64;</span> <span class="pre">'query'</span></code>.
<code class="docutils literal notranslate"><span class="pre">--match_escalation_threshold</span></code> isn’t used in this case.</p>
<p>The default is <code class="docutils literal notranslate"><span class="pre">--match_escalation</span> <span class="pre">auto</span></code>. It doesn’t change the
current behavior.</p>
<p>You can disable match escalation by <code class="docutils literal notranslate"><span class="pre">--match_escalation</span> <span class="pre">no</span></code>.
It’s the same as <code class="docutils literal notranslate"><span class="pre">--match_escalation_threshold</span> <span class="pre">-1</span></code>.</p>
</li>
<li><p>[httpd] Updated bundled nginx to 1.13.10.</p></li>
</ul>
</div>
<div class="section" id="id142">
<h2>Fixes<a class="headerlink" href="#id142" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Fixed memory leak that occurs when a prefix query doesn’t match any token.
[GitHub#820][Patch by Naoya Murakami]</p></li>
<li><p>Fixed a bug that a cache for different databases is used when
multiple databases are opened in the same process.</p></li>
<li><p>Fixed a bug that a wrong index is constructed.
This occurs only when the source of a column is a vector column and
<code class="docutils literal notranslate"><span class="pre">WITH_SECTION</span></code> isn’t specified.</p></li>
<li><p>Fixed a bug that a constant value can overflow or underflow in
comparison (&gt;,&gt;=,&lt;,&lt;=,==,!=).</p></li>
</ul>
</div>
<div class="section" id="id143">
<h2>Thanks<a class="headerlink" href="#id143" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Naoya Murakami</p></li>
</ul>
</div>
</div>
<div class="section" id="release-8-0-0-2018-02-09">
<span id="release-8-0-0"></span><h1>Release 8.0.0 - 2018-02-09<a class="headerlink" href="#release-8-0-0-2018-02-09" title="Permalink to this headline">¶</a></h1>
<p>This is a major version up! But It keeps backward compatibility.
You can upgrade to 8.0.0 without rebuilding database.</p>
<div class="section" id="id144">
<h2>Improvements<a class="headerlink" href="#id144" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] Added <code class="docutils literal notranslate"><span class="pre">--drilldown_adjuster</span></code> and
<code class="docutils literal notranslate"><span class="pre">--drilldowns[LABEL].adjuster</span></code>.
You can adjust score against result of drilldown.</p></li>
<li><p>[<a class="reference internal" href="reference/indexing.html#online-index-construction"><span class="std std-ref">Online index construction</span></a>] Changed environment variable name
<code class="docutils literal notranslate"><span class="pre">GRN_II_REDUCE_EXPIRE_ENABLE</span></code> to <code class="docutils literal notranslate"><span class="pre">GRN_II_REDUCE_EXPIRE_THRESHOLD</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">GRN_II_REDUCE_EXPIRE_THRESHOLD=0</span> <span class="pre">==</span> <span class="pre">GRN_II_REDUCE_EXPIRE_ENABLE=no</span></code>.
<code class="docutils literal notranslate"><span class="pre">GRN_II_REDUCE_EXPIRE_THRESHOLD=-1</span></code> uses
<code class="docutils literal notranslate"><span class="pre">ii-&gt;chunk-&gt;max_map_seg</span> <span class="pre">/</span> <span class="pre">2</span></code> as threshold.
<code class="docutils literal notranslate"><span class="pre">GRN_II_REDUCE_EXPIRE_THRESHOLD</span> <span class="pre">&gt;</span> <span class="pre">0</span></code> uses
<code class="docutils literal notranslate"><span class="pre">MIN(ii-&gt;chunk-&gt;max_map_seg</span> <span class="pre">/</span> <span class="pre">2,</span> <span class="pre">GRN_II_REDUCE_EXPIRE_THRESHOLD)</span></code>
as threshold.
<code class="docutils literal notranslate"><span class="pre">GRN_II_REDUCE_EXPIRE_THRESHOLD=32</span></code> is the default.</p>
</li>
<li><p>[<a class="reference internal" href="reference/functions/between.html"><span class="doc">between</span></a>] Accept <code class="docutils literal notranslate"><span class="pre">between()</span></code> without borders.
If the number of arguments passed to <code class="docutils literal notranslate"><span class="pre">between()</span></code> is 3, the 2nd and 3rd
arguments are handled as the inclusive edges. [GitHub#685]</p></li>
</ul>
</div>
<div class="section" id="id145">
<h2>Fixes<a class="headerlink" href="#id145" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Fixed a memory leak for normal hash table.
[GitHub:mroonga/mroonga#190][Reported by fuku1]</p></li>
<li><p>Fix a memory leak for normal array.</p></li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] Stopped to cache when <code class="docutils literal notranslate"><span class="pre">output_columns</span></code>
uses not stable function.</p></li>
<li><p>[Windows] Fixed wrong value report on <code class="docutils literal notranslate"><span class="pre">WSASend</span></code> error.</p></li>
</ul>
</div>
<div class="section" id="id146">
<h2>Thanks<a class="headerlink" href="#id146" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>fuku1</p></li>
</ul>
</div>
</div>
<div class="section" id="release-7-1-1-2018-01-29">
<span id="release-7-1-1"></span><h1>Release 7.1.1 - 2018-01-29<a class="headerlink" href="#release-7-1-1-2018-01-29" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id147">
<h2>Improvements<a class="headerlink" href="#id147" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>[<a class="reference internal" href="install/ubuntu.html"><span class="doc">Ubuntu</span></a>] Dropped Ubuntu 17.04 (Zesty Zapus) support.
It has reached EOL at Jan 13, 2018.</p></li>
<li><p>Added quorum match support.
You can use quorum match in both script syntax and query syntax.
[groonga-talk,385][Suggested by 付超群]</p>
<p>TODO: Add documents for quorum match syntax and link to them.</p>
</li>
<li><p>Added custom similarity threshold support in script syntax.
You can use custom similarity threshold in script syntax.</p>
<p>TODO: Add document for the syntax and link to it.</p>
</li>
<li><p>[<a class="reference internal" href="reference/executables/grndb.html"><span class="doc">grndb</span></a>][<a class="reference internal" href="reference/executables/grndb.html#grndb-force-lock-clear"><span class="std std-ref">--force-lock-clear</span></a>]
Added <code class="docutils literal notranslate"><span class="pre">--force-lock-clear</span></code> option. With this option, <code class="docutils literal notranslate"><span class="pre">grndb</span></code>
forces to clear locks of database, tables and data columns. You can
use your database again even if locks are remained in database,
tables and data columns.</p>
<p>But this option very risky. Normally, you should not use it. If your
database is broken, your database is still broken. This option just
ignores locks.</p>
</li>
<li><p>[<a class="reference internal" href="reference/commands/load.html"><span class="doc">load</span></a>] Added surrogate pairs support in
escape syntax. For example, <code class="docutils literal notranslate"><span class="pre">\uD83C\uDF7A</span></code> is processed as <code class="docutils literal notranslate"><span class="pre">🍺</span></code>.</p></li>
<li><p>[Windows] Changed to use sparse file on Windows. It reduces disk
space and there are no performance demerit.</p></li>
<li><p>[<a class="reference internal" href="reference/indexing.html#online-index-construction"><span class="std std-ref">Online index construction</span></a>] Added
<code class="docutils literal notranslate"><span class="pre">GRN_II_REDUCE_EXPIRE_THRESHOLD</span></code> environment variable to control
when memory maps are expired in index column. It’s <code class="docutils literal notranslate"><span class="pre">-1</span></code> by
default. It means that expire timing is depends on index column
size. If index column is smaller, expire timing is more. If index
column is larger, expire timing is less.</p>
<p>You can use the previous behavior by <code class="docutils literal notranslate"><span class="pre">0</span></code>. It means that Groonga
always tries to expire.</p>
</li>
<li><p>[<a class="reference internal" href="reference/commands/logical_range_filter.html"><span class="doc">logical_range_filter</span></a>]
[<a class="reference internal" href="reference/commands/logical_range_filter.html#logical-range-filter-post-filter"><span class="std std-ref">post_filter</span></a>] Added a new filter timing.
It’s executed after <code class="docutils literal notranslate"><span class="pre">filtered</span></code> stage generated columns are generated.</p></li>
</ul>
</div>
<div class="section" id="id148">
<h2>Fixes<a class="headerlink" href="#id148" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Reduced resource usage for creating index for reference vector.
[GitHub#806][Reported by Naoya Murakami]</p></li>
<li><p>[<a class="reference internal" href="reference/commands/table_create.html"><span class="doc">table_create</span></a>] Fixed a bug that a table
is created even when <code class="docutils literal notranslate"><span class="pre">token_filters</span></code> is invalid.
[GitHub#266]</p></li>
</ul>
</div>
<div class="section" id="id149">
<h2>Thanks<a class="headerlink" href="#id149" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>付超群</p></li>
<li><p>Naoya Murakami</p></li>
</ul>
</div>
</div>
<div class="section" id="release-7-1-0-2017-12-29">
<span id="release-7-1-0"></span><h1>Release 7.1.0 - 2017-12-29<a class="headerlink" href="#release-7-1-0-2017-12-29" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id150">
<h2>Improvements<a class="headerlink" href="#id150" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>[<a class="reference internal" href="reference/commands/load.html"><span class="doc">load</span></a>] Improved the <code class="docutils literal notranslate"><span class="pre">load</span></code>’s
query-log format.
Added detail below items in the <code class="docutils literal notranslate"><span class="pre">load</span></code>’s query-log.</p>
<blockquote>
<div><ul class="simple">
<li><p>outputs number of loaded records.</p></li>
<li><p>outputs number of error records and columns.</p></li>
<li><p>outputs number of total records.</p></li>
</ul>
</div></blockquote>
</li>
<li><p>[<a class="reference internal" href="reference/commands/logical_count.html"><span class="doc">logical_count</span></a>] Improved the
<code class="docutils literal notranslate"><span class="pre">logical_count</span></code>’s query-log format.
Added detail below items in the <code class="docutils literal notranslate"><span class="pre">logical_count</span></code>’s query-log.</p>
<blockquote>
<div><ul class="simple">
<li><p>outputs number of count.</p></li>
</ul>
</div></blockquote>
</li>
<li><p>[<a class="reference internal" href="reference/commands/logical_select.html"><span class="doc">logical_select</span></a>] Improve the
<code class="docutils literal notranslate"><span class="pre">logical_select</span></code>’s query-log format.
Added detail below items in the <code class="docutils literal notranslate"><span class="pre">logical_select</span></code>’s query-log.</p>
<blockquote>
<div><ul class="simple">
<li><p>log N outputs.</p></li>
<li><p>outputs plain drilldown.</p></li>
<li><p>outputs labeled drilldown.</p></li>
<li><p>outputs selected in each shard.</p></li>
<li><p>use “[…]” for target information.</p></li>
</ul>
</div></blockquote>
</li>
<li><p>[<a class="reference internal" href="reference/commands/delete.html"><span class="doc">delete</span></a>] Improved the <code class="docutils literal notranslate"><span class="pre">delete</span></code>’s
query-log format.
Added detail below items in the <code class="docutils literal notranslate"><span class="pre">delete</span></code>’s query-log.</p>
<blockquote>
<div><ul class="simple">
<li><p>outputs number of deleted and error records.</p></li>
<li><p>outputs number of rest number of records.</p></li>
</ul>
</div></blockquote>
</li>
<li><p>[<a class="reference internal" href="reference/executables/groonga-server-http.html"><span class="doc">Groonga HTTP server</span></a>] The server
executed by <code class="docutils literal notranslate"><span class="pre">groonga</span> <span class="pre">-s</span></code> ensure stopping by C-c.</p></li>
<li><p>Used <code class="docutils literal notranslate"><span class="pre">NaN</span></code> and <code class="docutils literal notranslate"><span class="pre">Infinity</span></code>, <code class="docutils literal notranslate"><span class="pre">-Infinity</span></code> instead of Lisp
representations(<code class="docutils literal notranslate"><span class="pre">#&lt;nan&gt;</span></code> and  <code class="docutils literal notranslate"><span class="pre">#i1/0</span></code>, <code class="docutils literal notranslate"><span class="pre">#-i1/0</span></code>).</p></li>
<li><p>Supported vector for drilldown calc target.</p></li>
<li><p>Partially supported keyword extraction from regexp search.
It enables <code class="docutils literal notranslate"><span class="pre">highlight_html</span></code> and <code class="docutils literal notranslate"><span class="pre">snippet_html</span></code> for regexp search.
[GitHub#787][Reported by takagi01]</p></li>
<li><p>[bulk] Reduced the number of <code class="docutils literal notranslate"><span class="pre">realloc()</span></code>.
<code class="docutils literal notranslate"><span class="pre">grn_bulk_*()</span></code> API supports it.</p>
<p>It improves performance for large output case on Windows.
For example, it causes 100x faster for 100MB over output.</p>
<p>Because <code class="docutils literal notranslate"><span class="pre">realloc()</span></code> is heavy on Windows.</p>
</li>
<li><p>Enabled <code class="docutils literal notranslate"><span class="pre">GRN_II_OVERLAP_TOKEN_SKIP_ENABLE</span></code> only when its value is “yes”.</p></li>
<li><p>Deprecated <code class="docutils literal notranslate"><span class="pre">GRN_NGRAM_TOKENIZER_REMOVE_BLANK_DISABLE</span></code>.
Use <code class="docutils literal notranslate"><span class="pre">GRN_NGRAM_TOKENIZER_REMOVE_BLANK_ENABLE=no</span></code> instead.</p></li>
<li><p>Added new function <code class="docutils literal notranslate"><span class="pre">index_column_source_records</span></code>.
It gets source records of index column.[Patch by Naoya Murakami]</p></li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] Supported negative “offset” for “offset + size - limit” &gt;= 0</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">grn_column_cache</span></code>.
It’ll improve performance for getter of fixed size column value.</p></li>
<li><p>[<a class="reference internal" href="reference/executables/groonga.html"><span class="doc">groonga executable file</span></a>] Added <code class="docutils literal notranslate"><span class="pre">--listen-backlog</span> <span class="pre">option</span></code>.
You can customize <code class="docutils literal notranslate"><span class="pre">listen(2)</span></code>’s backlog by this option.</p></li>
<li><p>[httpd] Updated bundled nginx to 1.13.8.</p></li>
</ul>
</div>
<div class="section" id="id151">
<h2>Fixes<a class="headerlink" href="#id151" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>Fixed a memory leak in <code class="docutils literal notranslate"><span class="pre">highlight_full</span></code></p></li>
<li><p>Fixed a crash bug by early unlink
It’s not caused by instruction in <code class="docutils literal notranslate"><span class="pre">grn_expr_parse()</span></code> but it’s caused when
libgroonga user such as Mroonga uses the following instructions:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">grn_expr_append_const(&quot;_id&quot;)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_expr_append_op(GRN_OP_GET_VALUE)</span></code></p></li>
</ol>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="id152">
<h2>Thanks<a class="headerlink" href="#id152" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>takagi01</p></li>
<li><p>Naoya Murakami</p></li>
</ul>
</div>
</div>
<div class="section" id="release-7-0-9-2017-11-29">
<span id="release-7-0-9"></span><h1>Release 7.0.9 - 2017-11-29<a class="headerlink" href="#release-7-0-9-2017-11-29" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id153">
<h2>Improvements<a class="headerlink" href="#id153" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Supported newer version of Apache Arrow. In this release, 0.8.0 or
later is required for Apache Arrow support.</p></li>
<li><p>[sharding] Added new API for dynamic columns.</p>
<ul>
<li><p>Groonga::LabeledArguments</p></li>
</ul>
</li>
<li><p>[sharding] Added convenient <code class="docutils literal notranslate"><span class="pre">Table#select_all</span></code> method.</p></li>
<li><p>[<a class="reference internal" href="reference/commands/logical_range_filter.html"><span class="doc">logical_range_filter</span></a>] Supported dynamic
columns. Note that <code class="docutils literal notranslate"><span class="pre">initial</span></code> and <code class="docutils literal notranslate"><span class="pre">filtered</span></code> stage are only
supported.</p></li>
<li><p>[<a class="reference internal" href="reference/commands/logical_range_filter.html"><span class="doc">logical_range_filter</span></a>] Added documentation
about <code class="docutils literal notranslate"><span class="pre">cache</span></code> parameter and dynamic columns.</p></li>
<li><p>[<a class="reference internal" href="reference/commands/logical_count.html"><span class="doc">logical_count</span></a>] Supported dynamic
columns. Note that <code class="docutils literal notranslate"><span class="pre">initial</span></code> stage is only supported.</p></li>
<li><p>[<a class="reference internal" href="reference/commands/logical_count.html"><span class="doc">logical_count</span></a>] Added documentation about
named parameters.</p></li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] Supported <code class="docutils literal notranslate"><span class="pre">--match_columns</span> <span class="pre">_key</span></code>
without index.</p></li>
<li><p>[<a class="reference internal" href="reference/functions/in_values.html"><span class="doc">in_values</span></a>] Supported to specify more
than 126 values. [GitHub#760] [GitHub#781] [groonga-dev,04449]
[Reported by Murata Satoshi]</p></li>
<li><p>[httpd] Updated bundled nginx to 1.13.7.</p></li>
</ul>
</div>
<div class="section" id="id154">
<h2>Fixes<a class="headerlink" href="#id154" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>[httpd] Fixed build error when old Groonga is already installed.
[GitHub#775] [Reported by myamanishi3]</p></li>
<li><p>[<a class="reference internal" href="reference/functions/in_values.html"><span class="doc">in_values</span></a>] Fixed a bug that
<code class="docutils literal notranslate"><span class="pre">in_values</span></code> with too many arguments can cause a crash. This bug is
found during supporting more than 126 values. [GitHub#780]</p></li>
<li><p>[cmake] Fixed LZ4 and MessagePack detection. [Reported by Sergei
Golubchik]</p></li>
<li><p>[<a class="reference internal" href="reference/indexing.html#offline-index-construction"><span class="std std-ref">Offline index construction</span></a>] Fixed a bug that offline index
construction for vector column consumes unnecessary resources. If
you have a log of elements in one vector column and many records,
Groonga will crash.
[groonga-dev,04533][Reported by Toshio Uchiyama]</p></li>
</ul>
</div>
<div class="section" id="id155">
<h2>Thanks<a class="headerlink" href="#id155" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Murata Satoshi</p></li>
<li><p>myamanishi3</p></li>
<li><p>Sergei Golubchik</p></li>
<li><p>Toshio Uchiyama</p></li>
</ul>
</div>
</div>
<div class="section" id="release-7-0-8-2017-10-29">
<span id="release-7-0-8"></span><h1>Release 7.0.8 - 2017-10-29<a class="headerlink" href="#release-7-0-8-2017-10-29" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id156">
<h2>Improvements<a class="headerlink" href="#id156" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>[windows] Supported backtrace on crash.
This feature not only function call history but also source filename
and number of lines can be displayed as much as possible.
This feature makes problem solving easier.</p></li>
<li><p>Supported <code class="docutils literal notranslate"><span class="pre">(</span> <span class="pre">)</span></code> (empty block) only query (<code class="docutils literal notranslate"><span class="pre">--query</span> <span class="pre">&quot;(</span> <span class="pre">)&quot;</span></code>) for
<code class="docutils literal notranslate"><span class="pre">QUERY_NO_SYNTAX_ERROR</span></code>. In the previous version, it caused an
error. [GitHub#767]</p></li>
<li><p>Supported <code class="docutils literal notranslate"><span class="pre">(+)</span></code> (only and block) only query (<code class="docutils literal notranslate"><span class="pre">--query</span> <span class="pre">&quot;(+)&quot;</span></code>)
for <code class="docutils literal notranslate"><span class="pre">QUERY_NO_SYNTAX_ERROR</span></code>. In the previous version, it caused an
error. [GitHub#767]</p></li>
<li><p>Supported <code class="docutils literal notranslate"><span class="pre">~foo</span></code> (starting with “~”) query (<code class="docutils literal notranslate"><span class="pre">--query</span> <span class="pre">&quot;~y&quot;</span></code>) for
<code class="docutils literal notranslate"><span class="pre">QUERY_NO_SYNTAX_ERROR</span></code>. In the previous version, it caused an
error. [GitHub#767]</p></li>
<li><p>Modified log level of <code class="docutils literal notranslate"><span class="pre">expired</span></code> from <code class="docutils literal notranslate"><span class="pre">info</span></code> to <code class="docutils literal notranslate"><span class="pre">debug</span></code>.
<code class="docutils literal notranslate"><span class="pre">2017-10-29</span> <span class="pre">14:05:34.123456|i|</span> <span class="pre">&lt;0000000012345678:0&gt;</span> <span class="pre">expired</span>
<span class="pre">i=000000000B123456</span> <span class="pre">max=10</span> <span class="pre">(2/2)</span></code> This message is logged when memory
mapped area for index is unmapped.  Thus, this log message is useful
information for debugging, in other words, as it is unnecessary
information in normal operation, we changed log level from <code class="docutils literal notranslate"><span class="pre">info</span></code>
to <code class="docutils literal notranslate"><span class="pre">debug</span></code>.</p></li>
<li><p>Supported Ubuntu 17.10 (Artful Aardvark)</p></li>
</ul>
</div>
<div class="section" id="id157">
<h2>Fixes<a class="headerlink" href="#id157" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>[dat] Fixed a bug that large file is created unexpectedly in the
worst case during database expansion process. This bug may occurs
when you create/delete index columns so frequently. In 7.0.7
release, a related bug was fixed - “<code class="docutils literal notranslate"><span class="pre">table_create</span></code> command fails
when there are many deleted keys”, but it turns out that it is not
enough in the worst case.</p></li>
<li><p>[<a class="reference internal" href="reference/commands/logical_select.html"><span class="doc">logical_select</span></a>] Fixed a bug that when
<code class="docutils literal notranslate"><span class="pre">offset</span></code> and <code class="docutils literal notranslate"><span class="pre">limit</span></code> were applied to multiple shards at the same
time, there is a case that it returns a fewer number of records
unexpectedly.</p></li>
</ul>
</div>
</div>
<div class="section" id="release-7-0-7-2017-09-29">
<span id="release-7-0-7"></span><h1>Release 7.0.7 - 2017-09-29<a class="headerlink" href="#release-7-0-7-2017-09-29" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id158">
<h2>Improvements<a class="headerlink" href="#id158" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>Supported <code class="docutils literal notranslate"><span class="pre">+</span></code> only query (<code class="docutils literal notranslate"><span class="pre">--query</span> <span class="pre">&quot;+&quot;</span></code>) for
<code class="docutils literal notranslate"><span class="pre">QUERY_NO_SYNTAX_ERROR</span></code>. In the previous version, it caused an
error.</p></li>
<li><p>[httpd] Updated bundled nginx to 1.13.5.</p></li>
<li><p>[<a class="reference internal" href="reference/commands/dump.html"><span class="doc">dump</span></a>] Added the default argument values
to the syntax section.</p></li>
<li><p>[<a class="reference internal" href="reference/command/command_version.html"><span class="doc">Command version</span></a>] Supported <code class="docutils literal notranslate"><span class="pre">--default-command-version</span> <span class="pre">3</span></code>.</p></li>
<li><p>Supported caching select result with function call. Now, most of
existing functions supports this feature. There are two exception,
when <code class="docutils literal notranslate"><span class="pre">now()</span></code> and <code class="docutils literal notranslate"><span class="pre">rand()</span></code> are used in query, select result will
not cached. Because of this default behavior change, new APIs are
introduced.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">grn_proc_set_is_stable()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_proc_is_stable()</span></code></p></li>
</ul>
<p>Note that if you add a new function that may return different result
with the same argument, you must call <code class="docutils literal notranslate"><span class="pre">grn_proc_is_stable(ctx,</span>
<span class="pre">proc,</span> <span class="pre">GRN_FALSE)</span></code>.  If you don’t call it, select result with the
function call is cached and is wrong result for multiple requests.</p>
</li>
</ul>
</div>
<div class="section" id="id159">
<h2>Fixes<a class="headerlink" href="#id159" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>[windows] Fixed to clean up file handle correctly on failure when
<code class="docutils literal notranslate"><span class="pre">database_unmap</span></code> is executed. There is a case that critical
section is not initialized when request is canceled before executing
<code class="docutils literal notranslate"><span class="pre">database_unmap</span></code>. In such a case, it caused a crach bug.</p></li>
<li><p>[<a class="reference internal" href="reference/tokenizers.html"><span class="doc">Tokenizers</span></a>] Fixed document for wrong tokenizer
names. It should be <code class="docutils literal notranslate"><span class="pre">TokenBigramIgnoreBlankSplitSymbolAlpha</span></code> and
<code class="docutils literal notranslate"><span class="pre">TokenBigramIgnoreBlankSplitSymbolAlphaDigit</span></code>.</p></li>
<li><p>Changed not to keep created empty file on error.</p>
<p>In the previous versions, there is a case that empty file keeps
remain on error.</p>
<p>Here is the senario to reproduce:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>creating new file by grn_fileinfo_open succeeds</p></li>
<li><p>mapping file by DO_MAP() is failed</p></li>
</ol>
</div></blockquote>
<p>In such a case, it causes an another error such as
“already file exists” because of the file which
isn’t under control. so these file should be removed during
cleanup process.</p>
</li>
<li><p>Fixed a bug that Groonga may be crashed when search process is
executed during executing many updates in a short time.</p></li>
<li><p>[<a class="reference internal" href="reference/commands/table_create.html"><span class="doc">table_create</span></a>] Fixed a bug that
<code class="docutils literal notranslate"><span class="pre">table_create</span></code> failed when there are many deleted keys.</p></li>
</ul>
</div>
</div>
<div class="section" id="release-7-0-6-2017-08-29">
<span id="release-7-0-6"></span><h1>Release 7.0.6 - 2017-08-29<a class="headerlink" href="#release-7-0-6-2017-08-29" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id160">
<h2>Improvements<a class="headerlink" href="#id160" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Supported prefix match search using multiple
indexes. (e.g. <code class="docutils literal notranslate"><span class="pre">--query</span> <span class="pre">&quot;Foo*&quot;</span> <span class="pre">--match_columns</span>
<span class="pre">&quot;TITLE_INDEX_COLUMN||BODY_INDEX_COLUMN&quot;</span></code>).</p></li>
<li><p>[<a class="reference internal" href="reference/window_functions/window_count.html"><span class="doc">window_count</span></a>] Supported
<code class="docutils literal notranslate"><span class="pre">window_count</span></code> function to add count data to result set. It is
useful to analyze or filter additionally.</p></li>
<li><p>Added the following API</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_obj_get_disk_usage():</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">GRN_EXPR_QUERY_NO_SYNTAX_ERROR</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_expr_syntax_expand_query_by_table()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_table_find_reference_object()</span></code></p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/object_inspect.html"><span class="doc">object_inspect</span></a>] Supported to show disk
usage about specified object.</p></li>
<li><p>Supported falling back query parse feature. It is enabled when
<code class="docutils literal notranslate"><span class="pre">QUERY_NO_SYNTAX_ERROR</span></code> flag is set to <code class="docutils literal notranslate"><span class="pre">query_flags</span></code>. (this
feature is disabled by default). If this flag is set, query never
causes syntax error. For example, “A +” is parsed and escaped
automatically into “A +”. This behavior is useful when application
uses user input directly and doesn’t want to show syntax error to
user and in log.</p></li>
<li><p>Supported to adjust score for term in query. “&gt;”, “&lt;”, and “~”
operators are supported. For example, “&gt;Groonga” increments score of
“Groonga”, “&lt;Groonga” decrements score of “Groonga”. “~Groonga”
decreases score of matched document in the current search
result. “~” operator doesn’t change search result itself.</p></li>
<li><p>Improved performance to remove table. <code class="docutils literal notranslate"><span class="pre">thread_limit=1</span></code> is not
needed for it. The process about checking referenced table existence
is done without opening objects. As a result, performance is
improved.</p></li>
<li><p>[httpd] Updated bundled nginx to 1.13.4.</p></li>
</ul>
</div>
<div class="section" id="id161">
<h2>Fixes<a class="headerlink" href="#id161" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>[<a class="reference internal" href="reference/commands/dump.html"><span class="doc">dump</span></a>] Fixed a bug that the 7-th unnamed
parameter for <cite>–sort_hash_table</cite> option is ignored.</p></li>
<li><p>[<a class="reference internal" href="reference/commands/schema.html"><span class="doc">schema</span></a>] Fixed a typo in command line
parameter name. It should be <cite>source</cite> instead of <cite>sources</cite>.
[groonga-dev,04449] [Reported by murata satoshi]</p></li>
<li><p>[<a class="reference internal" href="reference/commands/ruby_eval.html"><span class="doc">ruby_eval</span></a>] Fixed crash when ruby_eval
returned syntax error. [GitHub#751] [Patch by ryo-pinus]</p></li>
</ul>
</div>
<div class="section" id="id162">
<h2>Thanks<a class="headerlink" href="#id162" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>murata satoshi</p></li>
<li><p>ryo-pinus</p></li>
</ul>
</div>
</div>
<div class="section" id="release-7-0-5-2017-07-29">
<span id="release-7-0-5"></span><h1>Release 7.0.5 - 2017-07-29<a class="headerlink" href="#release-7-0-5-2017-07-29" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id163">
<h2>Improvements<a class="headerlink" href="#id163" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>[httpd] Updated bundled nginx to 1.13.3. Note that this version
contains security fix for CVE-2017-7529.</p></li>
<li><p>[<a class="reference internal" href="reference/commands/load.html"><span class="doc">load</span></a>] Supported to load the value of max
UInt64. In the previous versions, max UInt64 value is converted into
0 unexpectedlly.</p></li>
<li><p>Added the following API</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_window_get_size()</span></code> [GitHub#725] [Patch by Naoya Murakami]</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/functions/math_abs.html"><span class="doc">math_abs</span></a>] Supported <code class="docutils literal notranslate"><span class="pre">math_abs()</span></code>
function to calculate absolute value. [GitHub#721]</p></li>
<li><p>Supported to make <code class="docutils literal notranslate"><span class="pre">grn_default_logger_set_path()</span></code> and
<code class="docutils literal notranslate"><span class="pre">grn_default_query_logger_set_path()</span></code> thread safe.</p></li>
<li><p>[windows] Updated bundled pcre library to 8.41.</p></li>
<li><p>[<a class="reference internal" href="reference/commands/normalize.html"><span class="doc">normalize</span></a>] Improved not to output
redundant empty string <code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code> on error. [GitHub#730]</p></li>
<li><p>[functions/time] Supported to show error message when division by
zero was happened. [GitHub#733] [Patch by Naoya Murakami]</p></li>
<li><p>[windows] Changed to map <code class="docutils literal notranslate"><span class="pre">ERROR_NO_SYSTEM_RESOURCES</span></code> to
<code class="docutils literal notranslate"><span class="pre">GRN_RESOURCE_TEMPORARILY_UNAVAILABLE</span></code>. In the previous versions,
it returns <code class="docutils literal notranslate"><span class="pre">rc=-1</span></code> as a result code. It is not helpful to
investigate what actually happened. With this fix, it returns
<code class="docutils literal notranslate"><span class="pre">rc=-12</span></code>.</p></li>
<li><p>[functions/min][functions/max] Supported vector column. Now you need
not to care scalar column or vector column to use. [GitHub#735]
[Patch by Naoya Murakami]</p></li>
<li><p>[<a class="reference internal" href="reference/commands/dump.html"><span class="doc">dump</span></a>] Supported <code class="docutils literal notranslate"><span class="pre">--sort_hash_table</span></code>
option to sort by <code class="docutils literal notranslate"><span class="pre">_key</span></code> for hash table. Specify
<code class="docutils literal notranslate"><span class="pre">--sort_hash_table</span> <span class="pre">yes</span></code> to use it.</p></li>
<li><p>[<a class="reference internal" href="reference/functions/between.html"><span class="doc">between</span></a>] Supported to specify index
column. [GitHub#740] [Patch by Naoya Murakami]</p></li>
<li><p>[load] Supported Apache Arrow 0.5.0 or later.</p></li>
<li><p>[<a class="reference internal" href="troubleshooting/how_to_analyze_error_message.html"><span class="doc">How to analyze error messages</span></a>]
Added howto article to analyze error message in Groonga.</p></li>
<li><p>[<a class="reference internal" href="install/debian.html"><span class="doc">Debian GNU/Linux</span></a>] Updated required package list to
build from source.</p></li>
<li><p>[<a class="reference internal" href="install/ubuntu.html"><span class="doc">Ubuntu</span></a>] Dropped Ubuntu 16.10 (Yakkety
Yak) support. It has reached EOL at July 20, 2017.</p></li>
</ul>
</div>
<div class="section" id="id164">
<h2>Fixes<a class="headerlink" href="#id164" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Fixed to construct correct fulltext indexes against vector column
which type belongs to text family (<code class="docutils literal notranslate"><span class="pre">`ShortText</span></code> and so on). This
fix resolves that fulltext search doesn’t work well against text
vector column after updating indexes. [GitHub#494]</p></li>
<li><p>[<a class="reference internal" href="reference/commands/thread_limit.html"><span class="doc">thread_limit</span></a>] Fixed a bug that deadlock
occurs when thread_limit?max=1 is requested at once.</p></li>
<li><p>[<a class="reference internal" href="reference/executables/groonga-httpd.html"><span class="doc">groonga-httpd</span></a>] Fixed a mismatch path
of pid file between default one and restart command assumed. This
mismatch blocked restarting groonga-httpd. [GitHub#743] [Reported by
sozaki]</p></li>
</ul>
</div>
<div class="section" id="id165">
<h2>Thanks<a class="headerlink" href="#id165" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Naoya Murakami</p></li>
</ul>
</div>
</div>
<div class="section" id="release-7-0-4-2017-06-29">
<span id="release-7-0-4"></span><h1>Release 7.0.4 - 2017-06-29<a class="headerlink" href="#release-7-0-4-2017-06-29" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id166">
<h2>Improvements<a class="headerlink" href="#id166" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Added physical create/delete operation logs to identify problem for
troubleshooting. [GitHub#700,#701]</p></li>
<li><p>[<a class="reference internal" href="reference/functions/in_records.html"><span class="doc">in_records</span></a>] Improved performance for
fixed sized column. It may reduce 50% execution time.</p></li>
<li><p>[<a class="reference internal" href="reference/executables/grndb.html"><span class="doc">grndb</span></a>] Added <code class="docutils literal notranslate"><span class="pre">--log-path</span></code> option.
[GitHub#702,#703]</p></li>
<li><p>[<a class="reference internal" href="reference/executables/grndb.html"><span class="doc">grndb</span></a>] Added <code class="docutils literal notranslate"><span class="pre">--log-level</span></code> option.
[GitHub#706,#708]</p></li>
<li><p>Added the following API</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_operator_to_exec_func()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_obj_is_corrupt()</span></code></p></li>
</ul>
</li>
<li><p>Improved performance for “FIXED_SIZE_COLUMN OP CONSTANT”. Supported
operators are: <code class="docutils literal notranslate"><span class="pre">==</span></code>, <code class="docutils literal notranslate"><span class="pre">!=</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;=</span></code> and <code class="docutils literal notranslate"><span class="pre">&gt;=</span></code>.</p></li>
<li><p>Improved performance for “COLUMN OP VALUE &amp;&amp; COLUMN OP VALUE &amp;&amp; …”.</p></li>
<li><p>[<a class="reference internal" href="reference/executables/grndb.html"><span class="doc">grndb</span></a>] Supported corrupted object
detection with <code class="docutils literal notranslate"><span class="pre">grndb</span> <span class="pre">check</span></code>.</p></li>
<li><p>[<a class="reference internal" href="reference/commands/io_flush.html"><span class="doc">io_flush</span></a>] Supported <code class="docutils literal notranslate"><span class="pre">--only_opened</span></code>
option which enables to flush only opened database objects.</p></li>
<li><p>[<a class="reference internal" href="reference/executables/grndb.html"><span class="doc">grndb</span></a>] Supported to detect/delete
orphan “inspect” object. The orphaned “inspect” object is created by
renamed command name from <code class="docutils literal notranslate"><span class="pre">inspect</span></code> to <code class="docutils literal notranslate"><span class="pre">object_inspect</span></code>.</p></li>
</ul>
</div>
<div class="section" id="id167">
<h2>Fixes<a class="headerlink" href="#id167" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>[rpm][centos] Fixed unexpected macro expansion problem with
customized build. This bug only affects when rebuilding Groonga SRPM
with customized <code class="docutils literal notranslate"><span class="pre">additional_configure_options</span></code> parameter in spec
file.</p></li>
<li><p>Fixed missing null check for <code class="docutils literal notranslate"><span class="pre">grn_table_setoperation()</span></code>. There is a
possibility of crash bug when indexes are broken. [GitHub#699]</p></li>
</ul>
</div>
<div class="section" id="id168">
<h2>Thanks<a class="headerlink" href="#id168" title="Permalink to this headline">¶</a></h2>
</div>
</div>
<div class="section" id="release-7-0-3-2017-05-29">
<span id="release-7-0-3"></span><h1>Release 7.0.3 - 2017-05-29<a class="headerlink" href="#release-7-0-3-2017-05-29" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id169">
<h2>Improvements<a class="headerlink" href="#id169" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] Add document about
<a class="reference internal" href="tutorial/match_columns.html#full-text-search-with-specific-index-name"><span class="std std-ref">Full text search with specific index name</span></a>.</p></li>
<li><p>[index] Supported to log warning message which record causes posting
list overflows.</p></li>
<li><p>[<a class="reference internal" href="reference/commands/load.html"><span class="doc">load</span></a>][<a class="reference internal" href="reference/commands/dump.html"><span class="doc">dump</span></a>]
Supported Apache Arrow. [GitHub#691]</p></li>
<li><p>[cmake] Supported linking lz4 in embedded static library build.
[Original patch by Sergei Golubchik]</p></li>
<li><p>[<a class="reference internal" href="reference/commands/delete.html"><span class="doc">delete</span></a>] Supported to cancel.</p></li>
<li><p>[httpd] Updated bundled nginx to 1.13.0</p></li>
<li><p>Exported the following API</p>
<ul>
<li><p>grn_plugin_proc_get_caller()</p></li>
</ul>
</li>
<li><p>Added index column related function and selector.</p>
<ul>
<li><p>Added new selector: index_column_df_ratio_between()</p></li>
<li><p>Added new function: index_column_df_ratio()</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id170">
<h2>Fixes<a class="headerlink" href="#id170" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>[<a class="reference internal" href="reference/commands/delete.html"><span class="doc">delete</span></a>] Fixed a bug that error isn’t
cleared correctly. It affects to following deletions so that it
causes unexpected behavior.</p></li>
<li><p>[windows] Fixed a bug that IO version is not detected correctly when the
file is opened with <code class="docutils literal notranslate"><span class="pre">O_CREAT</span></code> flag.</p></li>
<li><p>[<a class="reference internal" href="reference/functions/vector_slice.html"><span class="doc">vector_slice</span></a>] Fixed a bug that non 4
bytes vector columns can’t slice. [GitHub#695] [Patch by Naoya
Murakami]</p></li>
<li><p>Fixed a bug that non 4 bytes fixed vector column can’t sequential
match by specifying index of vector. [GitHub#696] [Patch by Naoya
Murakami]</p></li>
<li><p>[<a class="reference internal" href="reference/commands/logical_select.html"><span class="doc">logical_select</span></a>] Fixed a bug that
“argument out of range” occurs when setting last day of month to the
min. [GitHub#698]</p></li>
</ul>
</div>
<div class="section" id="id171">
<h2>Thanks<a class="headerlink" href="#id171" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Sergei Golubchik</p></li>
<li><p>Naoya Murakami</p></li>
</ul>
</div>
</div>
<div class="section" id="release-7-0-2-2017-04-29">
<span id="release-7-0-2"></span><h1>Release 7.0.2 - 2017-04-29<a class="headerlink" href="#release-7-0-2-2017-04-29" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id172">
<h2>Improvements<a class="headerlink" href="#id172" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>[<a class="reference internal" href="reference/commands/logical_select.html"><span class="doc">logical_select</span></a>] Supported multiple
<a class="reference internal" href="reference/commands/logical_select.html#logical-select-drilldowns-label-columns-name-window-sort-keys"><span class="std std-ref">drilldowns[${LABEL}].columns[${NAME}].window.sort_keys</span></a>
and
<a class="reference internal" href="reference/commands/logical_select.html#logical-select-drilldowns-label-columns-name-window-group-keys"><span class="std std-ref">drilldowns[${LABEL}].columns[${NAME}].window.group_keys</span></a>.</p></li>
<li><p>[windows] Updated bundled LZ4 to 1.7.5.</p></li>
<li><p>[cache] Supported persistent cache feature.</p></li>
<li><p>[<a class="reference internal" href="reference/commands/log_level.html"><span class="doc">log_level</span></a>] Update English documentation.</p></li>
<li><p>Added the following APIs:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_set_default_cache_base_path()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_get_default_cache_base_path()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_persistent_cache_open()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_cache_default_open()</span></code></p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/executables/groonga.html#cmdoption-groonga-cache-base-path"><code class="xref std std-option docutils literal notranslate"><span class="pre">groonga</span> <span class="pre">--cache-base-path</span></code></a>] Added a new option to use
persistent cache.</p></li>
<li><p>[<a class="reference internal" href="reference/executables/groonga-httpd.html"><span class="doc">groonga-httpd</span></a>]
[<a class="reference internal" href="reference/executables/groonga-httpd.html#groonga-httpd-groonga-cache-base-path"><span class="std std-ref">groonga_cache_base_path</span></a>] Added new
configuration to use persistent cache.</p></li>
<li><p>[windows] Updated bundled msgpack to 2.1.1.</p></li>
<li><p>[<a class="reference internal" href="reference/commands/object_inspect.html"><span class="doc">object_inspect</span></a>] Supported not only
column inspection, but also index column statistics.</p></li>
<li><p>Supported index search for “<code class="docutils literal notranslate"><span class="pre">.*</span></code>” regexp pattern.  This feature is
enabled by default. Set
<code class="docutils literal notranslate"><span class="pre">GRN_SCAN_INFO_REGEXP_DOT_ASTERISK_ENABLE=no</span></code> environment variable
to disable this feature.</p></li>
<li><p>[<a class="reference internal" href="reference/functions/in_records.html"><span class="doc">in_records</span></a>] Added function to use an
existing table as condition patterns.</p></li>
<li><p>[<a class="reference internal" href="install/ubuntu.html"><span class="doc">Ubuntu</span></a>] Dropped Ubuntu 12.04 (Precise Pangolin)
support because of EOL.</p></li>
</ul>
</div>
<div class="section" id="id173">
<h2>Fixes<a class="headerlink" href="#id173" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>[<a class="reference internal" href="reference/commands/logical_select.html"><span class="doc">logical_select</span></a>] Fixed a bug that wrong
cache is used. This bug was occurred when dynamic column parameter
is used.</p></li>
<li><p>[<a class="reference internal" href="reference/commands/logical_select.html"><span class="doc">logical_select</span></a>] Fixed a bug that dynamic
columns aren’t created. It’s occurred when no match case.</p></li>
<li><p>[<a class="reference internal" href="reference/commands/reindex.html"><span class="doc">reindex</span></a>] Fixed a bug that data is lost
by reindex. [GitHub#646]</p></li>
<li><p>[httpd] Fixed a bug that response of <a class="reference internal" href="reference/commands/quit.html"><span class="doc">quit</span></a>
and <a class="reference internal" href="reference/commands/shutdown.html"><span class="doc">shutdown</span></a> is broken JSON when worker is
running as another user. [GitHub ranguba/groonga-client#12]</p></li>
</ul>
</div>
</div>
<div class="section" id="release-7-0-1-2017-03-29">
<span id="release-7-0-1"></span><h1>Release 7.0.1 - 2017-03-29<a class="headerlink" href="#release-7-0-1-2017-03-29" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id174">
<h2>Improvements<a class="headerlink" href="#id174" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Exported the following API</p>
<ul>
<li><p>grn_ii_cursor_next_pos()</p></li>
<li><p>grn_table_apply_expr()</p></li>
<li><p>grn_obj_is_data_column()</p></li>
<li><p>grn_obj_is_expr()</p></li>
<li><p>grn_obj_is_scalar_column()</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="reference/commands/dump.html"><span class="doc">dump</span></a>] Supported to dump weight reference
vector.</p></li>
<li><p>[<a class="reference internal" href="reference/commands/load.html"><span class="doc">load</span></a>] Supported to load
<code class="docutils literal notranslate"><span class="pre">array&lt;object&gt;</span></code> style weight vector column. The example of
<code class="docutils literal notranslate"><span class="pre">array&lt;object&gt;</span></code> style is: <code class="docutils literal notranslate"><span class="pre">[{&quot;key1&quot;:</span> <span class="pre">weight1},</span> <span class="pre">{&quot;key2&quot;:</span>
<span class="pre">weight2}]</span></code>.</p></li>
<li><p>Supported to search <code class="docutils literal notranslate"><span class="pre">!(XXX</span> <span class="pre">OPERATOR</span> <span class="pre">VALUE)</span></code> by index. Supported
operator is not only <code class="docutils literal notranslate"><span class="pre">&gt;</span></code> but also <code class="docutils literal notranslate"><span class="pre">&gt;=</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;=</span></code>, <code class="docutils literal notranslate"><span class="pre">==</span></code>
and <code class="docutils literal notranslate"><span class="pre">!=</span></code>.</p></li>
<li><p>Supported index search for “!(column == CONSTANT)”. The example in
this case is: <code class="docutils literal notranslate"><span class="pre">!(column</span> <span class="pre">==</span> <span class="pre">29)</span></code> and so on.</p></li>
<li><p>Supported more “!” optimization in the following patterns.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">!(column</span> <span class="pre">&#64;</span> <span class="pre">&quot;X&quot;)</span> <span class="pre">&amp;&amp;</span> <span class="pre">(column</span> <span class="pre">&#64;</span> <span class="pre">&quot;Y&quot;)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">(column</span> <span class="pre">&#64;</span> <span class="pre">&quot;Y&quot;)</span> <span class="pre">&amp;&amp;</span> <span class="pre">!(column</span> <span class="pre">&#64;</span> <span class="pre">&quot;X&quot;)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">(column</span> <span class="pre">&#64;</span> <span class="pre">&quot;Y&quot;)</span> <span class="pre">&amp;!</span> <span class="pre">!(column</span> <span class="pre">&#64;</span> <span class="pre">&quot;X&quot;)</span></code></p></li>
</ul>
</li>
<li><p>Supported to search <code class="docutils literal notranslate"><span class="pre">XXX</span> <span class="pre">||</span> <span class="pre">!(column</span> <span class="pre">&#64;</span> <span class="pre">&quot;xxx&quot;)</span></code> by index.</p></li>
<li><p>[<a class="reference internal" href="reference/commands/dump.html"><span class="doc">dump</span></a>] Changed to use <code class="docutils literal notranslate"><span class="pre">'{&quot;x&quot;:</span> <span class="pre">1,</span> <span class="pre">&quot;y&quot;:</span>
<span class="pre">2}'</span></code> style for not referenced weight vector. This change doesn’t
affect to old Groonga because it already supports one.</p></li>
<li><p>[experimental] Supported <code class="docutils literal notranslate"><span class="pre">GRN_ORDER_BY_ESTIMATED_SIZE_ENABLE</span></code>
environment variable. This variable controls whether query
optimization which is based on estimated size is applied or not.
This feature is disabled by default. Set
<code class="docutils literal notranslate"><span class="pre">GRN_ORDER_BY_ESTIMATED_SIZE_ENABLE=yes</span></code> if you want to try it.</p></li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] Added query log for <code class="docutils literal notranslate"><span class="pre">columns</span></code>,
<code class="docutils literal notranslate"><span class="pre">drilldown</span></code> evaluation.</p></li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] Changed query log format for
<code class="docutils literal notranslate"><span class="pre">drilldown</span></code>. This is backward incompatible change, but it only
affects users who convert query log by own programs.</p></li>
<li><p>[<a class="reference internal" href="reference/commands/table_remove.html"><span class="doc">table_remove</span></a>] Reduced temporary memory
usage. It’s enabled when the number of max threads is 0.</p></li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] <code class="docutils literal notranslate"><span class="pre">columns[LABEL](N)</span></code> is used
for query log format instead of <code class="docutils literal notranslate"><span class="pre">columns(N)[LABEL]</span></code>..</p></li>
<li><p>[<a class="reference internal" href="tutorial/query_expansion.html"><span class="doc">Query expansion</span></a>] Updated example to use vector
column because it is recommended way. [Reported by Gurunavi, Inc]</p></li>
<li><p>Supported to detect canceled request while locking. It fixes the
problem that <code class="docutils literal notranslate"><span class="pre">request_cancel</span></code> is ignored unexpectedly while locking.</p></li>
<li><p>[<a class="reference internal" href="reference/commands/logical_select.html"><span class="doc">logical_select</span></a>] Supported <code class="docutils literal notranslate"><span class="pre">initial</span></code>
and <code class="docutils literal notranslate"><span class="pre">filtered</span></code> stage dynamic columns. The examples are:
<code class="docutils literal notranslate"><span class="pre">--columns[LABEL].stage</span> <span class="pre">initial</span></code> or <code class="docutils literal notranslate"><span class="pre">--columns[LABEL].stage</span>
<span class="pre">filtered</span></code>.</p></li>
<li><p>[<a class="reference internal" href="reference/commands/logical_select.html"><span class="doc">logical_select</span></a>] Supported
<code class="docutils literal notranslate"><span class="pre">match_columns</span></code>, <code class="docutils literal notranslate"><span class="pre">query</span></code> and <code class="docutils literal notranslate"><span class="pre">drilldown_filter</span></code> option.</p></li>
<li><p>[<a class="reference internal" href="reference/functions/highlight_html.html"><span class="doc">highlight_html</span></a>] Supported similar
search.</p></li>
<li><p>[<a class="reference internal" href="reference/commands/logical_select.html"><span class="doc">logical_select</span></a>] Supported <code class="docutils literal notranslate"><span class="pre">initial</span></code>
and stage dynamic columns in labeled drilldown. The example is:
<code class="docutils literal notranslate"><span class="pre">--drilldowns[LABEL].stage</span> <span class="pre">initial</span></code>.</p></li>
<li><p>[<a class="reference internal" href="reference/commands/logical_select.html"><span class="doc">logical_select</span></a>] Supported window
function in dynamic column.</p></li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] Added documentation about
dynamic columns.</p></li>
<li><p>[<a class="reference internal" href="reference/window_function.html"><span class="doc">Window function</span></a>] Added section about window
functions.</p></li>
<li><p>[<a class="reference internal" href="install/centos.html"><span class="doc">CentOS</span></a>] Dropped CentOS 5 support because of EOL.</p></li>
<li><p>[httpd] Updated bundled nginx to 1.11.12</p></li>
<li><p>Supported to disable AND match optimization by environment variable.
You can disable this feature by
<code class="docutils literal notranslate"><span class="pre">GRN_TABLE_SELECT_AND_MIN_SKIP_ENABLE=no</span></code>. This feature is enable
by default.</p></li>
<li><p>[<a class="reference internal" href="reference/functions/vector_new.html"><span class="doc">vector_new</span></a>] Added a new function to
create a new vector.</p></li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] Added documentation about
<code class="docutils literal notranslate"><span class="pre">drilldown_filter</span></code>.</p></li>
</ul>
</div>
<div class="section" id="id175">
<h2>Fixes<a class="headerlink" href="#id175" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>[<a class="reference internal" href="reference/commands/lock_clear.html"><span class="doc">lock_clear</span></a>] Fixed a crash bug against
temporary database.</p></li>
<li><p>Fixed a problem that dynamically updated index size was increased
for natural language since Grooonga 6.1.4.</p></li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] Fixed a bug that “A &amp;&amp; B.C &#64; X”
may not return records that should be matched.</p></li>
<li><p>Fixed a conflict with <code class="docutils literal notranslate"><span class="pre">grn_io_flush()</span></code> and
<code class="docutils literal notranslate"><span class="pre">grn_io_expire()</span></code>. Without this change, if <code class="docutils literal notranslate"><span class="pre">io_flush</span></code> and <code class="docutils literal notranslate"><span class="pre">load</span></code>
command are executed simultaneously in specific timing, it causes a
crash bug by access violation.</p></li>
<li><p>[<a class="reference internal" href="reference/commands/logical_table_remove.html"><span class="doc">logical_table_remove</span></a>] Fixed a crash bug
when the max number of threads is 1.</p></li>
</ul>
</div>
<div class="section" id="id176">
<h2>Thanks<a class="headerlink" href="#id176" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Gurunavi, Inc.</p></li>
</ul>
</div>
</div>
<div class="section" id="release-7-0-0-2017-02-09">
<span id="release-7-0-0"></span><h1>Release 7.0.0 - 2017-02-09<a class="headerlink" href="#release-7-0-0-2017-02-09" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id177">
<h2>Improvements<a class="headerlink" href="#id177" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>[<a class="reference internal" href="reference/functions/in_values.html"><span class="doc">in_values</span></a>] Supported sequential search
for reference vector column. [Patch by Naoya Murakami] [GitHub#629]</p></li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] Changed to report error instead
of ignoring on invalid <code class="docutils literal notranslate"><span class="pre">drilldown[LABEL].sort_keys</span></code>.</p></li>
<li><p>[<a class="reference internal" href="reference/commands/select.html"><span class="doc">select</span></a>] Removed needless metadata
updates on DB. It reduces the case that database lock remains
even though <code class="docutils literal notranslate"><span class="pre">select</span></code> command is executed. [Reported by aomi-n]</p></li>
<li><p>[<a class="reference internal" href="reference/commands/lock_clear.html"><span class="doc">lock_clear</span></a>] Changed to clear metadata lock
by lock_clear against DB.</p></li>
<li><p>[<a class="reference internal" href="install/centos.html"><span class="doc">CentOS</span></a>] Enabled EPEL by default to install Groonga
on Amazon Linux.</p></li>
<li><p>[<a class="reference internal" href="reference/functions/query.html"><span class="doc">query</span></a>] Supported “&#64;X” style in script
syntax for prefix(“&#64;^”), suffix(“&#64;$”), regexp(“&#64;^”) search.</p></li>
<li><p>[<a class="reference internal" href="reference/functions/query.html"><span class="doc">query</span></a>] Added documentation about
available list of mode. The default mode is <code class="docutils literal notranslate"><span class="pre">MATCH</span></code> (“&#64;”) mode
which executes full text search.</p></li>
<li><p>[rpm][centos] Supported groonga-token-filter-stem package which
provides stemming feature by <code class="docutils literal notranslate"><span class="pre">TokenFilterStem</span></code> token filter on
CentOS 7. [GitHub#633] [Reported by Tim Bellefleur]</p></li>
<li><p>[<a class="reference internal" href="reference/window_functions/window_record_number.html"><span class="doc">window_record_number</span></a>] Marked
<code class="docutils literal notranslate"><span class="pre">record_number</span></code> as deprecated. Use <code class="docutils literal notranslate"><span class="pre">window_record_number</span></code>
instead. <code class="docutils literal notranslate"><span class="pre">record_number</span></code> is still available for backward
compatibility.</p></li>
<li><p>[<a class="reference internal" href="reference/window_functions/window_sum.html"><span class="doc">window_sum</span></a>] Added <code class="docutils literal notranslate"><span class="pre">window_sum</span></code>
window function. It’s similar behavior to window function sum() on
PostgreSQL.</p></li>
<li><p>Supported to construct offline indexing with in-memory (temporary)
<code class="docutils literal notranslate"><span class="pre">TABLE_DAT_KEY</span></code> table. [GitHub#623] [Reported by Naoya Murakami]</p></li>
<li><p>[onigmo] Updated bundled Onigmo to 6.1.1.</p></li>
<li><p>Supported <code class="docutils literal notranslate"><span class="pre">columns[LABEL].window.group_keys</span></code>. It’s used to apply
window function for every group.</p></li>
<li><p>[<a class="reference internal" href="reference/commands/load.html"><span class="doc">load</span></a>] Supported to report error on
invalid key. It enables you to detect mismatch type of key.</p></li>
<li><p>[<a class="reference internal" href="reference/commands/load.html"><span class="doc">load</span></a>] Supported <code class="docutils literal notranslate"><span class="pre">--output_errors</span> <span class="pre">yes</span></code>
option. If you specify “yes”, you can get errors for each load
failed record. Note that this feature requires command version 3.</p></li>
<li><p>[<a class="reference internal" href="reference/commands/load.html"><span class="doc">load</span></a>] Improve error message on table key
cast failure. Instead of “cast failed”, type of table key and target
type of table key are also contained in error message.</p></li>
<li><p>[httpd] Updated bundled nginx to 1.11.9.</p></li>
</ul>
</div>
<div class="section" id="id178">
<h2>Fixes<a class="headerlink" href="#id178" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Fixed a bug that nonexistent sort keys for <code class="docutils literal notranslate"><span class="pre">drilldowns[LABEL]</span></code> or
<code class="docutils literal notranslate"><span class="pre">slices[LABEL]</span></code> causes invalid JSON parse error. [Patch by Naoya
Murakami] [GitHub#627]</p></li>
<li><p>Fixed a bug that access to nonexistent sub records for group causes
a crash.  For example, This bug affects the case when you use
<code class="docutils literal notranslate"><span class="pre">drilldowns[LABEL].sort_keys</span> <span class="pre">_sum</span></code> without specifying
<code class="docutils literal notranslate"><span class="pre">calc_types</span></code>.  [Patch by Naoya Murakami] [GitHub#625]</p></li>
<li><p>Fixed a crash bug when tokenizer has an error. It’s caused when
tokenizer and token filter are registered and tokenizer has an
error.</p></li>
<li><p>[<a class="reference internal" href="reference/window_functions/window_record_number.html"><span class="doc">window_record_number</span></a>] Fixed a
bug that arguments for window function is not correctly
passed. [GitHub#634][Patch by Naoya Murakami]</p></li>
</ul>
</div>
<div class="section" id="id179">
<h2>Thanks<a class="headerlink" href="#id179" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Naoya Murakami</p></li>
<li><p>aomi-n</p></li>
</ul>
</div>
</div>
<div class="section" id="the-old-releases">
<h1>The old releases<a class="headerlink" href="#the-old-releases" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="news/6.x.html">News - 6.x</a><ul>
<li class="toctree-l2"><a class="reference internal" href="news/6.x.html#release-6-1-5-2017-01-23">Release 6.1.5 - 2017-01-23</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/6.x.html#release-6-1-4-2017-01-18">Release 6.1.4 - 2017-01-18</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/6.x.html#release-6-1-3-2017-01-06">Release 6.1.3 - 2017-01-06</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/6.x.html#release-6-1-2-2016-12-31">Release 6.1.2 - 2016-12-31</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/6.x.html#release-6-1-1-2016-11-29">Release 6.1.1 - 2016-11-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/6.x.html#release-6-1-0-2016-10-29">Release 6.1.0 - 2016-10-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/6.x.html#release-6-0-9-2016-09-29">Release 6.0.9 - 2016-09-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/6.x.html#release-6-0-8-2016-08-29">Release 6.0.8 - 2016-08-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/6.x.html#release-6-0-7-2016-07-29">Release 6.0.7 - 2016-07-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/6.x.html#release-6-0-5-2016-06-29">Release 6.0.5 - 2016-06-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/6.x.html#release-6-0-4-2016-06-06">Release 6.0.4 - 2016-06-06</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/6.x.html#release-6-0-3-2016-05-29">Release 6.0.3 - 2016-05-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/6.x.html#release-6-0-2-2016-04-29">Release 6.0.2 - 2016-04-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/6.x.html#release-6-0-1-2016-03-29">Release 6.0.1 - 2016-03-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/6.x.html#release-6-0-0-2016-02-29">Release 6.0.0 - 2016-02-29</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="news/5.x.html">News - 5.x</a><ul>
<li class="toctree-l2"><a class="reference internal" href="news/5.x.html#release-5-1-2-2016-01-29">Release 5.1.2 - 2016-01-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/5.x.html#release-5-1-1-2015-12-29">Release 5.1.1 - 2015-12-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/5.x.html#release-5-1-0-2015-11-29">Release 5.1.0 - 2015-11-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/5.x.html#release-5-0-9-2015-10-29">Release 5.0.9 - 2015-10-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/5.x.html#release-5-0-8-2015-09-29">Release 5.0.8 - 2015-09-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/5.x.html#release-5-0-7-2015-08-31">Release 5.0.7 - 2015-08-31</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/5.x.html#release-5-0-6-2015-07-29">Release 5.0.6 - 2015-07-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/5.x.html#release-5-0-5-2015-06-29">Release 5.0.5 - 2015-06-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/5.x.html#release-5-0-4-2015-05-29">Release 5.0.4 - 2015-05-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/5.x.html#release-5-0-3-2015-04-29">Release 5.0.3 - 2015-04-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/5.x.html#release-5-0-2-2015-03-31">Release 5.0.2 - 2015-03-31</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/5.x.html#release-5-0-1-2015-03-29">Release 5.0.1 - 2015-03-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/5.x.html#release-5-0-0-2015-02-09">Release 5.0.0 - 2015-02-09</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="news/4.x.html">News - 4.x</a><ul>
<li class="toctree-l2"><a class="reference internal" href="news/4.x.html#release-4-1-1-2015-01-29">Release 4.1.1 - 2015-01-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/4.x.html#release-4-1-0-2015-01-09">Release 4.1.0 - 2015-01-09</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/4.x.html#release-4-0-9-2014-12-29">Release 4.0.9 - 2014-12-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/4.x.html#release-4-0-8-2014-11-29">Release 4.0.8 - 2014-11-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/4.x.html#release-4-0-7-2014-10-29">Release 4.0.7 - 2014-10-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/4.x.html#release-4-0-6-2014-09-29">Release 4.0.6 - 2014-09-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/4.x.html#release-4-0-5-2014-08-29">Release 4.0.5 - 2014-08-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/4.x.html#release-4-0-4-2014-07-29">Release 4.0.4 - 2014-07-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/4.x.html#release-4-0-3-2014-06-29">Release 4.0.3 - 2014-06-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/4.x.html#release-4-0-2-2014-05-29">Release 4.0.2 - 2014-05-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/4.x.html#release-4-0-1-2014-03-29">Release 4.0.1 - 2014-03-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/4.x.html#release-4-0-0-2014-02-09">Release 4.0.0 - 2014-02-09</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="news/3.x.html">News - 3.x</a><ul>
<li class="toctree-l2"><a class="reference internal" href="news/3.x.html#release-3-1-2-2014-01-29">Release 3.1.2 - 2014-01-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/3.x.html#release-3-1-1-2013-12-29">Release 3.1.1 - 2013-12-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/3.x.html#release-3-1-0-2013-11-29">Release 3.1.0 - 2013-11-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/3.x.html#release-3-0-9-2013-10-29">Release 3.0.9 - 2013-10-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/3.x.html#release-3-0-8-2013-09-29">Release 3.0.8 - 2013-09-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/3.x.html#release-3-0-7-2013-08-29">Release 3.0.7 - 2013-08-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/3.x.html#release-3-0-6-2013-07-29">Release 3.0.6 - 2013-07-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/3.x.html#release-3-0-5-2013-06-29">Release 3.0.5 - 2013-06-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/3.x.html#release-3-0-4-2013-05-29">Release 3.0.4 - 2013-05-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/3.x.html#release-3-0-3-2013-04-29">Release 3.0.3 - 2013-04-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/3.x.html#release-3-0-2-2013-03-29">Release 3.0.2 - 2013-03-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/3.x.html#release-3-0-1-2013-02-28">Release 3.0.1 - 2013-02-28</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/3.x.html#release-3-0-0-2013-02-09">Release 3.0.0 - 2013-02-09</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="news/2.x.html">News - 2.x</a><ul>
<li class="toctree-l2"><a class="reference internal" href="news/2.x.html#release-2-1-2-2013-01-29">Release 2.1.2 - 2013-01-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/2.x.html#release-2-1-1-2012-12-29">Release 2.1.1 - 2012-12-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/2.x.html#release-2-1-0-2012-12-29">Release 2.1.0 - 2012-12-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/2.x.html#release-2-0-9-2012-11-29">Release 2.0.9 - 2012-11-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/2.x.html#release-2-0-8-2012-10-29">Release 2.0.8 - 2012-10-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/2.x.html#release-2-0-7-2012-09-29">Release 2.0.7 - 2012-09-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/2.x.html#release-2-0-6-2012-08-29">Release 2.0.6 - 2012-08-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/2.x.html#release-2-0-5-2012-07-29">Release 2.0.5 - 2012-07-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/2.x.html#release-2-0-4-2012-06-29">Release 2.0.4 - 2012-06-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/2.x.html#release-2-0-3-2012-05-29">Release 2.0.3 - 2012-05-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/2.x.html#release-2-0-2-2012-04-29">Release 2.0.2 - 2012-04-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/2.x.html#release-2-0-1-2012-03-29">Release 2.0.1 - 2012-03-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/2.x.html#release-2-0-0-2012-02-29">Release 2.0.0 - 2012-02-29</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="news/1.3.x.html">News - 1.3.x</a><ul>
<li class="toctree-l2"><a class="reference internal" href="news/1.3.x.html#release-1-3-0-2012-01-29">Release 1.3.0 - 2012-01-29</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="news/1.2.x.html">News - 1.2.x</a><ul>
<li class="toctree-l2"><a class="reference internal" href="news/1.2.x.html#release-1-2-9-2011-12-29">Release 1.2.9 - 2011-12-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/1.2.x.html#release-1-2-8-2011-11-29">Release 1.2.8 - 2011-11-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/1.2.x.html#release-1-2-7-2011-10-29">Release 1.2.7 - 2011-10-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/1.2.x.html#release-1-2-6-2011-09-29">Release 1.2.6 - 2011-09-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/1.2.x.html#release-1-2-5-2011-08-29">Release 1.2.5 - 2011-08-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/1.2.x.html#release-1-2-4-2011-07-29">Release 1.2.4 - 2011-07-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/1.2.x.html#release-1-2-3-2011-06-29">Release 1.2.3 - 2011-06-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/1.2.x.html#release-1-2-2-2011-05-29">Release 1.2.2 - 2011-05-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/1.2.x.html#id20">1.2.1リリース - 2011-04-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/1.2.x.html#id24">1.2.0リリース - 2011-03-29</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="news/1.1.x.html">バージョン1.1.xのお知らせ</a><ul>
<li class="toctree-l2"><a class="reference internal" href="news/1.1.x.html#id1">1.1.0リリース - 2011-02-09</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="news/1.0.x.html">バージョン1.0.xのお知らせ</a><ul>
<li class="toctree-l2"><a class="reference internal" href="news/1.0.x.html#id1">1.0.8リリース - 2011-02-02</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/1.0.x.html#id4">1.0.7リリース - 2011-01-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/1.0.x.html#id8">1.0.6リリース - 2010-12-31</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/1.0.x.html#id11">1.0.5リリース - 2010-12-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/1.0.x.html#id16">1.0.4リリース - 2010-11-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/1.0.x.html#id21">1.0.3リリース - 2010-10-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/1.0.x.html#id26">1.0.2リリース - 2010-09-09</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/1.0.x.html#id31">1.0.1リリース - 2010-09-06</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/1.0.x.html#id35">1.0.0リリース - 2010-08-29</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="news/0.x.html">バージョン0.xのお知らせ</a><ul>
<li class="toctree-l2"><a class="reference internal" href="news/0.x.html#id1">0.7.7リリース - 2010-08-25</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/0.x.html#id4">0.7.6リリース - 2010-08-19</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="news/senna.html">News in Senna period</a><ul>
<li class="toctree-l2"><a class="reference internal" href="news/senna.html#senna-groonga-2009-01-14">Senna -&gt; groonga - 2009-01-14</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/senna.html#id1">2006-04-05</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/senna.html#id2">2006-03-03</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/senna.html#id4">2006-01-16</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/senna.html#id5">2006-01-12</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/senna.html#id7">2005-12-22</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/senna.html#id9">2005-10-27</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/senna.html#id11">2005-09-17</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/senna.html#id13">2005-09-08</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/senna.html#id15">2005-08-16</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/senna.html#id17">2005-07-05</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/senna.html#id18">2005-06-23</a></li>
<li class="toctree-l2"><a class="reference internal" href="news/senna.html#id20">2005-04-12</a></li>
</ul>
</li>
</ul>
</div>
</div>


              </div>
              
              
              <!-- Previous / next buttons -->
<div class='prev-next-area'>
</div>
              
          </main>
          

      </div>
    </div>
  
    <script src="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>
  <footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2009-2022 Groonga Project.<br>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.5.0.<br>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>