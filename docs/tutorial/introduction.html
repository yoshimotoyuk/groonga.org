
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>4.1. Basic operations &#8212; Groonga v12.0.4 documentation</title>
    
    <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
  
    
    <link rel="stylesheet"
      href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
    <link rel="preload" as="font" type="font/woff2" crossorigin
      href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
    <link rel="preload" as="font" type="font/woff2" crossorigin
      href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">
  
    
      
  
    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/pydata-sphinx-theme.css" />
    
    <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">
  
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="4.2. Remote access" href="network.html" />
    <link rel="prev" title="4. Tutorial" href="../tutorial.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en">
    

    <!-- Google Analytics -->
    
<script async="" src="https://www.google-analytics.com/analytics.js"></script>
<script>
                        window.ga = window.ga || function () {
                            (ga.q = ga.q || []).push(arguments) };
                        ga.l = +new Date;
                        ga('create', 'UA-7532323-1', 'auto');
                        ga('set', 'anonymizeIp', true);
                        ga('send', 'pageview');
                    </script>

  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    

<a class="navbar-brand" href="https://groonga.org/">
  <img src="../_static/groonga.png" class="logo" alt="logo">
</a>


    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/groonga/groonga" rel="noopener" target="_blank" title="GitHub"><span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://twitter.com/groonga" rel="noopener" target="_blank" title="Twitter"><span><i class="fab fa-twitter-square"></i></span>
            <label class="sr-only">Twitter</label></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/blog" rel="noopener" target="_blank" title="Blog"><span><i class="fas fa-blog"></i></span>
            <label class="sr-only">Blog</label></a>
        </li>
      </ul>
      </div>
      
      <div class="navbar-end-item">
        <div class="dropdown" id="version_switcher">
    <button type="button" class="btn btn-primary btn-sm navbar-btn dropdown-toggle" id="version_switcher_button" data-toggle="dropdown">
        English  <!-- this text may get changed later by javascript -->
        <span class="caret"></span>
    </button>
    <div id="version_switcher_menu" class="dropdown-menu list-group-flush py-0" aria-labelledby="version_switcher_button">
    <!-- dropdown will be populated by javascript on page load -->
    </div>
</div>

<!-- NOTE: this JS must live here (not in our global JS file) because it relies
     on being processed by Jinja before it is run (specifically for replacing
     variables tutorial/introduction and {'json_url': 'https://groonga.org/docs/_static/switcher.json', 'url_template': 'https://groonga.org/{version}docs/', 'version_match': 'English'}.
-->

<script type="text/javascript">
// Construct the target URL from the JSON components
function buildURL(entry) {
    var template = "https://groonga.org/{version}docs/";  // supplied by jinja
    template = template.replace("{version}", entry.version);
    return template;
}

// Check if corresponding page path exists in other version of docs
// and, if so, go there instead of the homepage of the other docs version
function checkPageExistsAndRedirect(event) {
    const currentFilePath = "tutorial/introduction.html",
          tryUrl = event.target.getAttribute("href");
    let otherDocsHomepage = tryUrl.replace(currentFilePath, "");
    $.ajax({
        type: 'HEAD',
        url: tryUrl,
        // if the page exists, go there
        success: function() {
            location.href = tryUrl;
        }
    }).fail(function() {
        location.href = otherDocsHomepage;
    });
    // this prevents the browser from following the href of the clicked node
    // (which is fine because this function takes care of redirecting)
    return false;
}

// Populate the version switcher from the JSON config file
(function () {
    $.getJSON("https://groonga.org/docs/_static/switcher.json", function(data, textStatus, jqXHR) {
        const currentFilePath = "tutorial/introduction.html";
        // create links to the corresponding page in the other docs versions
        $.each(data, function(index, entry) {
            // if no custom name specified (e.g., "latest"), use version string
            if (!("name" in entry)) {
                entry.name = entry.version;
            }
            // create the node
            const node = document.createElement("a");
            node.setAttribute("class", "list-group-item list-group-item-action py-1");
            node.textContent = `${entry.name}`;
            // get the base URL for that doc version, add the current page's
            // path to it, and set as `href`
            entry.url = buildURL(entry);
            node.setAttribute("href", `${entry.url}${currentFilePath}`);
            // on click, AJAX calls will check if the linked page exists before
            // trying to redirect, and if not, will redirect to the homepage
            // for that version of the docs.
            node.onclick = checkPageExistsAndRedirect;
            $("#version_switcher_menu").append(node);
            // replace dropdown button text with the preferred display name of
            // this version, rather than using sphinx's 12.0.4 variable.
            // also highlight the dropdown entry for the currently-viewed
            // version's entry
            if (entry.version == "English") {
                node.classList.add("active");
                $("#version_switcher_button").text(entry.name);
            }
        });
    });
})();
</script>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar">
              <div class="sidebar-start-items"><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   4.1. Basic operations
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="network.html">
   4.2. Remote access
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="data.html">
   4.3. Various data types
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="search.html">
   4.4. Various search conditions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="drilldown.html">
   4.5. Drilldown
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="index.html">
   4.6. Tag search and reverse resolution of reference relationships
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="match_columns.html">
   4.7. match_columns parameter
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="patricia_trie.html">
   4.8. Prefix search with patricia trie
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="lexicon.html">
   4.9. Additional information about lexicon for full text search
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="micro_blog.html">
   4.10. Let’s create micro-blog
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="query_expansion.html">
   4.11. Query expansion
  </a>
 </li>
</ul>

  </div>
</nav>
              </div>
              <div class="sidebar-end-items">
              </div>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#create-a-database">
   4.1.1. Create a database
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#operate-a-database">
   4.1.2. Operate a database
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#command-format">
   4.1.3. Command format
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#basic-commands">
   4.1.4. Basic commands
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#create-a-table">
   4.1.5. Create a table
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#view-a-table">
   4.1.6. View a table
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#create-a-column">
   4.1.7. Create a column
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#load-records">
   4.1.8. Load records
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#get-a-record">
   4.1.9. Get a record
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#create-a-lexicon-table-for-full-text-search">
   4.1.10. Create a lexicon table for full text search
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#create-an-index-column-for-full-text-search">
   4.1.11. Create an index column for full text search
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#full-text-search">
   4.1.12. Full text search
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#specify-output-columns">
   4.1.13. Specify output columns
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#specify-output-ranges">
   4.1.14. Specify output ranges
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#sort-a-search-result">
   4.1.15. Sort a search result
  </a>
 </li>
</ul>

</nav>
              </div>
              
              <div class="toc-item">
                

<div class="tocsection editthispage">
    <a href="https://github.com/groonga/groonga/edit/master/doc/source/tutorial/introduction.rst">
        <i class="fas fa-pencil-alt"></i> Edit this page
    </a>
</div>

              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="section" id="basic-operations">
<h1><span class="section-number">4.1. </span>Basic operations<a class="headerlink" href="#basic-operations" title="Permalink to this headline">¶</a></h1>
<p>A Groonga package provides a C library (libgroonga) and a command line tool (groonga). This tutorial explains how to use the command line tool, with which you can create/operate databases, start a server, establish a connection with a server, etc.</p>
<div class="section" id="create-a-database">
<h2><span class="section-number">4.1.1. </span>Create a database<a class="headerlink" href="#create-a-database" title="Permalink to this headline">¶</a></h2>
<p>The first step to using Groonga is to create a new database. The following shows how to do it.</p>
<p>Form:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">groonga</span> <span class="o">-</span><span class="n">n</span> <span class="n">DB_PATH</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">-n</span></code> option specifies to create a new database and DB_PATH specifies the path of the new database. Actually, a database consists of a series of files and DB_PATH specifies the file which will be the entrance to the new database. DB_PATH also specifies the path prefix for other files. Note that database creation fails if DB_PATH points to an existing file (For example, <code class="docutils literal notranslate"><span class="pre">db</span> <span class="pre">open</span> <span class="pre">failed</span> <span class="pre">(DB_PATH):</span> <span class="pre">syscall</span> <span class="pre">error</span> <span class="pre">'DB_PATH'</span> <span class="pre">(File</span> <span class="pre">exists)</span></code>. You can operate an existing database in a way that is in the next chapter).</p>
<p>This command creates a new database and then enters into interactive mode in which Groonga prompts you to enter commands for operating that database. You can terminate this mode with Ctrl-d.</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span> <span class="n">groonga</span> <span class="o">-</span><span class="n">n</span> <span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">groonga</span><span class="o">-</span><span class="n">databases</span><span class="o">/</span><span class="n">introduction</span><span class="o">.</span><span class="n">db</span>
</pre></div>
</div>
<p>After this database creation, you can find a series of files in /tmp/groonga-databases.</p>
</div>
<div class="section" id="operate-a-database">
<h2><span class="section-number">4.1.2. </span>Operate a database<a class="headerlink" href="#operate-a-database" title="Permalink to this headline">¶</a></h2>
<p>The following shows how to operate an existing database.</p>
<p>Form:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">groonga</span> <span class="n">DB_PATH</span> <span class="p">[</span><span class="n">COMMAND</span><span class="p">]</span>
</pre></div>
</div>
<p>DB_PATH specifies the path of a target database. This command fails if the specified database does not exist.</p>
<p>If COMMAND is specified, Groonga executes COMMAND and returns the result. Otherwise, Groonga starts in interactive mode that reads commands from the standard input and executes them one by one. This tutorial focuses on the interactive mode.</p>
<p>Let’s see the status of a Groonga process by using a <a class="reference internal" href="../reference/commands/status.html"><span class="doc">status</span></a> command.</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span> <span class="n">groonga</span> <span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">groonga</span><span class="o">-</span><span class="n">databases</span><span class="o">/</span><span class="n">introduction</span><span class="o">.</span><span class="n">db</span>
<span class="n">status</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   {</span>
<span class="c1">#     &quot;uptime&quot;: 0,</span>
<span class="c1">#     &quot;max_command_version&quot;: 3,</span>
<span class="c1">#     &quot;start_time&quot;: 1514346060,</span>
<span class="c1">#     &quot;cache_hit_rate&quot;: 0.0,</span>
<span class="c1">#     &quot;version&quot;: &quot;7.0.9&quot;,</span>
<span class="c1">#     &quot;alloc_count&quot;: 13365,</span>
<span class="c1">#     &quot;command_version&quot;: 1,</span>
<span class="c1">#     &quot;starttime&quot;: 1514346060,</span>
<span class="c1">#     &quot;default_command_version&quot;: 1,</span>
<span class="c1">#     &quot;n_queries&quot;: 0</span>
<span class="c1">#   }</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p>As shown in the above example, a command returns a JSON array. The first element contains an error code, execution time, etc. The second element is the result of an operation.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can format a JSON using additional tools. For example, <a class="reference external" href="https://github.com/michisu/grnwrap">grnwrap</a>, <a class="reference external" href="https://github.com/yoshihara/grnline">Grnline</a>, <a class="reference external" href="http://stedolan.github.io/jq/">jq</a> and so on.</p>
</div>
</div>
<div class="section" id="command-format">
<h2><span class="section-number">4.1.3. </span>Command format<a class="headerlink" href="#command-format" title="Permalink to this headline">¶</a></h2>
<p>Commands for operating a database accept arguments as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Form_1</span><span class="p">:</span> <span class="n">COMMAND</span> <span class="n">VALUE_1</span> <span class="n">VALUE_2</span> <span class="o">..</span>

<span class="n">Form_2</span><span class="p">:</span> <span class="n">COMMAND</span> <span class="o">--</span><span class="n">NAME_1</span> <span class="n">VALUE_1</span> <span class="o">--</span><span class="n">NAME_2</span> <span class="n">VALUE_2</span> <span class="o">..</span>
</pre></div>
</div>
<p>In the first form, arguments must be passed in order. This kind of arguments are called positional arguments because the position of each argument determines its meaning.</p>
<p>In the second form, you can specify a parameter name with its value. So, the order of arguments is not defined. This kind of arguments are known as named parameters or keyword arguments.</p>
<p>If you want to specify a value which contains white-spaces or special characters, such as quotes and parentheses, please enclose the value with single-quotes or double-quotes.</p>
<p>For details, see also the paragraph of “command” in <a class="reference internal" href="../reference/executables/groonga.html"><span class="doc">groonga executable file</span></a>.</p>
</div>
<div class="section" id="basic-commands">
<h2><span class="section-number">4.1.4. </span>Basic commands<a class="headerlink" href="#basic-commands" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><dl class="simple">
<dt><a class="reference internal" href="../reference/commands/status.html"><span class="doc">status</span></a></dt><dd><p>shows status of a Groonga process.</p>
</dd>
<dt><a class="reference internal" href="../reference/commands/table_list.html"><span class="doc">table_list</span></a></dt><dd><p>shows a list of tables in a database.</p>
</dd>
<dt><a class="reference internal" href="../reference/commands/column_list.html"><span class="doc">column_list</span></a></dt><dd><p>shows a list of columns in a table.</p>
</dd>
<dt><a class="reference internal" href="../reference/commands/table_create.html"><span class="doc">table_create</span></a></dt><dd><p>adds a table to a database.</p>
</dd>
<dt><a class="reference internal" href="../reference/commands/column_create.html"><span class="doc">column_create</span></a></dt><dd><p>adds a column to a table.</p>
</dd>
<dt><a class="reference internal" href="../reference/commands/select.html"><span class="doc">select</span></a></dt><dd><p>searches records from a table and shows the result.</p>
</dd>
<dt><a class="reference internal" href="../reference/commands/load.html"><span class="doc">load</span></a></dt><dd><p>inserts records to a table.</p>
</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="create-a-table">
<span id="tutorial-introduction-create-table"></span><h2><span class="section-number">4.1.5. </span>Create a table<a class="headerlink" href="#create-a-table" title="Permalink to this headline">¶</a></h2>
<p>A <a class="reference internal" href="../reference/commands/table_create.html"><span class="doc">table_create</span></a> command creates a new table.</p>
<p>In most cases, a table has a primary key which must be specified with its data type and index type.</p>
<p>There are various data types such as integers, strings, etc. See also <a class="reference internal" href="../reference/types.html"><span class="doc">Data types</span></a> for more details. The index type determines the search performance and the availability of prefix searches. The details will be described later.</p>
<p>Let’s create a table. The following example creates a table with a primary key. The <code class="docutils literal notranslate"><span class="pre">name</span></code> parameter specifies the name of the table. The <code class="docutils literal notranslate"><span class="pre">flags</span></code> parameter specifies the index type for the primary key. The <code class="docutils literal notranslate"><span class="pre">key_type</span></code> parameter specifies the data type of the primary key.</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="o">--</span><span class="n">name</span> <span class="n">Site</span> <span class="o">--</span><span class="n">flags</span> <span class="n">TABLE_HASH_KEY</span> <span class="o">--</span><span class="n">key_type</span> <span class="n">ShortText</span>
<span class="c1"># [[0, 1337566253.89858, 0.000355720520019531], true]</span>
</pre></div>
</div>
<p>The second element of the result indicates that the operation succeeded.</p>
</div>
<div class="section" id="view-a-table">
<h2><span class="section-number">4.1.6. </span>View a table<a class="headerlink" href="#view-a-table" title="Permalink to this headline">¶</a></h2>
<p>A <a class="reference internal" href="../reference/commands/select.html"><span class="doc">select</span></a> command can enumerate records in a table.</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="o">--</span><span class="n">table</span> <span class="n">Site</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         0</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p>When only a table name is specified with a <code class="docutils literal notranslate"><span class="pre">table</span></code> parameter, a <a class="reference internal" href="../reference/commands/select.html"><span class="doc">select</span></a> command returns the first (at most) 10 records in the table. [0] in the result shows the number of records in the table. The next array is a list of columns. [“_id”,”Uint32”] is a column of UInt32, named _id. [“_key”,”ShortText”] is a column of ShortText, named _key.</p>
<p>The above two columns, _id and _key, are the necessary columns. The _id column stores IDs those are automatically allocated by Groonga. The _key column is associated with the primary key. You are not allowed to rename these columns.</p>
</div>
<div class="section" id="create-a-column">
<h2><span class="section-number">4.1.7. </span>Create a column<a class="headerlink" href="#create-a-column" title="Permalink to this headline">¶</a></h2>
<p>A <a class="reference internal" href="../reference/commands/column_create.html"><span class="doc">column_create</span></a> command creates a new column.</p>
<p>Let’s add a column. The following example adds a column to the Site table. The <code class="docutils literal notranslate"><span class="pre">table</span></code> parameter specifies the target table. The <code class="docutils literal notranslate"><span class="pre">name</span></code> parameter specifies the name of the column. The <code class="docutils literal notranslate"><span class="pre">type</span></code> parameter specifies the data type of the column.</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">column_create</span> <span class="o">--</span><span class="n">table</span> <span class="n">Site</span> <span class="o">--</span><span class="n">name</span> <span class="n">title</span> <span class="o">--</span><span class="nb">type</span> <span class="n">ShortText</span>
<span class="c1"># [[0, 1337566253.89858, 0.000355720520019531], true]</span>
<span class="n">select</span> <span class="o">--</span><span class="n">table</span> <span class="n">Site</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         0</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;title&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
</div>
<div class="section" id="load-records">
<h2><span class="section-number">4.1.8. </span>Load records<a class="headerlink" href="#load-records" title="Permalink to this headline">¶</a></h2>
<p>A <a class="reference internal" href="../reference/commands/load.html"><span class="doc">load</span></a> command loads JSON-formatted records into a table.</p>
<p>The following example loads nine records into the Site table.</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Site</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span><span class="s2">&quot;http://example.org/&quot;</span><span class="p">,</span><span class="s2">&quot;title&quot;</span><span class="p">:</span><span class="s2">&quot;This is test record 1!&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span><span class="s2">&quot;http://example.net/&quot;</span><span class="p">,</span><span class="s2">&quot;title&quot;</span><span class="p">:</span><span class="s2">&quot;test record 2.&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span><span class="s2">&quot;http://example.com/&quot;</span><span class="p">,</span><span class="s2">&quot;title&quot;</span><span class="p">:</span><span class="s2">&quot;test test record three.&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span><span class="s2">&quot;http://example.net/afr&quot;</span><span class="p">,</span><span class="s2">&quot;title&quot;</span><span class="p">:</span><span class="s2">&quot;test record four.&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span><span class="s2">&quot;http://example.org/aba&quot;</span><span class="p">,</span><span class="s2">&quot;title&quot;</span><span class="p">:</span><span class="s2">&quot;test test test record five.&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span><span class="s2">&quot;http://example.com/rab&quot;</span><span class="p">,</span><span class="s2">&quot;title&quot;</span><span class="p">:</span><span class="s2">&quot;test test test test record six.&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span><span class="s2">&quot;http://example.net/atv&quot;</span><span class="p">,</span><span class="s2">&quot;title&quot;</span><span class="p">:</span><span class="s2">&quot;test test test record seven.&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span><span class="s2">&quot;http://example.org/gat&quot;</span><span class="p">,</span><span class="s2">&quot;title&quot;</span><span class="p">:</span><span class="s2">&quot;test test record eight.&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span><span class="s2">&quot;http://example.com/vdw&quot;</span><span class="p">,</span><span class="s2">&quot;title&quot;</span><span class="p">:</span><span class="s2">&quot;test test record nine.&quot;</span><span class="p">},</span>
<span class="p">]</span>
<span class="c1"># [[0, 1337566253.89858, 0.000355720520019531], 9]</span>
</pre></div>
</div>
<p>The second element of the result indicates how many records were successfully loaded. In this case, all the records are successfully loaded.</p>
<p>Let’s make sure that these records are correctly stored.</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="o">--</span><span class="n">table</span> <span class="n">Site</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         9</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;title&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         1,</span>
<span class="c1">#         &quot;http://example.org/&quot;,</span>
<span class="c1">#         &quot;This is test record 1!&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         2,</span>
<span class="c1">#         &quot;http://example.net/&quot;,</span>
<span class="c1">#         &quot;test record 2.&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         3,</span>
<span class="c1">#         &quot;http://example.com/&quot;,</span>
<span class="c1">#         &quot;test test record three.&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         4,</span>
<span class="c1">#         &quot;http://example.net/afr&quot;,</span>
<span class="c1">#         &quot;test record four.&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         5,</span>
<span class="c1">#         &quot;http://example.org/aba&quot;,</span>
<span class="c1">#         &quot;test test test record five.&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         6,</span>
<span class="c1">#         &quot;http://example.com/rab&quot;,</span>
<span class="c1">#         &quot;test test test test record six.&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         7,</span>
<span class="c1">#         &quot;http://example.net/atv&quot;,</span>
<span class="c1">#         &quot;test test test record seven.&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         8,</span>
<span class="c1">#         &quot;http://example.org/gat&quot;,</span>
<span class="c1">#         &quot;test test record eight.&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         9,</span>
<span class="c1">#         &quot;http://example.com/vdw&quot;,</span>
<span class="c1">#         &quot;test test record nine.&quot;</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
</div>
<div class="section" id="get-a-record">
<h2><span class="section-number">4.1.9. </span>Get a record<a class="headerlink" href="#get-a-record" title="Permalink to this headline">¶</a></h2>
<p>A <a class="reference internal" href="../reference/commands/select.html"><span class="doc">select</span></a> command can search records in a table.</p>
<p>If a search condition is specified with a <code class="docutils literal notranslate"><span class="pre">query</span></code> parameter, a <a class="reference internal" href="../reference/commands/select.html"><span class="doc">select</span></a> command searches records matching the search condition and returns the matched records.</p>
<p>Let’s get a record having a specified record ID. The following example gets the first record in the Site table. More precisely, the <code class="docutils literal notranslate"><span class="pre">query</span></code> parameter specifies a record whose _id column stores 1.</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="o">--</span><span class="n">table</span> <span class="n">Site</span> <span class="o">--</span><span class="n">query</span> <span class="n">_id</span><span class="p">:</span><span class="mi">1</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         1</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;title&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         1,</span>
<span class="c1">#         &quot;http://example.org/&quot;,</span>
<span class="c1">#         &quot;This is test record 1!&quot;</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p>Next, let’s get a record having a specified key. The following example gets the record whose primary key is “<a class="reference external" href="http://example.org/">http://example.org/</a>”. More precisely, the <code class="docutils literal notranslate"><span class="pre">query</span></code> parameter specifies a record whose _key column stores “<a class="reference external" href="http://example.org/">http://example.org/</a>”.</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="o">--</span><span class="n">table</span> <span class="n">Site</span> <span class="o">--</span><span class="n">query</span> <span class="s1">&#39;_key:&quot;http://example.org/&quot;&#39;</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         1</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;title&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         1,</span>
<span class="c1">#         &quot;http://example.org/&quot;,</span>
<span class="c1">#         &quot;This is test record 1!&quot;</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
</div>
<div class="section" id="create-a-lexicon-table-for-full-text-search">
<h2><span class="section-number">4.1.10. </span>Create a lexicon table for full text search<a class="headerlink" href="#create-a-lexicon-table-for-full-text-search" title="Permalink to this headline">¶</a></h2>
<p>Let’s go on to how to make full text search.</p>
<p>Groonga uses an inverted index to provide fast full text search. So, the first step is to create a lexicon table which stores an inverted index, also known as postings lists. The primary key of this table is associated with a vocabulary made up of index terms and each record stores postings lists for one index term.</p>
<p>The following shows a command which creates a lexicon table named Terms. The data type of its primary key is ShortText.</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="o">--</span><span class="n">name</span> <span class="n">Terms</span> <span class="o">--</span><span class="n">flags</span> <span class="n">TABLE_PAT_KEY</span> <span class="o">--</span><span class="n">key_type</span> <span class="n">ShortText</span> <span class="o">--</span><span class="n">default_tokenizer</span> <span class="n">TokenBigram</span> <span class="o">--</span><span class="n">normalizer</span> <span class="n">NormalizerAuto</span>
<span class="c1"># [[0, 1337566253.89858, 0.000355720520019531], true]</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="../reference/commands/table_create.html"><span class="doc">table_create</span></a> command takes many parameters but you don’t need to understand all of them. Please skip the next paragraph if you are not interested in how it works.</p>
<p>The TABLE_PAT_KEY flag specifies to store index terms in a patricia trie. The <code class="docutils literal notranslate"><span class="pre">default_tokenizer</span></code> parameter specifies the method for tokenizing text. This example uses TokenBigram that is generally called N-gram.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">normalizer</span></code> parameter specifies to normalize index terms.</p>
</div>
<div class="section" id="create-an-index-column-for-full-text-search">
<h2><span class="section-number">4.1.11. </span>Create an index column for full text search<a class="headerlink" href="#create-an-index-column-for-full-text-search" title="Permalink to this headline">¶</a></h2>
<p>The second step is to create an index column, which allows you to search records from its associated column. That is to say this step specifies which column needs an index.</p>
<p>Let’s create an index column. The following example creates an index column for a column in the Site table.</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">column_create</span> <span class="o">--</span><span class="n">table</span> <span class="n">Terms</span> <span class="o">--</span><span class="n">name</span> <span class="n">blog_title</span> <span class="o">--</span><span class="n">flags</span> <span class="n">COLUMN_INDEX</span><span class="o">|</span><span class="n">WITH_POSITION</span> <span class="o">--</span><span class="nb">type</span> <span class="n">Site</span> <span class="o">--</span><span class="n">source</span> <span class="n">title</span>
<span class="c1"># [[0, 1337566253.89858, 0.000355720520019531], true]</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">table</span></code> parameter specifies the index table and the <code class="docutils literal notranslate"><span class="pre">name</span></code> parameter specifies the index column. The <code class="docutils literal notranslate"><span class="pre">type</span></code> parameter specifies the target table and the <code class="docutils literal notranslate"><span class="pre">source</span></code> parameter specifies the target column. The COLUMN_INDEX flag specifies to create an index column and the WITH_POSITION flag specifies to create a full inverted index, which contains the positions of each index term. This combination, COLUMN_INDEX|WITH_POSITION, is recommended for the general purpose.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can create a lexicon table and index columns before/during/after loading records. If a target column already has records, Groonga creates an inverted index in a static manner. In contrast, if you load records into an already indexed column, Groonga updates the inverted index in a dynamic manner.</p>
</div>
</div>
<div class="section" id="full-text-search">
<h2><span class="section-number">4.1.12. </span>Full text search<a class="headerlink" href="#full-text-search" title="Permalink to this headline">¶</a></h2>
<p>It’s time. You can make full text search with a <a class="reference internal" href="../reference/commands/select.html"><span class="doc">select</span></a> command.</p>
<p>A query for full text search is specified with a <code class="docutils literal notranslate"><span class="pre">query</span></code> parameter. The following example searches records whose “title” column contains “this”. The ‘&#64;’ specifies to make full text search. Note that a lower case query matches upper case and capitalized terms in a record if NormalizerAuto was specified when creating a lexcon table.</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="o">--</span><span class="n">table</span> <span class="n">Site</span> <span class="o">--</span><span class="n">query</span> <span class="n">title</span><span class="p">:</span><span class="nd">@this</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         1</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;title&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         1,</span>
<span class="c1">#         &quot;http://example.org/&quot;,</span>
<span class="c1">#         &quot;This is test record 1!&quot;</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p>In this example, the first record matches the query because its title contains “This”, that is the capitalized form of the query.</p>
<p>A <a class="reference internal" href="../reference/commands/select.html"><span class="doc">select</span></a> command accepts an optional parameter, named <cite>match_columns</cite>, that specifies the default target columns. This parameter is used if target columns are not specified in a query. <a class="footnote-reference brackets" href="#id2" id="id1">1</a></p>
<p>The combination of “<cite>–match_columns</cite> title” and “<cite>–query</cite> this” brings you the same result that “<cite>–query</cite> title:&#64;this” does.</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="o">--</span><span class="n">table</span> <span class="n">Site</span> <span class="o">--</span><span class="n">match_columns</span> <span class="n">title</span> <span class="o">--</span><span class="n">query</span> <span class="n">this</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         1</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;title&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         1,</span>
<span class="c1">#         &quot;http://example.org/&quot;,</span>
<span class="c1">#         &quot;This is test record 1!&quot;</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
</div>
<div class="section" id="specify-output-columns">
<h2><span class="section-number">4.1.13. </span>Specify output columns<a class="headerlink" href="#specify-output-columns" title="Permalink to this headline">¶</a></h2>
<p>An <code class="docutils literal notranslate"><span class="pre">output_columns</span></code> parameter of a <a class="reference internal" href="../reference/commands/select.html"><span class="doc">select</span></a> command specifies columns to appear in the search result. If you want to specify more than one columns, please separate column names by commas (‘,’).</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="o">--</span><span class="n">table</span> <span class="n">Site</span> <span class="o">--</span><span class="n">output_columns</span> <span class="n">_key</span><span class="p">,</span><span class="n">title</span><span class="p">,</span><span class="n">_score</span> <span class="o">--</span><span class="n">query</span> <span class="n">title</span><span class="p">:</span><span class="nd">@test</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         9</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;title&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_score&quot;,</span>
<span class="c1">#           &quot;Int32&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;http://example.org/&quot;,</span>
<span class="c1">#         &quot;This is test record 1!&quot;,</span>
<span class="c1">#         1</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;http://example.net/&quot;,</span>
<span class="c1">#         &quot;test record 2.&quot;,</span>
<span class="c1">#         1</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;http://example.com/&quot;,</span>
<span class="c1">#         &quot;test test record three.&quot;,</span>
<span class="c1">#         2</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;http://example.net/afr&quot;,</span>
<span class="c1">#         &quot;test record four.&quot;,</span>
<span class="c1">#         1</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;http://example.org/aba&quot;,</span>
<span class="c1">#         &quot;test test test record five.&quot;,</span>
<span class="c1">#         3</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;http://example.com/rab&quot;,</span>
<span class="c1">#         &quot;test test test test record six.&quot;,</span>
<span class="c1">#         4</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;http://example.net/atv&quot;,</span>
<span class="c1">#         &quot;test test test record seven.&quot;,</span>
<span class="c1">#         3</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;http://example.org/gat&quot;,</span>
<span class="c1">#         &quot;test test record eight.&quot;,</span>
<span class="c1">#         2</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;http://example.com/vdw&quot;,</span>
<span class="c1">#         &quot;test test record nine.&quot;,</span>
<span class="c1">#         2</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p>This example specifies three output columns including the _score column, which stores the relevance score of each record.</p>
</div>
<div class="section" id="specify-output-ranges">
<h2><span class="section-number">4.1.14. </span>Specify output ranges<a class="headerlink" href="#specify-output-ranges" title="Permalink to this headline">¶</a></h2>
<p>A <a class="reference internal" href="../reference/commands/select.html"><span class="doc">select</span></a> command returns a part of its search result if <code class="docutils literal notranslate"><span class="pre">offset</span></code> and/or <code class="docutils literal notranslate"><span class="pre">limit</span></code> parameters are specified. These parameters are useful to paginate a search result, a widely-used interface which shows a search result on a page by page basis.</p>
<p>An <code class="docutils literal notranslate"><span class="pre">offset</span></code> parameter specifies the starting point and a <code class="docutils literal notranslate"><span class="pre">limit</span></code> parameter specifies the maximum number of records to be returned. If you need the first record in a search result, the offset parameter must be 0 or omitted.</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="o">--</span><span class="n">table</span> <span class="n">Site</span> <span class="o">--</span><span class="n">offset</span> <span class="mi">0</span> <span class="o">--</span><span class="n">limit</span> <span class="mi">3</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         9</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;title&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         1,</span>
<span class="c1">#         &quot;http://example.org/&quot;,</span>
<span class="c1">#         &quot;This is test record 1!&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         2,</span>
<span class="c1">#         &quot;http://example.net/&quot;,</span>
<span class="c1">#         &quot;test record 2.&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         3,</span>
<span class="c1">#         &quot;http://example.com/&quot;,</span>
<span class="c1">#         &quot;test test record three.&quot;</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
<span class="n">select</span> <span class="o">--</span><span class="n">table</span> <span class="n">Site</span> <span class="o">--</span><span class="n">offset</span> <span class="mi">3</span> <span class="o">--</span><span class="n">limit</span> <span class="mi">3</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         9</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;title&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         4,</span>
<span class="c1">#         &quot;http://example.net/afr&quot;,</span>
<span class="c1">#         &quot;test record four.&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         5,</span>
<span class="c1">#         &quot;http://example.org/aba&quot;,</span>
<span class="c1">#         &quot;test test test record five.&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         6,</span>
<span class="c1">#         &quot;http://example.com/rab&quot;,</span>
<span class="c1">#         &quot;test test test test record six.&quot;</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
<span class="n">select</span> <span class="o">--</span><span class="n">table</span> <span class="n">Site</span> <span class="o">--</span><span class="n">offset</span> <span class="mi">7</span> <span class="o">--</span><span class="n">limit</span> <span class="mi">3</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         9</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;title&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         8,</span>
<span class="c1">#         &quot;http://example.org/gat&quot;,</span>
<span class="c1">#         &quot;test test record eight.&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         9,</span>
<span class="c1">#         &quot;http://example.com/vdw&quot;,</span>
<span class="c1">#         &quot;test test record nine.&quot;</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
</div>
<div class="section" id="sort-a-search-result">
<h2><span class="section-number">4.1.15. </span>Sort a search result<a class="headerlink" href="#sort-a-search-result" title="Permalink to this headline">¶</a></h2>
<p>A <a class="reference internal" href="../reference/commands/select.html"><span class="doc">select</span></a> command sorts its result when used with a <code class="docutils literal notranslate"><span class="pre">sort_keys</span></code> parameter.</p>
<p>A <code class="docutils literal notranslate"><span class="pre">sort_keys</span></code> parameter specifies a column as a sorting creteria. A search result is arranged in ascending order of the column values. If you want to sort a search result in reverse order, please add a leading hyphen (‘-‘) to the column name in a parameter.</p>
<p>The following example shows records in the Site table in reverse order.</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="o">--</span><span class="n">table</span> <span class="n">Site</span> <span class="o">--</span><span class="n">sort_keys</span> <span class="o">-</span><span class="n">_id</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         9</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;title&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         9,</span>
<span class="c1">#         &quot;http://example.com/vdw&quot;,</span>
<span class="c1">#         &quot;test test record nine.&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         8,</span>
<span class="c1">#         &quot;http://example.org/gat&quot;,</span>
<span class="c1">#         &quot;test test record eight.&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         7,</span>
<span class="c1">#         &quot;http://example.net/atv&quot;,</span>
<span class="c1">#         &quot;test test test record seven.&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         6,</span>
<span class="c1">#         &quot;http://example.com/rab&quot;,</span>
<span class="c1">#         &quot;test test test test record six.&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         5,</span>
<span class="c1">#         &quot;http://example.org/aba&quot;,</span>
<span class="c1">#         &quot;test test test record five.&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         4,</span>
<span class="c1">#         &quot;http://example.net/afr&quot;,</span>
<span class="c1">#         &quot;test record four.&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         3,</span>
<span class="c1">#         &quot;http://example.com/&quot;,</span>
<span class="c1">#         &quot;test test record three.&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         2,</span>
<span class="c1">#         &quot;http://example.net/&quot;,</span>
<span class="c1">#         &quot;test record 2.&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         1,</span>
<span class="c1">#         &quot;http://example.org/&quot;,</span>
<span class="c1">#         &quot;This is test record 1!&quot;</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p>The next example uses the _score column as the sorting criteria for ranking the search result. The result is sorted in relevance order.</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="o">--</span><span class="n">table</span> <span class="n">Site</span> <span class="o">--</span><span class="n">query</span> <span class="n">title</span><span class="p">:</span><span class="nd">@test</span> <span class="o">--</span><span class="n">output_columns</span> <span class="n">_id</span><span class="p">,</span><span class="n">_score</span><span class="p">,</span><span class="n">title</span> <span class="o">--</span><span class="n">sort_keys</span> <span class="o">-</span><span class="n">_score</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         9</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_score&quot;,</span>
<span class="c1">#           &quot;Int32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;title&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         6,</span>
<span class="c1">#         4,</span>
<span class="c1">#         &quot;test test test test record six.&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         5,</span>
<span class="c1">#         3,</span>
<span class="c1">#         &quot;test test test record five.&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         7,</span>
<span class="c1">#         3,</span>
<span class="c1">#         &quot;test test test record seven.&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         8,</span>
<span class="c1">#         2,</span>
<span class="c1">#         &quot;test test record eight.&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         3,</span>
<span class="c1">#         2,</span>
<span class="c1">#         &quot;test test record three.&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         9,</span>
<span class="c1">#         2,</span>
<span class="c1">#         &quot;test test record nine.&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         1,</span>
<span class="c1">#         1,</span>
<span class="c1">#         &quot;This is test record 1!&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         4,</span>
<span class="c1">#         1,</span>
<span class="c1">#         &quot;test record four.&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         2,</span>
<span class="c1">#         1,</span>
<span class="c1">#         &quot;test record 2.&quot;</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p>If you want to specify more than one columns, please separate column names by commas (‘,’). In such a case, a search result is sorted in order of the values in the first column, and then records having the same values in the first column are sorted in order of the second column values.</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="o">--</span><span class="n">table</span> <span class="n">Site</span> <span class="o">--</span><span class="n">query</span> <span class="n">title</span><span class="p">:</span><span class="nd">@test</span> <span class="o">--</span><span class="n">output_columns</span> <span class="n">_id</span><span class="p">,</span><span class="n">_score</span><span class="p">,</span><span class="n">title</span> <span class="o">--</span><span class="n">sort_keys</span> <span class="o">-</span><span class="n">_score</span><span class="p">,</span><span class="n">_id</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         9</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_score&quot;,</span>
<span class="c1">#           &quot;Int32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;title&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         6,</span>
<span class="c1">#         4,</span>
<span class="c1">#         &quot;test test test test record six.&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         5,</span>
<span class="c1">#         3,</span>
<span class="c1">#         &quot;test test test record five.&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         7,</span>
<span class="c1">#         3,</span>
<span class="c1">#         &quot;test test test record seven.&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         3,</span>
<span class="c1">#         2,</span>
<span class="c1">#         &quot;test test record three.&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         8,</span>
<span class="c1">#         2,</span>
<span class="c1">#         &quot;test test record eight.&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         9,</span>
<span class="c1">#         2,</span>
<span class="c1">#         &quot;test test record nine.&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         1,</span>
<span class="c1">#         1,</span>
<span class="c1">#         &quot;This is test record 1!&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         2,</span>
<span class="c1">#         1,</span>
<span class="c1">#         &quot;test record 2.&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         4,</span>
<span class="c1">#         1,</span>
<span class="c1">#         &quot;test record four.&quot;</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p class="rubric">footnote</p>
<dl class="footnote brackets">
<dt class="label" id="id2"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p>Currently, a <code class="docutils literal notranslate"><span class="pre">match_columns</span></code> parameter is available iff there exists an inverted index for full text search. A <code class="docutils literal notranslate"><span class="pre">match_columns</span></code> parameter for a regular column is not supported.</p>
</dd>
</dl>
</div>
</div>


              </div>
              
              
              <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="../tutorial.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title"><span class="section-number">4. </span>Tutorial</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="network.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">4.2. </span>Remote access</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
              
          </main>
          

      </div>
    </div>
  
    <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>
  <footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2009-2022 Groonga Project.<br>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.5.0.<br>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>